<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2022-01-03 Mon 02:14 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>用org-mode配置所有dotfile</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="kamisama" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: auto;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline; margin-top: 14px;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<script type="text/javascript">
// @license magnet:?xt=urn:btih:e95b018ef3580986a04669f1b5879592219e2a7a&dn=public-domain.txt Public Domain
<!--/*--><![CDATA[/*><!--*/
     function CodeHighlightOn(elem, id)
     {
       var target = document.getElementById(id);
       if(null != target) {
         elem.classList.add("code-highlighted");
         target.classList.add("code-highlighted");
       }
     }
     function CodeHighlightOff(elem, id)
     {
       var target = document.getElementById(id);
       if(null != target) {
         elem.classList.remove("code-highlighted");
         target.classList.remove("code-highlighted");
       }
     }
    /*]]>*///-->
// @license-end
</script>
</head>
<body>
<div id="content">
<h1 class="title">用org-mode配置所有dotfile</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org7c94d45">1. 用org-babel配置所有的dotfile</a>
<ul>
<li><a href="#orgf4a45bd">1.1. Org-babel</a></li>
<li><a href="#orgfc8da0a">1.2. 将一个代码块的执行结果或返回值传递给另一个代码块</a></li>
<li><a href="#orgf2fa8f2">1.3. 每次保存这个文件自动执行 <code>org-bable-tangle</code></a></li>
</ul>
</li>
<li><a href="#org41cb6be">2. Emacs</a>
<ul>
<li><a href="#org73c8d1c">2.1. 显示emacs启动时间</a></li>
<li><a href="#org7a7b4a6">2.2. Native Compilation</a></li>
<li><a href="#orgc641fa8">2.3. 包管理工具</a></li>
<li><a href="#orge8dff8e">2.4. 默认编码格式</a></li>
<li><a href="#org61ae071">2.5. Server Mode</a></li>
<li><a href="#orgc52b369">2.6. 查看启动过程耗时</a></li>
<li><a href="#orgc27abdc">2.7. 基本的设置</a>
<ul>
<li><a href="#org3ac6023">2.7.1. 取消初始界面的菜单,工具栏,滚动条等</a></li>
<li><a href="#org8c0f133">2.7.2. 优化滚动的表现</a></li>
<li><a href="#org8862a08">2.7.3. 窗口透明度和最大化</a></li>
<li><a href="#org7fb81a6">2.7.4. 字体设置</a></li>
<li><a href="#org7bf150d">2.7.5. 状态栏设置</a>
<ul>
<li><a href="#orgf4aabd3">2.7.5.1. Basic Customization</a></li>
<li><a href="#orgb2a340b">2.7.5.2. Enable mode Diminishing</a></li>
<li><a href="#org348d6e8">2.7.5.3. Smart mode line</a></li>
<li><a href="#org18e88a0">2.7.5.4. Doom modeline</a></li>
</ul>
</li>
<li><a href="#org55c1d05">2.7.6. 更好的括号展示</a></li>
<li><a href="#org45f9362">2.7.7. doom主题</a></li>
<li><a href="#orga4abc3d">2.7.8. 行号设置</a></li>
<li><a href="#org7f8bd3e">2.7.9. Workspace</a></li>
<li><a href="#org207ffc2">2.7.10. NOtifications</a></li>
<li><a href="#org02ae3d8">2.7.11. Auto-Saving changed files</a></li>
<li><a href="#org33272af">2.7.12. Auto-Reverting Changed Files</a></li>
<li><a href="#org12d82b2">2.7.13. UI Toggles</a></li>
</ul>
</li>
<li><a href="#orgfa434d1">2.8. 按键设置</a>
<ul>
<li><a href="#org69abfe8">2.8.1. 查看使用了哪些命令</a></li>
<li><a href="#orgf5e8bc8">2.8.2. 取消ESC作为 <code>M-x</code> 的前缀按键,将其设置为和Vim类似的退出命令 <code>C-g</code></a></li>
<li><a href="#orgb043a8f">2.8.3. 取消 <code>C-u</code> 作为 <code>[count]</code> 的作用,因为要使用Vim的 <code>C-u</code> 做翻页</a></li>
<li><a href="#orgbcd830a">2.8.4. Evil</a>
<ul>
<li><a href="#org8b7ee9b">2.8.4.1. 基本的Vim按键设置</a></li>
<li><a href="#org7729f44">2.8.4.2. 绑定"jk"退出插入模式</a></li>
<li><a href="#orgcf10de2">2.8.4.3. 绑定&lt;leader&gt;s重新加载配置文件</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#org23ed809">2.9. 编辑设置</a>
<ul>
<li><a href="#org57d8ecd">2.9.1. Tab Width</a></li>
<li><a href="#org6edd37e">2.9.2. Use spaces instead of tabs for indnetation</a></li>
<li><a href="#org6dcb679">2.9.3. Commenting Lines</a></li>
<li><a href="#orgdd7559d">2.9.4. Automatically Clean whitespace</a></li>
</ul>
</li>
<li><a href="#orge95bc58">2.10. 按键面板</a></li>
<li><a href="#orgf2a52ac">2.11. 按键绑定</a>
<ul>
<li><a href="#org1fc8144">2.11.1. general.el 用来管理快捷键绑定</a></li>
<li><a href="#orgfa0c767">2.11.2. hydra 来绑定快捷键</a></li>
<li><a href="#org0aa3e47">2.11.3. Evil 快捷键绑定</a></li>
</ul>
</li>
<li><a href="#org2c7a72d">2.12. 文件浏览器</a></li>
<li><a href="#org5ea226f">2.13. Minibuffer补全(Emacs 命令补全)</a></li>
<li><a href="#orgafd9251">2.14. Development</a>
<ul>
<li><a href="#orgda6de19">2.14.1. Lsp-mode</a>
<ul>
<li><a href="#orgcd3a72f">2.14.1.1. Lsp</a></li>
<li><a href="#org84e7a6d">2.14.1.2. Lsp for python</a></li>
<li><a href="#org2ab437b">2.14.1.3. LSP for Html</a></li>
</ul>
</li>
<li><a href="#orgff5a092">2.14.2. Python<sub>settings</sub></a></li>
<li><a href="#orgaf6bed4">2.14.3. Format python code</a></li>
<li><a href="#org7a0f70f">2.14.4. Format All</a></li>
<li><a href="#org55b4de7">2.14.5. Elpy &#x2013; IDE for py</a></li>
</ul>
</li>
<li><a href="#org4551ed8">2.15. Orgmode</a>
<ul>
<li><a href="#orgdf0b22e">2.15.1. CodeBlock模版</a></li>
<li><a href="#org1700710">2.15.2. outline</a></li>
<li><a href="#org8edd34e">2.15.3. Org-roam</a></li>
<li><a href="#org13d8c2d">2.15.4. Org-mode</a>
<ul>
<li><a href="#org7169e03">2.15.4.1. Init set up</a></li>
<li><a href="#org616d23c">2.15.4.2. Hide emphasis markers</a></li>
<li><a href="#org7b2f732">2.15.4.3. org-drill</a></li>
</ul>
</li>
<li><a href="#org9fab3a3">2.15.5. Pomodoro</a></li>
<li><a href="#orge6c5772">2.15.6. tracking habits</a></li>
<li><a href="#org7bd442f">2.15.7. Auto insert newline</a></li>
<li><a href="#orgc12f545">2.15.8. org-capture-template</a></li>
<li><a href="#org4b7ab19">2.15.9. Encrypt</a></li>
</ul>
</li>
<li><a href="#orgea6d7bf">2.16. Productivity</a>
<ul>
<li><a href="#orgbc5748b">2.16.1. 括号补全</a></li>
<li><a href="#org7872172">2.16.2. Snippet</a></li>
</ul>
</li>
<li><a href="#org4fa9757">2.17. Ebook</a></li>
<li><a href="#orga822144">2.18. Magit</a></li>
<li><a href="#orgd4d6cb1">2.19. Save Emacs Sessions</a></li>
</ul>
</li>
</ul>
</div>
</div>


<div id="outline-container-org7c94d45" class="outline-2">
<h2 id="org7c94d45"><span class="section-number-2">1</span> 用org-babel配置所有的dotfile</h2>
<div class="outline-text-2" id="text-1">
</div>
<div id="outline-container-orgf4a45bd" class="outline-3">
<h3 id="orgf4a45bd"><span class="section-number-3">1.1</span> Org-babel</h3>
<div class="outline-text-3" id="text-1-1">
<p>
org-mode 可以执行代码块用的是org-babel的功能
<code>org-babel-tangle(C-c C-v t)</code> 是一个macs内置的方法,用来将org文件中的代码块写入到指定的文件中,理论上可以利用这个方法配置一切基于文本文件配置的软件
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(message "some text ")
</pre>
</div>

<blockquote>
<p>
要让这个org文件能起到配置作用:
</p>
<ul class="org-ul">
<li>头信息中配置好代码块tangle的目标文件</li>
<li>想对其他语言的代码块也生效需要配置 <code>org-babel-do-load-languages</code></li>
</ul>
</blockquote>

<p>
上面的例子里在代码块的 <code>:tangle</code> 属性中设置了目标文件的位置，如果代码块很多，总不能每一个都手动去指定吧，这里就可以用到org文件的头信息，
<code>#+PROPERTY: header-args:emacs-lisp :tangle ~/.emacs.d/init.el</code>,就像这个文件的头信息一样，将 emacs-lisp代码块的 <code>tangle</code> 属性设置为一个默认值，这个属性被所有 emacs-lisp 代码块继承.
和OB思想一样，如果代码块另外指定了目标文件的位置，那就会使用指定的，而不是头信息的默认属性.
</p>
</div>
</div>

<div id="outline-container-orgfc8da0a" class="outline-3">
<h3 id="orgfc8da0a"><span class="section-number-3">1.2</span> 将一个代码块的执行结果或返回值传递给另一个代码块</h3>
<div class="outline-text-3" id="text-1-2">
<p>
eamcs默认执行的只有emacs-lisp语言的代码块,开启其他语言的代码块执行功能需要添加配置:
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(org-babel-do-load-languages
 'org-babel-load-languages
 '((emacs-lisp . t)
   (python . t)
   (dot . t)
   (shell . t)
   ;; (browser . t)
   (js . t)
   ))
(push '("conf-unix" . conf-unix) org-src-lang-modes)
;; 每次执行不会询问是否执行
(setq org-confirm-babel-evaluate nil)
;;(message "hello")
</pre>
</div>

<div class="org-src-container">
<pre class="src src-python" id="orgf8874c0">import random
return random.randint(0,100)
</pre>
</div>
<p>
上面的代码块有名字 <code>block_name</code>,下面载配置文件的过程就是执行一系列emacs-lisp的过程,所以有时候顺序很重要
</p>
</div>
</div>

<div id="outline-container-orgf2fa8f2" class="outline-3">
<h3 id="orgf2fa8f2"><span class="section-number-3">1.3</span> 每次保存这个文件自动执行 <code>org-bable-tangle</code></h3>
<div class="outline-text-3" id="text-1-3">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(defun efs/org-babel-tangle-config()
  (when (string-equal (buffer-file-name)
		      (expand-file-name "~/MyLife/Emacs/DotFiles.org"))
    (let ((org-confirm-babel-evaluate nil))
      (org-babel-tangle))))
(add-hook 'org-mode-hook (lambda () (add-hook 'after-save-hook #'efs/org-babel-tangle-config)))
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org41cb6be" class="outline-2">
<h2 id="org41cb6be"><span class="section-number-2">2</span> Emacs</h2>
<div class="outline-text-2" id="text-2">
</div>
<div id="outline-container-org73c8d1c" class="outline-3">
<h3 id="org73c8d1c"><span class="section-number-3">2.1</span> 显示emacs启动时间</h3>
<div class="outline-text-3" id="text-2-1">
<div class="org-src-container">
<pre class="src src-emacs-lisp">;; The default is 800 kilobytes.  Measured in bytes.
(setq gc-cons-threshold (* 50 1000 1000))

;; Profile emacs startup
(add-hook 'emacs-startup-hook
	  (lambda ()
	    (message "*** Emacs loaded in %s with %d garbage collections."
		     (format "%.2f seconds"
			     (float-time
			      (time-subtract after-init-time before-init-time)))
		     gcs-done)))
</pre>
</div>
</div>
</div>

<div id="outline-container-org7a7b4a6" class="outline-3">
<h3 id="org7a7b4a6"><span class="section-number-3">2.2</span> Native Compilation</h3>
<div class="outline-text-3" id="text-2-2">
<div class="org-src-container">
<pre class="src src-emacs-lisp">;; Silence compiler warnings as they can be pretty disruptive
(setq comp-async-report-warnings-errors nil)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc641fa8" class="outline-3">
<h3 id="orgc641fa8"><span class="section-number-3">2.3</span> 包管理工具</h3>
<div class="outline-text-3" id="text-2-3">
<blockquote>
<p>
这是写给我自己记录用的,免得过些时候忘了写这个配置文件时候的这些想法,看到这里记得把这写碎碎念移到介绍emacs包管理工具或其他合适的地方.
Emacs原生状态又丑由low,完全是上世纪的文本编辑器风格.那为啥会有那么多人用?还被成为是"神之编辑器"?我的使用感受是因为它有强大的社区支持和高度可定制.
Vim也是可定制,但vimscript给我个人的感觉是真的难用,又像是语言又像是配置文件,但emacs不同,它的配置语言emacs-lisp是lisp方言,配置emacs感觉就像是
在自己编写适合自己的编辑器的程序一样,怪不得之前看到一篇写lisp为什么现在不是热门语言的文章说lisp是一门创造其他编程语言的编程语言.基于这种强大的可定制能力,
Emacs的社区成员为我们提供了许多强大的配置,这些配置被整合成一个个包放在Melpa,Elpa等仓库里,类似插件形式可供用户下载使用,Emacs自带的包管理工具我只用过图形界面的,也就是点点点来安装包,
但用点点点的形式不能每次更换环境都靠点点点吧,看了下emacswiki,里面也有emacs自带的包管理工具的配置,好不好用不知道,反正我看的一些教程里都没用.网上emacs大神用的全是可再现的配置文件,跟着大神走总没错吧,在追求性价比这方面,搞编程(懒)的人总是有特殊的想法,
大神的配置总是要达到一次配置,多次使用的目标.
<a href="https://github.com/jwiegley/use-package">use-package</a>就是一位大神因为使用的包太多创建出来的一个包管理工具,尽管大神说这个是用来更好的配置他那80多个包的而不是一个包管理工具,但也是能当包管理工具使的.
我这个配置文件是跟着<a href="https://github.com/daviwil">David Wilson</a>的系列直播视频和他的配置文件学的,尽管他的包管理工具已经换成 <a href="https://github.com/raxod502/straight.el#features">straight.el</a> 了, 但暂时我还是先用着 <code>use-package</code> 再说,而且看介绍, <code>straight.el</code> 是有 <code>use-package</code> 集成的,将来再换应该不难,看David的配置文件也只加了一点额外配置,其他基本没怎么变.
上面是不正经的碎碎念,下面就是正经的配置文件
</p>
</blockquote>

<div class="org-src-container">
<pre class="src src-emacs-lisp">;; 这个package 就是emacs默认的包管理工具了(吧)
(require 'package)   ;; 这里的require 就像是python里的import吧,package就像是module

;; 设置包仓库
(setq package-archives '(("malpa" . "https://melpa.org/packages/")
			 ("org" . "https://orgmode.org/elpa/")
			 ("elpa" . "https://elpa.gnu.org/packages/")))

;; 设置完仓库后要初始化一下仓库,再去执行下载包或者其他动作,使用过linux包管理工具的应该不陌生
(package-initialize)
(unless package-archive-contents   ;;如果源头仓库的信息没有缓存到本地就执行package-refresh-contents缓存一下,相当与apt update吧
  (package-refresh-contents))
;; Initialize use-package on non-Linux platforms,这是在非linux平台上,可能use-package不是emacs内置的包,那就需要先下载才能使用
(unless (package-installed-p 'use-package) ;;检测一下use-package是否安装了,没装就装一下呗
  (package-install 'use-package))

;; 到这里就可以开始使用 use-package 了
(require 'use-package)
;; 默认加载每一个use-package管理的包,等于是每一个use-package里加上:ensure
(setq use-package-always-ensure t)
</pre>
</div>
</div>
</div>

<div id="outline-container-orge8dff8e" class="outline-3">
<h3 id="orge8dff8e"><span class="section-number-3">2.4</span> 默认编码格式</h3>
<div class="outline-text-3" id="text-2-4">
<p>
避免windows上可能会出现的编码错误
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(set-default-coding-systems 'utf-8)
</pre>
</div>
</div>
</div>
<div id="outline-container-org61ae071" class="outline-3">
<h3 id="org61ae071"><span class="section-number-3">2.5</span> Server Mode</h3>
<div class="outline-text-3" id="text-2-5">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(server-start)
</pre>
</div>
</div>
</div>
<div id="outline-container-orgc52b369" class="outline-3">
<h3 id="orgc52b369"><span class="section-number-3">2.6</span> 查看启动过程耗时</h3>
<div class="outline-text-3" id="text-2-6">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package benchmark-init
  :ensure t
  :config
  ;; To disable collection of benchmark data after init is done.
  (add-hook 'after-init-hook 'benchmark-init/deactivate))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc27abdc" class="outline-3">
<h3 id="orgc27abdc"><span class="section-number-3">2.7</span> 基本的设置</h3>
<div class="outline-text-3" id="text-2-7">
</div>
<div id="outline-container-org3ac6023" class="outline-4">
<h4 id="org3ac6023"><span class="section-number-4">2.7.1</span> 取消初始界面的菜单,工具栏,滚动条等</h4>
<div class="outline-text-4" id="text-2-7-1">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(setq inhibit-startup-message t)
(scroll-bar-mode 0)              ;Disable visible scrollbar
(tool-bar-mode 0)                ;Disable the toolbar
(tooltip-mode 0)                 ;Disable tooltips
(set-fringe-mode 10)             ;Give some breathing room
(menu-bar-mode 0)                ;Disale the menu bar
;;set up the visible bell
(setq visible-bell t)
</pre>
</div>
</div>
</div>

<div id="outline-container-org8c0f133" class="outline-4">
<h4 id="org8c0f133"><span class="section-number-4">2.7.2</span> 优化滚动的表现</h4>
<div class="outline-text-4" id="text-2-7-2">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(setq mouse-wheel-scroll-amount '(1 ((shift) . 1))) ;; one line at a time
(setq mouse-wheel-progressive-speed nil) ;; don't accelerate scrolling
(setq mouse-wheel-follow-mouse 't) ;; scroll window under mouse
(setq scroll-step 1) ;; keyboard scroll one line at a time
(setq use-dialog-box nil) ;; Disable dialog boxes since they weren't working in Mac OSX
</pre>
</div>
</div>
</div>

<div id="outline-container-org8862a08" class="outline-4">
<h4 id="org8862a08"><span class="section-number-4">2.7.3</span> 窗口透明度和最大化</h4>
<div class="outline-text-4" id="text-2-7-3">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(set-frame-parameter (selected-frame) 'alpha '(90 . 90))
(add-to-list 'default-frame-alist '(alpha . (90 . 90)))
(set-frame-parameter (selected-frame) 'fullscreen 'maximized)
(add-to-list 'default-frame-alist '(fullscreen . maximized))
</pre>
</div>
</div>
</div>

<div id="outline-container-org7fb81a6" class="outline-4">
<h4 id="org7fb81a6"><span class="section-number-4">2.7.4</span> 字体设置</h4>
<div class="outline-text-4" id="text-2-7-4">
<div class="org-src-container">
<pre class="src src-emacs-lisp">;; 'han 的脚本类型对应CJK三种语言的字符 'latin 对应英文字符
;; (set-fontset-font "fontset-default" 'han "Xiaolai Mono SC")

(set-fontset-font "fontset-default" 'han "AR PL UKai CN")
;; Ubuntu Mono 字体能很好的和中文1:2等宽,:font 属性的使用和.Xresource 里字体的使用方式一样,只不过不能指定多个字体
(set-face-attribute 'default nil :font "Ubuntu Mono:pixelsize=20")
</pre>
</div>
</div>
</div>

<div id="outline-container-org7bf150d" class="outline-4">
<h4 id="org7bf150d"><span class="section-number-4">2.7.5</span> 状态栏设置</h4>
<div class="outline-text-4" id="text-2-7-5">
</div>
<div id="outline-container-orgf4aabd3" class="outline-5">
<h5 id="orgf4aabd3"><span class="section-number-5">2.7.5.1</span> Basic Customization</h5>
<div class="outline-text-5" id="text-2-7-5-1">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(setq display-time-format "%H:%M %p %Y-%m-%d %j"
      dispaly-time-default-load-average nil)
;;(setq display-time-format "%l:%M %p %b %y"
;;       dispaly-time-default-load-average nil)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb2a340b" class="outline-5">
<h5 id="orgb2a340b"><span class="section-number-5">2.7.5.2</span> Enable mode Diminishing</h5>
<div class="outline-text-5" id="text-2-7-5-2">
<p>
The diminish package hides pesky minor modes from the modelines.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package diminish)
</pre>
</div>
</div>
</div>

<div id="outline-container-org348d6e8" class="outline-5">
<h5 id="org348d6e8"><span class="section-number-5">2.7.5.3</span> Smart mode line</h5>
<div class="outline-text-5" id="text-2-7-5-3">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package smart-mode-line
  :disabled
  :if dw/is-termux
  :config
  (setq sml/no-confirm-load-theme t)
  (sml/setup)
  (sml/apply-theme 'respectful)  ; Respect the theme colors
  (setq sml/mode-width 'right
	sml/name-width 60)

  (setq-default mode-line-format
		`("%e"
		  ,(when dw/exwm-enabled
		     '(:eval (format "[%d] " exwm-workspace-current-index)))
		  mode-line-front-space
		  evil-mode-line-tag
		  mode-line-mule-info
		  mode-line-client
		  mode-line-modified
		  mode-line-remote
		  mode-line-frame-identification
		  mode-line-buffer-identification
		  sml/pos-id-separator
		  (vc-mode vc-mode)
		  " "
					;mode-line-position
		  sml/pre-modes-separator
		  mode-line-modes
		  " "
		  mode-line-misc-info))
  (setq rm-excluded-modes
	(mapconcat
	 'identity
					; These names must start with a space!
	 '(" GitGutter" " MRev" " company"
	   " Helm" " Undo-Tree" " Projectile.*" " Z" " Ind"
	   " Org-Agenda.*" " ElDoc" " SP/s" " cider.*")
	 "\\|")))
</pre>
</div>
</div>
</div>
<div id="outline-container-org18e88a0" class="outline-5">
<h5 id="org18e88a0"><span class="section-number-5">2.7.5.4</span> Doom modeline</h5>
<div class="outline-text-5" id="text-2-7-5-4">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package minions           ; 隐藏当前启用了哪些minor mode
  :hook (doom-modeline-mode . minions-mode))

(use-package all-the-icons)    ; modeline 正常展示需要许多图标字体支持,字体需要从github下载安装

(use-package doom-modeline

  :init
  (doom-modeline-mode 1)
  ;;:after eshell                ; 确保启动eshell后启动doom-modeline,尽管manjaro-i3上正使用的emacs不存在这个问题
  :custom-face
  (mode-line ((t (:height 0.85))))
  (mode-line-inactive ((t (:height 0.85))))
  :custom
  (doom-modeline-height 15)
  (doom-modeline-bar-width 6)
  (doom-modeline-lsp t)
  (doom-modeline-github nil)
  (doom-modeline-mu4e nil)
  (doom-modeline-irc nil)
  (doom-modeline-minor-modes t)
  (doom-modeline-persp-name nil)
  (doom-modeline-buffer-file-name-style 'truncate-except-project)
  (doom-modeline-major-mode-icon nil)
  )
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org55c1d05" class="outline-4">
<h4 id="org55c1d05"><span class="section-number-4">2.7.6</span> 更好的括号展示</h4>
<div class="outline-text-4" id="text-2-7-6">
<div class="org-src-container">
<pre class="src src-emacs-lisp">;; 按不同颜色显示成对括号
(use-package rainbow-delimiters
  :hook (prog-mode . rainbow-delimiters-mode))
;;高亮当前光标下的括号对应的括号
(use-package paren
  :config
  (set-face-attribute 'show-paren-match-expression nil :background "#FFFFFF")
  (show-paren-mode 1))

</pre>
</div>
</div>
</div>

<div id="outline-container-org45f9362" class="outline-4">
<h4 id="org45f9362"><span class="section-number-4">2.7.7</span> doom主题</h4>
<div class="outline-text-4" id="text-2-7-7">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package doom-themes
  :init
  (load-theme 'doom-palenight t)
  :config
  (doom-themes-visual-bell-config))
</pre>
</div>
</div>
</div>

<div id="outline-container-orga4abc3d" class="outline-4">
<h4 id="orga4abc3d"><span class="section-number-4">2.7.8</span> 行号设置</h4>
<div class="outline-text-4" id="text-2-7-8">
<div class="org-src-container">
<pre class="src src-emacs-lisp">
(column-number-mode)
;; Disable line numbers for some modes
(dolist (mode '(term-mode-hook
		shell-mode-hook
		eshell-mode-hook
		markdown-mode-hook
		org-mode-hook))
  (add-hook mode (lambda () (display-line-numbers-mode 0))))

(dolist (mode '(text-mode-hook
		prog-mode-hook
		conf-mode-hook))
  (add-hook mode (lambda () (display-line-numbers-mode 1))))

</pre>
</div>
</div>
</div>

<div id="outline-container-org7f8bd3e" class="outline-4">
<h4 id="org7f8bd3e"><span class="section-number-4">2.7.9</span> Workspace</h4>
<div class="outline-text-4" id="text-2-7-9">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package perspective
  :demand t
  :bind (("C-M-k" . persp-switch)
	 ("C-M-n" . persp-next)
	 ("C-x k" . persp-kill-buffer*))
  :custom
  (persp-initial-frame-name "Main")
  :config
  ;; Running `persp-mode' multiple times resets the perspective list...
  (unless (equal persp-mode t)
    (persp-mode)))
</pre>
</div>
</div>
</div>
<div id="outline-container-org207ffc2" class="outline-4">
<h4 id="org207ffc2"><span class="section-number-4">2.7.10</span> NOtifications</h4>
<div class="outline-text-4" id="text-2-7-10">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package alert
  :commands alert
  :config
  (setq alert-default-style 'notifications))
</pre>
</div>
</div>
</div>
<div id="outline-container-org02ae3d8" class="outline-4">
<h4 id="org02ae3d8"><span class="section-number-4">2.7.11</span> Auto-Saving changed files</h4>
<div class="outline-text-4" id="text-2-7-11">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package super-save
  :defer 1
  :diminish super-save-mode
  :config
  (super-save-mode +1)
  (setq super-save-auto-save-when-idle t) )
</pre>
</div>
</div>
</div>
<div id="outline-container-org33272af" class="outline-4">
<h4 id="org33272af"><span class="section-number-4">2.7.12</span> Auto-Reverting Changed Files</h4>
<div class="outline-text-4" id="text-2-7-12">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(setq global-auto-revert-non-file-buffers t)
(global-auto-revert-mode 1)
</pre>
</div>
</div>
</div>
<div id="outline-container-org12d82b2" class="outline-4">
<h4 id="org12d82b2"><span class="section-number-4">2.7.13</span> UI Toggles</h4>
<div class="outline-text-4" id="text-2-7-13">
<div class="org-src-container">
<pre class="src src-emacs-lisp">
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orgfa434d1" class="outline-3">
<h3 id="orgfa434d1"><span class="section-number-3">2.8</span> 按键设置</h3>
<div class="outline-text-3" id="text-2-8">
</div>
<div id="outline-container-org69abfe8" class="outline-4">
<h4 id="org69abfe8"><span class="section-number-4">2.8.1</span> 查看使用了哪些命令</h4>
<div class="outline-text-4" id="text-2-8-1">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package command-log-mode)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf5e8bc8" class="outline-4">
<h4 id="orgf5e8bc8"><span class="section-number-4">2.8.2</span> 取消ESC作为 <code>M-x</code> 的前缀按键,将其设置为和Vim类似的退出命令 <code>C-g</code></h4>
<div class="outline-text-4" id="text-2-8-2">
<div class="org-src-container">
<pre class="src src-emacs-lisp">;; Make ESC quit prompts
(global-set-key (kbd "&lt;escape&gt;") 'keyboard-escape-quit)

</pre>
</div>
</div>
</div>

<div id="outline-container-orgb043a8f" class="outline-4">
<h4 id="orgb043a8f"><span class="section-number-4">2.8.3</span> 取消 <code>C-u</code> 作为 <code>[count]</code> 的作用,因为要使用Vim的 <code>C-u</code> 做翻页</h4>
<div class="outline-text-4" id="text-2-8-3">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(global-set-key (kbd "C-M-u") 'universal-argument)
</pre>
</div>
</div>
</div>


<div id="outline-container-orgbcd830a" class="outline-4">
<h4 id="orgbcd830a"><span class="section-number-4">2.8.4</span> Evil</h4>
<div class="outline-text-4" id="text-2-8-4">
</div>
<div id="outline-container-org8b7ee9b" class="outline-5">
<h5 id="org8b7ee9b"><span class="section-number-5">2.8.4.1</span> 基本的Vim按键设置</h5>
<div class="outline-text-5" id="text-2-8-4-1">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package undo-tree
  :init
  (global-undo-tree-mode 1))

(use-package evil
  :init
  (setq evil-want-integration t)
  (setq evil-want-keybinding nil)
  (setq evil-want-C-u-scroll t)
  (setq evil-want-C-i-jump nil)
  (setq evil-undo-system 'undo-tree)

  :config
  (evil-mode 1)
  (define-key evil-insert-state-map (kbd "C-g") 'evil-normal-state)
  (define-key evil-insert-state-map (kbd "C-h") 'evil-delete-backward-char-and-join)

  ;; Use visual line motions even outside of visual-line-mode buffers
  ;;(evil-global-set-key 'motion "j" 'evil-next-visual-line)
  ;;(evil-global-set-key 'motion "k" 'evil-previous-visual-line)

  (evil-set-initial-state 'messages-buffer-mode 'normal)
  (evil-set-initial-state 'dashboard-mode 'normal)
  ;;(evil-set-initial-state 'treemacs-mode 'evil-normal-state)
  )

(use-package evil-collection
  :after evil
  :config
  (evil-collection-init))

</pre>
</div>
</div>
</div>


<div id="outline-container-org7729f44" class="outline-5">
<h5 id="org7729f44"><span class="section-number-5">2.8.4.2</span> 绑定"jk"退出插入模式</h5>
<div class="outline-text-5" id="text-2-8-4-2">
<div class="org-src-container">
<pre class="src src-emacs-lisp">
(use-package evil-escape
  :config
  (evil-escape-mode 1)
  (setq-default evil-escape-key-sequence "jk")
  (setq-default evil-escape-delay 0.5))

</pre>
</div>
</div>
</div>


<div id="outline-container-orgcf10de2" class="outline-5">
<h5 id="orgcf10de2"><span class="section-number-5">2.8.4.3</span> 绑定&lt;leader&gt;s重新加载配置文件</h5>
<div class="outline-text-5" id="text-2-8-4-3">
<div class="org-src-container">
<pre class="src src-emacs-lisp">;; (evil-set-leader 'normal (kbd "SPC"))
;; This buffer is for text that is not saved, and for Lisp evaluation.
;; To create a file, visit it with &lt;open&gt; and enter text in its buffer.

(defun reload-init-file ()
  (interactive)
  (load-file "~/.emacs.d/init.el")
  )
(evil-define-key 'normal 'global (kbd "&lt;leader&gt;s") 'reload-init-file)

</pre>
</div>
</div>
</div>
</div>
</div>
<div id="outline-container-org23ed809" class="outline-3">
<h3 id="org23ed809"><span class="section-number-3">2.9</span> 编辑设置</h3>
<div class="outline-text-3" id="text-2-9">
</div>
<div id="outline-container-org57d8ecd" class="outline-4">
<h4 id="org57d8ecd"><span class="section-number-4">2.9.1</span> Tab Width</h4>
<div class="outline-text-4" id="text-2-9-1">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(setq-default tab-width 2)
(setq-default evil-shift-width tab-width)
</pre>
</div>
</div>
</div>
<div id="outline-container-org6edd37e" class="outline-4">
<h4 id="org6edd37e"><span class="section-number-4">2.9.2</span> Use spaces instead of tabs for indnetation</h4>
<div class="outline-text-4" id="text-2-9-2">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(setq-default indent-tabs-mode nil)
</pre>
</div>
</div>
</div>
<div id="outline-container-org6dcb679" class="outline-4">
<h4 id="org6dcb679"><span class="section-number-4">2.9.3</span> Commenting Lines</h4>
<div class="outline-text-4" id="text-2-9-3">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package evil-nerd-commenter
  :bind ("M-c" . evilnc-comment-or-uncomment-lines))
</pre>
</div>
</div>
</div>
<div id="outline-container-orgdd7559d" class="outline-4">
<h4 id="orgdd7559d"><span class="section-number-4">2.9.4</span> Automatically Clean whitespace</h4>
<div class="outline-text-4" id="text-2-9-4">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package ws-butler
  :hook ((text-mode . ws-butler-mode)
	 (prog-mode . ws-butler-mode)))

</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orge95bc58" class="outline-3">
<h3 id="orge95bc58"><span class="section-number-3">2.10</span> 按键面板</h3>
<div class="outline-text-3" id="text-2-10">
<p>
<a href="https://github.com/justbur/emacs-which-key">which-key</a> 根据当前按下的按键展示可用(能)的快捷键组合和对应命令
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">
(use-package which-key
  :init (which-key-mode)
  :diminish which-key-mode
  :config
  (setq which-key-idle-delay 0.3)) ;设置多少延迟后调用which-key

</pre>
</div>
</div>
</div>

<div id="outline-container-orgf2a52ac" class="outline-3">
<h3 id="orgf2a52ac"><span class="section-number-3">2.11</span> 按键绑定</h3>
<div class="outline-text-3" id="text-2-11">
</div>
<div id="outline-container-org1fc8144" class="outline-4">
<h4 id="org1fc8144"><span class="section-number-4">2.11.1</span> <a href="https://github.com/noctuid/general.el">general.el</a> 用来管理快捷键绑定</h4>
<div class="outline-text-4" id="text-2-11-1">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package general
  :config
  (general-evil-setup t)
  (general-create-definer rune/leader-keys
			  :keymaps '(normal insert visual emacs)
			  :prefix "SPC"
			  :global-prefix "C-SPC")

  (rune/leader-keys
   "t"  '(:ignore t :which-key "toggles")
   "tt" '(counsel-load-theme :which-key "choose theme")
   "f"  '(:ignore t :which-key "file")
   "ft" '(treemacs :which-key "file tree")))

</pre>
</div>
</div>
</div>

<div id="outline-container-orgfa0c767" class="outline-4">
<h4 id="orgfa0c767"><span class="section-number-4">2.11.2</span> hydra 来绑定快捷键</h4>
<div class="outline-text-4" id="text-2-11-2">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package general
  :config
  (general-create-definer rune/leader-keys
			  :keymaps '(normal insert visual emacs)
			  :prefix "SPC"
			  :global-prefix "C-SPC"))


(defhydra hydra-files ()
  ;;(interactive)
  ;;("f" treemacs "file tree")

  ("t" treemacs :which-key "file tre")
  ("l" text-scale-increase "out"))
(defhydra hydra-leader ()
  ("f" hydra-files/body "files" :exit t))

(rune/leader-keys
 "f" '(hydra-files/body :which-key "files")
 )

;;(global-set-key (kbd "SPC") 'hydra-leader/body)
;;     (define-key evil-normal-state-map (kbd "SPC") 'hydra-leader/body)
(defhydra hydra-zoom ()
  "zoom"
  ("g" text-scale-increase "in")
  ("l" text-scale-decrease "out"))

(global-set-key (kbd "C-c") 'hydra-zoom/body)

</pre>
</div>
</div>
</div>

<div id="outline-container-org0aa3e47" class="outline-4">
<h4 id="org0aa3e47"><span class="section-number-4">2.11.3</span> Evil 快捷键绑定</h4>
<div class="outline-text-4" id="text-2-11-3">
<div class="org-src-container">
<pre class="src src-emacs-lisp">

;;(add-hook 'special-mode-hook 'evil-normal-state)
(define-key evil-normal-state-map (kbd "&lt;SPC&gt;ft") '("File tree" . treemacs))
(which-key-add-key-based-replacements
  "&lt;SPC&gt;f" "Files")
;;(define-key evil-normal-state-map (kbd "&lt;SPC&gt;ft")'("File tree" . treemacs))
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org2c7a72d" class="outline-3">
<h3 id="org2c7a72d"><span class="section-number-3">2.12</span> 文件浏览器</h3>
<div class="outline-text-3" id="text-2-12">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package treemacs
  :ensure t
  :defer t)
(use-package treemacs-evil
  :after (treemacs evil)
  :ensure t)
</pre>
</div>
</div>
</div>

<div id="outline-container-org5ea226f" class="outline-3">
<h3 id="org5ea226f"><span class="section-number-3">2.13</span> Minibuffer补全(Emacs 命令补全)</h3>
<div class="outline-text-3" id="text-2-13">
<p>
Emacs有两种类型的补全，一种是写代码或文本时的补全(text completion),另一种就是使用emacs 命令时的补全(Minibuffer completion).
<a href="https://github.com/kenmcmil/ivy">Ivy</a> 是一个使用minibuffer的补全机制,提供针对emacs命令的各种补全功能,<a href="https://github.com/abo-abo/swiper">swpier</a> 是基于Ivy的更好用的 <code>Isearch</code> 工具, <a href="https://github.com/abo-abo/swiper#counsel">counsel</a> 是基于Ivy的 <code>execute-extended-command</code> (M-x) 增强版本,用正则更方便的选择emacs命令
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package ivy
  :diminish
  :bind (("C-s" . swiper)
	 :map ivy-minibuffer-map
	 ("TAB" . ivy-alt-done)
	 ("C-l" . ivy-alt-done)
	 ("C-j" . ivy-next-line)
	 ("C-k" . ivy-previous-line)
	 :map ivy-switch-buffer-map
	 ("C-k" . ivy-previous-line)
	 ("C-l" . ivy-done)
	 ("C-d" . ivy-switch-buffer-kill)
	 :map ivy-reverse-i-search-map
	 ("C-k" . ivy-previous-line)
	 ("C-d" . ivy-reverse-i-search-kill))
  :config
  (ivy-mode 1))

(use-package ivy-rich
  :init
  (ivy-rich-mode 1))

(use-package counsel
  :bind (("M-x" . counsel-M-x)
	 ("C-x b" . counsel-ibuffer)
	 ("C-x C-f" . counsel-find-file)
	 :map minibuffer-local-map
	 ("C-r" . 'counsel-minibuffer-history)))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgafd9251" class="outline-3">
<h3 id="orgafd9251"><span class="section-number-3">2.14</span> Development</h3>
<div class="outline-text-3" id="text-2-14">
</div>
<div id="outline-container-orgda6de19" class="outline-4">
<h4 id="orgda6de19"><span class="section-number-4">2.14.1</span> Lsp-mode</h4>
<div class="outline-text-4" id="text-2-14-1">
</div>
<div id="outline-container-orgcd3a72f" class="outline-5">
<h5 id="orgcd3a72f"><span class="section-number-5">2.14.1.1</span> Lsp</h5>
<div class="outline-text-5" id="text-2-14-1-1">
<div class="org-src-container">
<pre class="src src-emacs-lisp">

(use-package lsp-mode
  :init
  ;; set prefix for lsp-command-keymap (few alternatives - "C-l", "C-c l")
  (setq lsp-keymap-prefix "C-c l")
  :hook (;; replace XXX-mode with concrete major-mode(e. g. python-mode)
	 (python-mode . lsp)
	 (json-mode .lsp)
	 (html-mode .lsp)
	 ;; if you want which-key integration
	 (lsp-mode . lsp-enable-which-key-integration))
  :commands lsp lsp-deferred)

;; optionally

;; company provide completion function
(use-package company)

(use-package flycheck
  ;; :init (global-flycheck-mode)
  )

(use-package lsp-ui :commands lsp-ui-mode)
;; if you are helm user
;;(use-package helm-lsp :commands helm-lsp-workspace-symbol)
;; if you are ivy user
(use-package lsp-ivy :commands lsp-ivy-workspace-symbol)
(use-package lsp-treemacs :commands lsp-treemacs-errors-list)

;; optionally if you want to use debugger
;; (use-package dap-mode
  ;; :defer)

;; (use-package dap-LANGUAGE) to load the dap adapter for your language
;; (require 'dap-python)

;; optional if you want which-key integration
;;(use-package which-key
;;:config
;;(which-key-mode))

</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package lsp-mode
  :init
  ;; set prefix for lsp-command-keymap (few alternatives - "C-l", "C-c l")
  (setq lsp-keymap-prefix "C-c l")
  :hook (;; replace XXX-mode with concrete major-mode(e. g. python-mode)
	 (python-mode . lsp-defer)
	 ;; if you want which-key integration
	 (lsp-mode . lsp-enable-which-key-integration))
  :commands lsp)

;; optionally
(use-package lsp-ui :commands lsp-ui-mode)
;; if you are helm user
;;(use-package helm-lsp :commands helm-lsp-workspace-symbol)
;; if you are ivy user
(use-package lsp-ivy :commands lsp-ivy-workspace-symbol)
(use-package lsp-treemacs :commands lsp-treemacs-errors-list)

;; optionally if you want to use debugger
(use-package dap-mode)
;; (use-package dap-LANGUAGE) to load the dap adapter for your language

;; optional if you want which-key integration
;;(use-package which-key
;;:config
;;(which-key-mode))
</pre>
</div>
</div>
</div>

<div id="outline-container-org84e7a6d" class="outline-5">
<h5 id="org84e7a6d"><span class="section-number-5">2.14.1.2</span> Lsp for python</h5>
<div class="outline-text-5" id="text-2-14-1-2">
</div>
<ol class="org-ol">
<li><a id="org07d8ae0"></a>Pylsp<br />
<div class="outline-text-6" id="text-2-14-1-2-1">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(setq lsp-pylsp-plugins-yapf-enabled t)
(setq lsp-pylsp-plugins-jedi-use-pyenv-environment t)
</pre>
</div>
</div>
</li>
<li><a id="orga945cae"></a>Pyright<br />
<div class="outline-text-6" id="text-2-14-1-2-2">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package lsp-pyright
  :ensure t
  :hook (python-mode . (lambda ()
			 (require 'lsp-pyright)
			 (lsp))))  ; or lsp-deferred
;; (use-package company)
</pre>
</div>
</div>
</li>
<li><a id="orgcceea4b"></a>Mspyls<br />
<div class="outline-text-6" id="text-2-14-1-2-3">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package lsp-python-ms
  :ensure t
  :init (setq lsp-python-ms-auto-install-server t)
  :hook (python-mode . (lambda ()
			 (require 'lsp-python-ms)
			 (lsp))))  ;lsp or lsp-deferred

</pre>
</div>
</div>
</li>
<li><a id="org13ba555"></a>jedi<br />
<div class="outline-text-6" id="text-2-14-1-2-4">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package lsp-jedi
  :ensure t
  :config
  (with-eval-after-load "lsp-mode"
    (add-to-list 'lsp-disabled-clients 'pyls)
    (add-to-list 'lsp-disabled-clients 'mspyls)
    (add-to-list 'lsp-disabled-clients 'pylsp)
    ;; (add-to-list 'lsp-enabled-clients 'jedi)
    ))
</pre>
</div>
</div>
</li>
</ol>
</div>

<div id="outline-container-org2ab437b" class="outline-5">
<h5 id="org2ab437b"><span class="section-number-5">2.14.1.3</span> LSP for Html</h5>
<div class="outline-text-5" id="text-2-14-1-3">
<div class="org-src-container">
<pre class="src src-emacs-lisp">
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgff5a092" class="outline-4">
<h4 id="orgff5a092"><span class="section-number-4">2.14.2</span> Python<sub>settings</sub></h4>
<div class="outline-text-4" id="text-2-14-2">
<div class="org-src-container">
<pre class="src src-emacs-lisp">;; 设置缩进为4
(setq
 python-indent-offset 4
 python-indent-guess-indent-offset nil)
(add-hook 'python-mode-hook (electric-pair-mode 1))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgaf6bed4" class="outline-4">
<h4 id="orgaf6bed4"><span class="section-number-4">2.14.3</span> Format python code</h4>
<div class="outline-text-4" id="text-2-14-3">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package yapfify
  :config
  (add-hook 'python-mode-hook 'yapf-mode))
</pre>
</div>
</div>
</div>

<div id="outline-container-org7a0f70f" class="outline-4">
<h4 id="org7a0f70f"><span class="section-number-4">2.14.4</span> Format All</h4>
<div class="outline-text-4" id="text-2-14-4">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package format-all)
</pre>
</div>
</div>
</div>
<div id="outline-container-org55b4de7" class="outline-4">
<h4 id="org55b4de7"><span class="section-number-4">2.14.5</span> Elpy &#x2013; IDE for py</h4>
<div class="outline-text-4" id="text-2-14-5">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package elpy
  :ensure t
  :init
  (elpy-enable))
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org4551ed8" class="outline-3">
<h3 id="org4551ed8"><span class="section-number-3">2.15</span> Orgmode</h3>
<div class="outline-text-3" id="text-2-15">
</div>
<div id="outline-container-orgdf0b22e" class="outline-4">
<h4 id="orgdf0b22e"><span class="section-number-4">2.15.1</span> CodeBlock模版</h4>
<div class="outline-text-4" id="text-2-15-1">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(require 'org-tempo)
(add-to-list 'org-structure-template-alist '("py" . "src python :results output"))
(add-to-list 'org-structure-template-alist '("el" . "src emacs-lisp"))
(add-to-list 'org-structure-template-alist '("ipy" . "src ipython :session"))
(add-to-list 'org-structure-template-alist '("bash" . "src bash"))
</pre>
</div>
</div>
</div>

<div id="outline-container-org1700710" class="outline-4">
<h4 id="org1700710"><span class="section-number-4">2.15.2</span> outline</h4>
<div class="outline-text-4" id="text-2-15-2">
<p>
配置headline的项目符号(bullet point)
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package org-superstar
  :after org
  :hook (org-mode . org-superstar-mode)
  :config
  (setq org-superstar-leading-bullet  ?\s)

  :custom
  ;;(org-superstar-remove-leading-stars t)

  (org-superstar-headline-bullets-list '("◉" "○" "●" "○" "●" "○" "●"))
  ;; (org-superstar-headline-bullets-list '("☯" "☰" "☱" "☲" "☳" "☴" "☵" "☶" "☷"))
  )


</pre>
</div>

<p>
配置折叠后的省略号
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(setq org-ellipsis " ▼ ")
</pre>
</div>
</div>
</div>

<div id="outline-container-org8edd34e" class="outline-4">
<h4 id="org8edd34e"><span class="section-number-4">2.15.3</span> Org-roam</h4>
<div class="outline-text-4" id="text-2-15-3">
<div class="org-src-container">
<pre class="src src-emacs-lisp">      ;;(use-package org-roam
	;;:ensure t
	;;:init
	;;(setq org-roam-v2-ack t)
	;;:custom
	;;(org-roam-directory "~/MyLife/org-roam")
	;;:bind (("C-c n l" . org-roam-buffer-toggle)
	       ;;("C-c n f" . org-roam-node-find)
	       ;;("C-c n i" . org-roam-node-insert))
	;;:config
	;;(org-roam-setup))
(use-package org-roam
  :ensure t
  :init
  (setq org-roam-v2-ack t)
  :custom
  (org-roam-directory "~/MyLife/org-roam")
  (org-roam-completion-everywhere t)
  (org-roam-dailies-capture-templates
    '(("d" "default" entry "* %&lt;%I:%M %p&gt;: %?"
       :if-new (file+head "%&lt;%Y-%m-%d&gt;.org" "#+title: %&lt;%Y-%m-%d&gt;\n"))))
  :bind (("C-c n l" . org-roam-buffer-toggle)
	 ("C-c n f" . org-roam-node-find)
	 ("C-c n i" . org-roam-node-insert)
	 :map org-mode-map
	 ("C-M-i" . completion-at-point)
	 :map org-roam-dailies-map
	 ("Y" . org-roam-dailies-capture-yesterday)
	 ("T" . org-roam-dailies-capture-tomorrow))
  :bind-keymap
  ("C-c n d" . org-roam-dailies-map)
  :config
  (require 'org-roam-dailies) ;; Ensure the keymap is available
  (org-roam-db-autosync-mode))

</pre>
</div>
</div>
</div>
<div id="outline-container-org13d8c2d" class="outline-4">
<h4 id="org13d8c2d"><span class="section-number-4">2.15.4</span> Org-mode</h4>
<div class="outline-text-4" id="text-2-15-4">
</div>
<div id="outline-container-org7169e03" class="outline-5">
<h5 id="org7169e03"><span class="section-number-5">2.15.4.1</span> Init set up</h5>
<div class="outline-text-5" id="text-2-15-4-1">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(setq org-directory "~/MyLife/org")
(global-set-key (kbd "C-c l") 'org-store-link)
(global-set-key (kbd "C-c a") 'org-agenda)
(global-set-key (kbd "C-c c") 'org-capture)
</pre>
</div>
</div>
</div>

<div id="outline-container-org616d23c" class="outline-5">
<h5 id="org616d23c"><span class="section-number-5">2.15.4.2</span> Hide emphasis markers</h5>
<div class="outline-text-5" id="text-2-15-4-2">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(setq org-hide-emphasis-markers t)
</pre>
</div>
</div>
</div>

<div id="outline-container-org7b2f732" class="outline-5">
<h5 id="org7b2f732"><span class="section-number-5">2.15.4.3</span> org-drill</h5>
<div class="outline-text-5" id="text-2-15-4-3">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package org-drill)
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org9fab3a3" class="outline-4">
<h4 id="org9fab3a3"><span class="section-number-4">2.15.5</span> Pomodoro</h4>
<div class="outline-text-4" id="text-2-15-5">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package org-pomodoro
  :config
  (setq org-pomodoro-start-sound (expand-file-name "~/MyLife/Emacs/sounds/meditation_bell.wav"))
  (setq org-pomodoro-short-break-sound (expand-file-name "~/MyLife/Emacs/sounds/meditation_bell.wav"))
  (setq org-pomodoro-long-break-sound (expand-file-name "~/MyLife/Emacs/sounds/meditation_bell.wav"))
  (setq org-pomodoro-finished-sound (expand-file-name "~/MyLife/Emacs/sounds/meditation_bell.wav")))
;; org-pomodoro use sound-wav pavkage to play the sound
(use-package sound-wav)

</pre>
</div>
</div>
</div>

<div id="outline-container-orge6c5772" class="outline-4">
<h4 id="orge6c5772"><span class="section-number-4">2.15.6</span> tracking habits</h4>
<div class="outline-text-4" id="text-2-15-6">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-to-list 'org-modules 'org-habit)
</pre>
</div>
</div>
</div>

<div id="outline-container-org7bd442f" class="outline-4">
<h4 id="org7bd442f"><span class="section-number-4">2.15.7</span> Auto insert newline</h4>
<div class="outline-text-4" id="text-2-15-7">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-hook 'org-mode-hook '(lambda () (setq fill-column 80)))
(add-hook 'org-mode-hook 'auto-fill-mode)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgc12f545" class="outline-4">
<h4 id="orgc12f545"><span class="section-number-4">2.15.8</span> org-capture-template</h4>
<div class="outline-text-4" id="text-2-15-8">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(setq org-capture-templates
'(
  ("t" "Tasks")
  ("tt" "TODO" entry (file+headline "GTD.org" "Tasks") "* TODO %?\n %i\n %a")
  ("T" "Thoughts")
  ("TT" "Thought  To be done" entry (file+headline "GTD.org" "未实现的想法") "* %?\n" :jump-to-captured t)
  ("d" "Drills")
  ("dE" "Drills for English" entry (file+headline "GTD.org" "English")  "* %? :drill:")
  ("dP" "Drills for Python" entry (file+headline "~/MyLife/Python/Learning_Python/README.org" "练习题") "* %? :drill:\n** Answer\n** Note\n" :jump-to-captured t)
  )
)
</pre>
</div>
</div>
</div>

<div id="outline-container-org4b7ab19" class="outline-4">
<h4 id="org4b7ab19"><span class="section-number-4">2.15.9</span> Encrypt</h4>
<div class="outline-text-4" id="text-2-15-9">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(require 'org-crypt)
(org-crypt-use-before-save-magic)
(setq org-tags-exclude-from-inheritance (quote ("crypt")))
;; GPG key to use for encryption
;; Either the Key ID or set to nil to use symmetric encryption.
(setq org-crypt-key "kamisama")
</pre>
</div>
</div>
</div>
</div>



<div id="outline-container-orgea6d7bf" class="outline-3">
<h3 id="orgea6d7bf"><span class="section-number-3">2.16</span> Productivity</h3>
<div class="outline-text-3" id="text-2-16">
<p>
一些能提高编辑效率的配置
</p>
</div>

<div id="outline-container-orgbc5748b" class="outline-4">
<h4 id="orgbc5748b"><span class="section-number-4">2.16.1</span> 括号补全</h4>
<div class="outline-text-4" id="text-2-16-1">
<p>
自动补全各种括号和引号
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">
;;(electric-pair-mode 1)

(use-package smartparens
  :hook
  (prog-mode . smartparens-mode)
  (org-mode . smartparens-mode ))
</pre>
</div>
</div>
</div>

<div id="outline-container-org7872172" class="outline-4">
<h4 id="org7872172"><span class="section-number-4">2.16.2</span> Snippet</h4>
<div class="outline-text-4" id="text-2-16-2">
<div class="org-src-container">
<pre class="src src-emacs-lisp">;; snippet engine
(use-package yasnippet
  :defer
  :hook (prog-mode . yas-minor-mode)
  :config
  (yas-reload-all))
;; snippets
;; (use-package yasnippet-snippets
  ;; :hook (prog-mode .))
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org4fa9757" class="outline-3">
<h3 id="org4fa9757"><span class="section-number-3">2.17</span> Ebook</h3>
<div class="outline-text-3" id="text-2-17">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package nov
  :config
  (add-to-list 'auto-mode-alist '("\\.epub\\'" . nov-mode)))

</pre>
</div>
</div>
</div>

<div id="outline-container-orga822144" class="outline-3">
<h3 id="orga822144"><span class="section-number-3">2.18</span> Magit</h3>
<div class="outline-text-3" id="text-2-18">
<div class="org-src-container">
<pre class="src src-emacs-lisp">;; (use-package magit)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgd4d6cb1" class="outline-3">
<h3 id="orgd4d6cb1"><span class="section-number-3">2.19</span> Save Emacs Sessions</h3>
<div class="outline-text-3" id="text-2-19">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(desktop-save-mode 1)
</pre>
</div>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="author">Author: kamisama</p>
<p class="date">Created: 2022-01-03 Mon 02:14</p>
<p class="validation"><a href="https://validator.w3.org/check?uri=referer">Validate</a></p>
</div>
</body>
</html>
