<!doctype html><html lang=zh-hans><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta http-equiv=x-ua-compatible content="ie=edge"><title>Linux 入门到进阶 | kamisama's Blog</title><meta name=author content="guole"><meta name=description content="linux入门到进阶 教程视频使用的是CentOS 各系统软件包路径有所不同，不要照搬 目录操作 创建和删除 创建目录 1 2 3 4 5 6 7 mkdir ./a mkdir a 当前目录下"><meta name=generator content="Hugo 0.83.1"><link rel=canonical href=https://queenofbugs.github.io/posts/linux%E5%85%A5%E9%97%A8%E5%88%B0%E8%BF%9B%E9%98%B6/><meta property="og:title" content="Linux 入门到进阶"><meta property="og:description" content="linux入门到进阶 教程视频使用的是CentOS 各系统软件包路径有所不同，不要照搬 目录操作 创建和删除 创建目录 1 2 3 4 5 6 7 mkdir ./a mkdir a 当前目录下"><meta property="og:type" content="article"><meta property="og:url" content="https://queenofbugs.github.io/posts/linux%E5%85%A5%E9%97%A8%E5%88%B0%E8%BF%9B%E9%98%B6/"><meta property="og:image" content="https://queenofbugs.github.io/me/background.jpg"><meta property="article:section" content="posts"><meta property="article:published_time" content="2021-06-02T00:00:00+00:00"><meta property="article:modified_time" content="2021-06-02T00:00:00+00:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://queenofbugs.github.io/me/background.jpg"><meta name=twitter:title content="Linux 入门到进阶"><meta name=twitter:description content="linux入门到进阶 教程视频使用的是CentOS 各系统软件包路径有所不同，不要照搬 目录操作 创建和删除 创建目录 1 2 3 4 5 6 7 mkdir ./a mkdir a 当前目录下"><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.css><link rel=stylesheet href=/css/icomoon.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/overlayscrollbars@1.13.1/css/OverlayScrollbars.min.css><link rel=stylesheet href=https://cdn.jsdelivr.net/npm/github-markdown-css@4.0.0/github-markdown.min.css><link rel=stylesheet href=/css/site.css><style>.ui.header a:not(.ui.button):hover{text-decoration:underline}a:not(.ui.button){color:#2e8b57!important}.inverted a:not(.ui.button){color:#8fbc8f!important}body.default{background-color:#fff;background-image:url(/me/background.jpg)}body.dark{background-image:url(/me/background.jpg)}</style><link rel=stylesheet href=/css/custom.css></head><body class=default><nav class="ui secondary menu dream-menu dream-nav"><div class=item><i class="large link bullseye icon dream-flip-toggle" title=翻转！></i></div><div class=item><i class="large link home icon" title=首页 onclick="window.location.href='https://queenofbugs.github.io/'"></i></div><div class=item><i class="large link icon theme-switch" onclick=themeSwitch()></i></div><div class=item><i class="large link search icon" onclick=toggleSearch()></i></div></nav><div class=flip-container><div class=flipper><section class=front><div class=dream-max-width><div class="ui relaxed centered grid dream-grid dream-grid-single"><aside class="sixteen wide mobile sixteen wide tablet three wide computer column dream-single-aside"><div class="ui segment toc"><nav id=TableOfContents><ul><li><a href=#目录操作>目录操作</a><ul><li><a href=#创建和删除>创建和删除</a></li><li><a href=#复制和移动>复制和移动</a></li><li><a href=#查看文本>查看文本</a></li></ul></li><li><a href=#打包与压缩解压缩>打包与压缩解压缩</a></li><li><a href=#vim>vim</a><ul><li><a href=#vim使用>vim使用</a></li><li><a href=#vim-配置>vim 配置</a></li></ul></li><li><a href=#用户和用户组>用户和用户组</a><ul><li><a href=#用户>用户</a></li><li><a href=#用户组>用户组</a></li><li><a href=#切换用户>切换用户</a></li><li><a href=#用户和用户组配置文件>用户和用户组配置文件</a></li></ul></li><li><a href=#权限管理>权限管理</a><ul><li><a href=#文件与目录的权限表示>文件与目录的权限表示</a></li></ul></li><li><a href=#网络管理>网络管理</a></li><li><a href=#软件安装>软件安装</a><ul><li><a href=#软件包管理器安装>软件包管理器安装</a></li><li><a href=#源代码安装>源代码安装</a></li></ul></li><li><a href=#升级内核>升级内核</a></li><li><a href=#grub配置>GRUB配置</a></li><li><a href=#进程管理>进程管理</a><ul><li><a href=#进程的概念>进程的概念</a></li><li><a href=#进程控制>进程控制</a></li><li><a href=#进程间通信>进程间通信</a></li><li><a href=#守护进程和系统日志>守护进程和系统日志</a></li><li><a href=#服务管理工具systemctl>服务管理工具systemctl</a></li><li><a href=#selinux简介>SELinux简介</a></li></ul></li><li><a href=#内存与磁盘管理>内存与磁盘管理</a><ul><li><a href=#内存和磁盘使用率查看>内存和磁盘使用率查看</a></li><li><a href=#ext4文件系统>ext4文件系统</a></li><li><a href=#磁盘配额的使用>磁盘配额的使用</a></li><li><a href=#磁盘的分区和挂载>磁盘的分区和挂载</a></li><li><a href=#交换分区虚拟内存的查看与创建>交换分区(虚拟内存)的查看与创建</a></li><li><a href=#软件raid的使用>软件RAID的使用</a></li><li><a href=#逻辑卷管理>逻辑卷管理</a></li><li><a href=#系统综合状态查看>系统综合状态查看</a></li><li><a href=#shell脚本>shell脚本</a></li></ul></li></ul></nav></div></aside><div class="sixteen wide mobile sixteen wide tablet ten wide computer column markdown-body dream-single" id=dream-save-post-as-img><section class="ui top attached segment"><header><h1 class="ui large header">Linux 入门到进阶<span class="sub header">
<span class=left>@
guole
|
<span data-format=luxon>2021-06-02T00:00:00Z</span>
| 30 分钟阅读
| 更新于
<span data-format=luxon>2021-06-02T00:00:00Z</span></span>
<span class=dream-share><a href=# class=save-as-image title=保存为图片 onclick=savePostAsImg()><i class="save icon"></i></a>
<a href="https://twitter.com/intent/tweet?text=Linux%20%e5%85%a5%e9%97%a8%e5%88%b0%e8%bf%9b%e9%98%b6&url=https%3a%2f%2fqueenofbugs.github.io%2fposts%2flinux%25E5%2585%25A5%25E9%2597%25A8%25E5%2588%25B0%25E8%25BF%259B%25E9%2598%25B6%2f" title=Twitter><i class="twitter icon"></i></a>
<a href="https://facebook.com/sharer/sharer.php?u=https%3a%2f%2fqueenofbugs.github.io%2fposts%2flinux%25E5%2585%25A5%25E9%2597%25A8%25E5%2588%25B0%25E8%25BF%259B%25E9%2598%25B6%2f" title=Facebook><i class="facebook icon"></i></a></span></span></h1></header><article class=main><h1 id=linux入门到进阶>linux入门到进阶</h1><blockquote><p>教程视频使用的是CentOS 各系统软件包路径有所不同，不要照搬</p></blockquote><h2 id=目录操作>目录操作</h2><h3 id=创建和删除>创建和删除</h3><ul><li><p>创建目录</p><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>mkdir ./a
mkdir a
当前目录下创建目录(文件夹)a
mkdir /a
根目录下创建目录a
mkdir -p a/b/c/d/
创建多级目录
</code></pre></td></tr></table></div></div></li><li><p>删除目录</p><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>rmdir a
只能删除非空目录

rm -r a
删除目录a(不管是否非空)课程演示会有提示是否删除子目录，但实际操作manjaro上并没有提示，直接删除了
rm -r -f a
rm -rf a
删除目录a并不会显示提示信息
-r，-R --recursive
-f,--force
</code></pre></td></tr></table></div></div></li></ul><h3 id=复制和移动>复制和移动</h3><ul><li>复制<div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">8
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">9
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>cp -copy files and directories
cp [options] SOURCE DEST
cp a.txt /
将a.txt复制到根目录
常用选项
-r,-R --复制源目录下的所有文件
-v --显示复制过程
-p --保留文件时间戳和权限
-a --保留文件权限，所有者，时间等全部复制
</code></pre></td></tr></table></div></div></li><li>移动&改名<div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>mv -move(rename) files
mv [options] SOURCE DEST
mv a.txt /b.txt
将a.txt 移动到根目录且重命名为b.txt

</code></pre></td></tr></table></div></div></li></ul><h3 id=查看文本>查看文本</h3><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>cat filename--查看文件所有内容
head -number filename 查看文件头部内容(前number行)
tail -number filename 查看文件尾部内容(后number行)
  tail 常用参数 -f 文件内容更新后，显示信息同步更新，可以实时观察日志文件
wc 统计文件内容信息
less
more 也是查看文件的命令
</code></pre></td></tr></table></div></div><h2 id=打包与压缩解压缩>打包与压缩解压缩</h2><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>tar cf etc_backup.tar /etc
打包 /etc目录到 当前目录的etc_backup.tar
ls -lh etc_backup.tar
查看文件的详细信息 -h显示文件大小
打包并压缩--tar集成了压缩命令
tar cjf etc.tar.bz2 /etc
tar xf etc_backup.tar -C /home/
tar xzf etc.tar.gz
tar xjf etc.tar.bz2
参数
c 打包
x 解包
f 指定操作类型为文件
-C,---directory=DIR
.tar.bz2 缩写.tbz2
.tar.gz 缩写 .tgz
</code></pre></td></tr></table></div></div><h2 id=vim>vim</h2><h3 id=vim使用>vim使用</h3><p>打开vim:</p><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>vim
</code></pre></td></tr></table></div></div><p>最好的vim入门教程就是自带的vimtutor</p><p>四种模式：Normal、Insert、Visual、Command</p><p>打开vim是正常模式，切换模式都是在正常模式下的，按下<kbd>ESC</kbd>返回到正常模式</p><p>在正常模式下:</p><ul><li>按下A,a,O,o,I,i,进入插入模式</li><li>按:进入命令行模式</li><li>按<kbd>v</kbd>,<kbd>V</kbd>,<kbd>Ctrl</kbd>+<kbd>v</kbd>进入可视模式</li></ul><p>正常模式</p><p>d 剪切</p><p>y 复制yank</p><p>u 撤销，多次按u撤销多次</p><p>U 撤销当前行到最后一次保存</p><p>CTRL+R 重做撤销的指令(取消u和U的撤销)</p><p>x 删除指定字符</p><p>r 替换指定字符</p><p>num G 移动到第num行</p><p>G 移动光标到最后一行</p><p>gg 移动到第一行</p><p>$ 移动到当前行的开头</p><p><strong>命令行模式</strong></p><p>w 保存命令 w ~/a.txt保存当前文件到a.txt</p><p>! command 可执行外部命令(cat cd 等)</p><p>/text 向下查找text,按n查找下一个，N反向查找
?text 向上查找text,n查找下一个，N反向查找</p><p>s/old/new</p><p>%s/old/new/g 全局替换</p><p>%s/old/new/gc 全局替换并确认每一次替换</p><p>2,5s/old/new/g 替换第二行和第五行之间的文本</p><p><strong>可视模式</strong></p><p>v 字符可使模式</p><p>V 行可视模式</p><p><kbd>Ctrl</kbd>+<kbd>v</kbd> 块可视模式</p><p>按I插入，两次<kbd>ESC</kbd>批量插入，d删除</p><h3 id=vim-配置>vim 配置</h3><p><strong>.vimrc里的等号不要分开写 a=b是对的，a = b就可能是错的</strong></p><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">24
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>#高亮查找
set hlsearch
set nohlsearch
#行号
set nu
set nonu


## 交换文件
## vim -r 查看当前目录下所有swp文件
## vim -r filename 来恢复文件，然后再用rm 删除swp文件

#不产生交换文件
#set noswapfile
#设置23000毫秒或者400字符保存一次，默认是4000ms(4s)或200字符保存一次，若updatecount=0,那么将不会保存交换文件
set updatetime=23000
set updatecount=400
#交换文件保存的目录
#set directory=/tmp
#设置交换文件保存到当前目录
set directory=./
#设置保存目录为一个目录列表，文件优先被存放在第一个目录
#set directory=./,/tmp
#set directory = .  vim表示不能识别(.)为当前目录，=.可以识别
</code></pre></td></tr></table></div></div><h2 id=用户和用户组>用户和用户组</h2><h3 id=用户>用户</h3><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">24
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">25
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">26
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>root 超级管理员用户。其他就是普通用户
useradd --新建用户
userdel --删除用户
passwd --修改用户密码
usermod --修改用户属性
chage --修改用户属性

useradd user1
id user1  查看uid，uid为0是root用户
创建了 /home/user1目录
/etc/passwd 记录user1的信息
/etc/shadow 记录user1密码相关信息
未指定用户组时，创建一个和用户名完全相同的用户组
只有管理员(root)才有权限创建用户

userdel user1 删除user1,保留/home/user1
userdel -r user1 删除user1,一并删除家目录/home/user1

usermod [option] username
options:
-d DIR  修改用户的家目录
usermod -d /home/u1 user1 将user1的家目录变成/home/u1

chage -更改用户/用户密码的过期时间


</code></pre></td></tr></table></div></div><h3 id=用户组>用户组</h3><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">8
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>groupadd  GROUPNAME
groupdel  GROUPNAME

groupadd group1 新建用户组
usermod -g group1 user1 将user1添加进group1

useradd -g group1 user2 新建user2并添加到group1

</code></pre></td></tr></table></div></div><h3 id=切换用户>切换用户</h3><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">24
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">25
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">26
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>shell 方式切换用户

su - user1  切换身份为user1的同时切换到user1的家目录
su user1  切换身份为user1不切换目录

以其他用户身份执行命令
sudo  command
visudo  设置需要使用sudo的用户组

以shutdown 命令为例子

用visudo命令编辑/etc/suders文件

用例
%wheel    ALL=(ALL) ALL
用户组    ALL 那些终端可以访问(本地/远程) = (ALL)可以执行那些指令 是否需要密码
    Localhost=()终端可以访问
授予user1用户shutdown -c的权限
user3   ALL=/usr/bin/shutdown -c
which shutdown可以查看shutdown在哪里

修改后user3可以使用sudo执行 shutdown -c命令
user3要有密码：passwd user3

sudo shutdown -c

</code></pre></td></tr></table></div></div><h3 id=用户和用户组配置文件>用户和用户组配置文件</h3><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">24
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">25
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">26
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">27
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">28
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">29
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">30
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">31
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">32
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">33
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">34
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">35
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">36
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>/etc/passwd:

root❌0:0::/root:/bin/bash
nobody❌65534:65534:Nobody:/:/usr/bin/nologin
dbus❌81:81:System Message Bus:/:/usr/bin/nologin
bin❌1:1::/:/usr/bin/nologin
daemon❌2:2::/:/usr/bin/nologin
mail❌8:12::/var/spool/mail:/usr/bin/nologin
ftp❌14:11::/srv/ftp:/usr/bin/nologin
http❌33:33::/srv/http:/usr/bin/nologin
systemd-journal-remote❌982:982:systemd Journal Remote:/:/usr/bin/nologin
systemd-network❌981:981:systemd Network Management:/:/usr/bin/nologin
systemd-resolve❌980:980:systemd Resolver:/:/usr/bin/nologin
systemd-timesync❌979:979:systemd Time Synchronization:/:/usr/bin/nologin
systemd-coredump❌978:978:systemd Core Dumper:/:/usr/bin/nologin
uuidd❌68:68::/:/usr/bin/nologin
dnsmasq❌977:977:dnsmasq daemon:/:/usr/bin/nologin
rpc❌32:32:Rpcbind Daemon:/var/lib/rpcbind:/usr/bin/nologin
avahi❌976:976:Avahi mDNS/DNS-SD daemon:/:/usr/bin/nologin
colord❌975:975:Color management daemon:/var/lib/colord:/usr/bin/nologin
git❌974:974:git daemon user:/:/usr/bin/git-shell
lightdm❌973:973:Light Display Manager:/var/lib/lightdm:/usr/bin/nologin
nm-openconnect❌972:972:NetworkManager OpenConnect:/:/usr/bin/nologin
nm-openvpn❌971:971:NetworkManager OpenVPN:/:/usr/bin/nologin
ntp❌87:87:Network Time Protocol:/var/lib/ntp:/bin/false
polkitd❌102:102:PolicyKit daemon:/:/usr/bin/nologin
usbmux❌140:140:usbmux user:/:/usr/bin/nologin
kamisama❌1000:1000:kamisama:/home/kamisama:/bin/zsh
dhcpcd❌970:970:dhcpcd privilege separation:/var/lib/dhcpcd:/usr/bin/nologin
mysql❌969:969:MariaDB:/var/lib/mysql:/usr/bin/nologin
rtkit❌133:133:RealtimeKit:/proc:/usr/bin/nologin
cups❌209:209:cups helper user:/:/usr/bin/nologin
xmms2❌968:968::/var/lib/xmms2:/usr/bin/nologin
user1❌1001:1001::/home/user1:/bin/bash
user2❌1002:1002::/home/user2:/bin/bash

</code></pre></td></tr></table></div></div><p>user1 &ndash;用户名</p><p>x &ndash;是否需要密码</p><p>1001 &ndash;uid</p><p>1001 &ndash;gid</p><p>第五个字段是注释</p><p>第六个是根目录</p><p>第七个是用户使用的命令解释器(bologin不能登录终端)</p><p>可以手写这个文件新建用户</p><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">24
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">25
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">26
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">27
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">28
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">29
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">30
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">31
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">32
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">33
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">34
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">35
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>/etc/shadow
root:$6$NepyQ6dyd2spEJzl$0rjYlOgixR.Lsgc2ynQ.XrqoHMyKrSjQHEH35Kv8Ncov1iPrlN7CXc8KTQoSpufDU.hMmnfYREQk0mrVjR3wp0:18392::::::
nobody:!!:18335::::::
dbus:!!:18335::::::
bin:!!:18335::::::
daemon:!!:18335::::::
mail:!!:18335::::::
ftp:!!:18335::::::
http:!!:18335::::::
systemd-journal-remote:!!:18335::::::
systemd-network:!!:18335::::::
systemd-resolve:!!:18335::::::
systemd-timesync:!!:18335::::::
systemd-coredump:!!:18335::::::
uuidd:!!:18335::::::
dnsmasq:!!:18335::::::
rpc:!!:18335::::::
avahi:!!:18335::::::
colord:!!:18335::::::
git:!!:18335::::::
lightdm:!!:18335::::::
nm-openconnect:!!:18335::::::
nm-openvpn:!!:18335::::::
ntp:!!:18335::::::
polkitd:!!:18335::::::
usbmux:!!:18335::::::
kamisama:$6$rs.yzOpJ2aJJ58.I$rWtHVPX74W.jsZ7b8u8FNyr9H38ozqVnu8l4pxzdfsdH2Rv5JW4HQOiw/hJ8XhY4HcekJz1tfhlAmLFn4KfOb.:18392:0:99999:7:::
dhcpcd:!!:18392::::::
mysql:!!:18392::::::
rtkit:!!:18392::::::
cups:!!:18393::::::
xmms2:!!:18395::::::
user1:!:18401:0:99999:7:::
user2:!:18401:0:99999:7:::

</code></pre></td></tr></table></div></div><p>/etc/shadow
用户和用户密码信息</p><p>root &ndash;名
$6$&mldr;. &ndash;加密后密码</p><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">24
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">25
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">26
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">27
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">28
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">29
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">30
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">31
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">32
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">33
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">34
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">35
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">36
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">37
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">38
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">39
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">40
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">41
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">42
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">43
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">44
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">45
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">46
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">47
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">48
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">49
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">50
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">51
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">52
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">53
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">54
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">55
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">56
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">57
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">58
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">59
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">60
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">61
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">62
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">63
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">64
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">65
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">66
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>/etc/group

root❌0:root
adm❌999:daemon
wheel❌998:kamisama
kmem❌997:
tty❌5:
utmp❌996:
audio❌995:xmms2
disk❌994:
input❌993:
kvm❌992:
lp❌991:cups,kamisama
optical❌990:
render❌989:
storage❌988:
uucp❌987:
video❌986:
users❌985:
sys❌3:bin,kamisama
mem❌8:
ftp❌11:
mail❌12:
log❌19:
smmsp❌25:
proc❌26:polkitd
games❌50:
lock❌54:
network❌90:kamisama
floppy❌94:
scanner❌96:
power❌98:kamisama
systemd-journal❌984:
rfkill❌983:
nobody❌65534:
dbus❌81:
bin❌1:daemon
daemon❌2:bin
http❌33:
systemd-journal-remote❌982:
systemd-network❌981:
systemd-resolve❌980:
systemd-timesync❌979:
systemd-coredump❌978:
uuidd❌68:
dnsmasq❌977:
rpc❌32:
locate❌21:
ntp❌87:
avahi❌976:
colord❌975:
git❌974:
lightdm❌973:
nm-openconnect❌972:
nm-openvpn❌971:
polkitd❌102:
usbmux❌140:
kamisama❌1000:
dhcpcd❌970:
mysql❌969:
rtkit❌133:
cups❌209:
xmms2❌968:
user1❌1001:
user2❌1002:

</code></pre></td></tr></table></div></div><p>root->组名称</p><p>x->是否需密码验证</p><p>0->组ID</p><p>第四字段->其他组设置</p><h2 id=权限管理>权限管理</h2><h3 id=文件与目录的权限表示>文件与目录的权限表示</h3><ul><li>查看文件权限</li></ul><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>    ls -l
    -rw------- <span style=color:#bd93f9>1</span> root root <span style=color:#bd93f9>1523</span> sep <span style=color:#bd93f9>28</span> 12:05 anaconda-ks.cfg
</code></pre></td></tr></table></div></div><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">24
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">25
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">26
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">27
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">28
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>    类型 权限   所属用户和组      文件名
  文件类型
  - 普通文件
  d 目录文件
  b 块特殊文件
  c 字符特殊文件
  l 符号链接
  f 命名管道
  s 套接字文件
  权限表示方法
  r 读
  w 写
  x 执行
  数字权限的表示方法
  r=4
  w=2
  x=1
  -rw-r-xr-- 1 username groupname mtime filename
  rw- 文件属主的权限
  r-x 文件属组的权限
  r-- 其他用户的权限

创建新用户有默认权限，根据umask值计算，属主和属组根据当前进程的用户来设定(666-umask)
  目录权限的表示方法
  x 进入目录
  rx 进入目录且显示目录内文件名
  wx 修改目录内文件名

</code></pre></td></tr></table></div></div><ul><li><p>修改文件权限</p><ul><li>chmod 修改文件、目录权限<ul><li>chmod u+x /tmp/testfile</li><li>chmod 755 /tmp/testfile</li></ul></li><li>chown 更改属组、属主</li><li>chgrp 单独更改属组，不常用</li></ul></li></ul><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>chmod <span style=color:#ff79c6>(</span>u g o<span style=color:#ff79c6>)[</span>-+<span style=color:#ff79c6>=]</span>

touch afile

chmod u+x afile 增加属主执行权限

chmod g-r afile 减少属组读取权限

chmod <span style=color:#8be9fd;font-style:italic>o</span><span style=color:#ff79c6>=</span>w afile 设置其他用户为只有写权限

chmod a+r afile 属主、属组、其他用户都增加读取权限

使用字符权限

chmod u-wx afile 减少属主的写和执行权限

使用数字权限
chmod <span style=color:#bd93f9>446</span> afile 属组、属主只读、其他用户读写

</code></pre></td></tr></table></div></div><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>mkdir /test

ls -ld /test

drwxr-xr-x. <span style=color:#bd93f9>2</span> root root <span style=color:#bd93f9>6</span> 6月 07：18 <span style=color:#8be9fd;font-style:italic>test</span>

</code></pre></td></tr></table></div></div><blockquote><p>root用户是不受权限限制的！</p></blockquote><p>改变文件属主</p><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>chown user1 <span style=color:#8be9fd;font-style:italic>test</span>

</code></pre></td></tr></table></div></div><p>改变属组</p><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>chown :group1 <span style=color:#8be9fd;font-style:italic>test</span>
</code></pre></td></tr></table></div></div><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>chgrp group2 <span style=color:#8be9fd;font-style:italic>test</span>
</code></pre></td></tr></table></div></div><blockquote><p>按住<kbd>Ctrl</kbd>+<kbd>r</kbd> 可以搜索之前执行过的命令，直接按方向键上可以使用之前的命令</p></blockquote><ul><li>权限管理和文件的特殊权限</li></ul><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>chown user1:group1 afile 同时设置user和group
chmod <span style=color:#bd93f9>400</span> afile 读取权限
<span style=color:#8be9fd;font-style:italic>echo</span> <span style=color:#bd93f9>123</span> &gt; afile
cat afile
</code></pre></td></tr></table></div></div><blockquote><p>echo info 显示信息 echo 123 > afile 输出重定向，将输出到屏幕上的信息输出到文件中一个>是清空文件并输出，两个>是追加，不清空文件</p></blockquote><blockquote><p>对目录文件，x表示可进入，r表示可查看里面的文件，w表示可以增加和删除里面的文件、普通文件，x表示可执行，r可读取文件内容，w可以修改文件内容
所以目录文件的权限一般都是rx 或 wx 或rwx</p></blockquote><ul><li>特殊权限</li></ul><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>SUID 用于二进制可执行文件。执行命令时获取文件属主权限
  如 /usr/bin/passwd
ls -l /usr/bin/passwd
-rwsr-xr-x. 1 root root ....
小写s 不管是什么用户执行这条命令都会以文件属主身份执行这条命令


SGID 用于目录，在该目录创建新文件和目录时，权限自动更改为该目录的属组(用于文件共享)

SBIT 用于目录，在该目录下新建的文件和目录，仅root 和自己可以删除，如/tmp
ls -ld /tmp
drwxrwxrwt. 16 root root ...


</code></pre></td></tr></table></div></div><p>增加特殊权限</p><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>
SUID  4+...

chmod <span style=color:#bd93f9>4755</span> /test/bfile
ls -l /test/bfile
-rwsr-xr-x ...

SGID 2+...

SBIT 1+...

chmod <span style=color:#bd93f9>1777</span> /test
ls -l /test
drwxrwxrwt ...

</code></pre></td></tr></table></div></div><h2 id=网络管理>网络管理</h2><ul><li>网络状态查看<ul><li>网络状态查看工具
net-tools VS iproute<ol><li>net-tools<ul><li>ifconfig</li><li>etho 第一块网卡(网络接口)</li><li>也可能叫下面名字</li><li>eno1 板载网卡</li><li>ens33 PCI-E网卡</li><li>enp0s3 无法获取物理信息的PCI-E 网卡</li><li>CentOS 7使用了一致性网络设备命名，以上都不匹配则用eth0</li></ul></li></ol><ul><li>route</li><li>netstat</li></ul><ol start=2><li>iproute2</li></ol><ul><li>ip</li><li>ss</li></ul></li></ul></li></ul><blockquote><p><strong>网络接口命令修改</strong></p><ul><li>网卡命名规则受到biosdevname 和 net.ifnames 两个参数影响</li><li>编辑/etc/default/grub 文件，修改GRUB_CMDLINE_LINUX，增加biosdevname=0 net.ifnames=0</li><li>更新grub
> * grub2-mkconfig -o /boot/grub2/grub.cfg</li><li>重启
> * reboot</li></ul></blockquote><blockquote><table><thead><tr><th></th><th>biosdevname</th><th>net.ifnames</th><th>网卡名</th></tr></thead><tbody><tr><td>默认</td><td>0</td><td>1</td><td>ens33</td></tr><tr><td>组合1</td><td>1</td><td>0</td><td>em1</td></tr><tr><td>组合2</td><td>0</td><td>0</td><td>eth0</td></tr><tr><td>查看网络情况</td><td></td><td></td><td></td></tr></tbody></table></blockquote><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>mii-tool eth0 查看物理网卡连接情况
route -n 查看网关命令 -n表示不解析主机名
</code></pre></td></tr></table></div></div><ul><li><p>网络配置</p><p>修改网络配置命令</p></li></ul><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">8
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>  网卡
    ifconfig &lt;interface&gt; &lt;ip&gt; [netmask]
    ifup/ifdown &lt;interface&gt; 开启关闭网卡
  网关
    route add default gw &lt;ip&gt;
    route add -host ...
    route add -net ...

</code></pre></td></tr></table></div></div><ul><li>路由命令</li></ul><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>  修改网关
  route del default gw 10.211.55.1  删除默认0.0.0.0网关
  route add default gw 10.211.55.2
  添加明细路由
  route add -host 10.0.0.1 gw 10.211.55.1
  指定网段添加明细路由
  route add -net 192.168.0.0 netmask 255.255.255.0 gw 10.211.55.3
</code></pre></td></tr></table></div></div><p>对应ip命令</p><table><thead><tr><th style=text-align:center>net-tools</th><th style=text-align:center>iproute2</th></tr></thead><tbody><tr><td style=text-align:center>ipconfig</td><td style=text-align:center>ip addr ls</td></tr><tr><td style=text-align:center>ifup eth0</td><td style=text-align:center>ip link set dev eth0 up</td></tr><tr><td style=text-align:center>ifconfig eth1 10.0.0/24 via 192.168.0.1</td><td style=text-align:center>route add -net 10.0.0.0 netmask 255.255.255.0 gw 192.168.0.1</td></tr></tbody></table><ul><li><p>网络故障排除</p><p>常用命令</p><ul><li>ping &ndash;查看当前网络是否畅通</li></ul><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>    ping www.baidu.com
</code></pre></td></tr></table></div></div><ul><li>traceroute &ndash;当前网络状态</li></ul><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>    traceroute -w <span style=color:#bd93f9>1</span> www.baidu.com
           <span style=color:#8be9fd;font-style:italic>wait</span> 1s超时等待
</code></pre></td></tr></table></div></div><ul><li>mtr &ndash; 同上(包的丢失情况)</li></ul><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>    mtr
</code></pre></td></tr></table></div></div><ul><li>nslookup &ndash;域名问题</li></ul><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>    nslookup www.baidu.com  解析域名
</code></pre></td></tr></table></div></div><ul><li>telnet &ndash;端口问题</li></ul><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>    telnet www.baidu.com <span style=color:#bd93f9>80</span>   查看80端口是否通
</code></pre></td></tr></table></div></div><ul><li>tcpdump &ndash;tcp包</li></ul><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>    tcpdump -i any -n port <span style=color:#bd93f9>80</span> 抓取任意网卡80端口的数据包
        -i any 抓取所有网卡 -n解析域名
    tcpdump -i any -n host 10.0.0.1
    tcpdump -i any -n host 10.0.0.1 and port <span style=color:#bd93f9>80</span>
    tcpdump -i any -n host 10.0.0.1 and port <span style=color:#bd93f9>80</span> -w /tmp/filename
</code></pre></td></tr></table></div></div><ul><li>netstat &ndash;监听问题</li></ul><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>    netstat -n -t -p -l
        -n不显示域名 -t tcp方式截取 -p进程 -t监听的服务
    netstat -ntpl
</code></pre></td></tr></table></div></div><ul><li>ss &ndash;监听问题</li></ul><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>    ss -ntpl
</code></pre></td></tr></table></div></div></li></ul><p><strong>命令配置只是临时修改，永久生效需要修改配置文件</strong></p><ul><li><p>网络服务管理</p><p><strong>SysV和Systemd</strong></p><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>service network start/stop/restart
chkconfig -list network

systemctl list-unit-files NetworkManager.service
systemctl start/stop/restart NetworkManager
systemctl enable/disable NetworkManager 开机自启动
</code></pre></td></tr></table></div></div></li><li><p>常用网络配置文件</p><ul><li>ifcfg-eth0 网卡相关配置文件</li><li>/etc/hosts 主机名相关配置文件</li><li>centos7网卡配置文件<div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>/etc/sysconfig/network-scripts
TYPE=
UIP=
NAME=
BOOTPROTO=none --静态 dhcp 动态
IPADDR= ip地址
NETMASK=
GATEWAY=
DNS1=...
DNS2=...
DNS3=...
</code></pre></td></tr></table></div></div></li><li>修改主机名<div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>hostname <span style=color:#ff79c6>[</span>name<span style=color:#ff79c6>]</span> 临时修改
hostnamectl set-hostname <span style=color:#ff79c6>[</span>name<span style=color:#ff79c6>]</span> 永久生效
修改hostname之后需要在/etc/hosts中修改127.0.0.1对应主机名
不然在开机时会有服务因为主机名错误无法启动，
计算机只能等待服务超时，会影响开机速度
</code></pre></td></tr></table></div></div></li></ul></li></ul><h2 id=软件安装>软件安装</h2><h3 id=软件包管理器安装>软件包管理器安装</h3><p>包管理器是方便软件安装、卸载、解决软件依赖关系的重要工具</p><ul><li>centos、redhat使用yum包管理器，软件安装包格式为rpm</li><li>Debian、Ubuntu使用apt包管理器，软件安装包格式为deb</li></ul><h4 id=rpm包>rpm包</h4><p>*a rpm包格式</p><ul><li><p>vim-common-7.4.10-5.el7.x86_64.rpm</p><p>软件命名 软件名称 软件版本 系统版本 平台</p></li></ul><h5 id=rpm命令>rpm命令</h5><ul><li>rpm命令常用参数<ul><li>-q 查询软件包</li><li>-i 安装软件包</li><li>-e 卸载软件包</li></ul></li></ul><blockquote><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>linux一切皆文件
dd <span style=color:#ff79c6>if</span><span style=color:#ff79c6>=</span>/dev/sr0 <span style=color:#8be9fd;font-style:italic>of</span><span style=color:#ff79c6>=</span>/xxx/xx.iso 将光盘制造成光盘镜像
mount /dev/sr0 /mnt/  挂载设备
<span style=color:#8be9fd;font-style:italic>cd</span> /mnt
<span style=color:#8be9fd;font-style:italic>cd</span> packages/
ls vim*
找到vim-common包
mkdir /root/rpms
cp vim-common-*.rpm vim-enhanced-*.rpm /root/rpms
rpm -qa 查询所有以安装的包
rpm -qa | more  管道符，分屏显示
rpm -q vim-common 查询软件包
rpm -i vim-enhanced-*.rpm 安装需要打完整名称或通配符
rpm -e vim-enhance 卸载
rpm -e vim-common vim-enhanced  同时卸载两个软件包
rpm -i vim-enhanced-*.rpm 提示需要依赖关系，需要手动解决依赖关系
yum 仓库可以自动解决依赖关系
如果软件版本不符合要求还可以通过源代码编译安装软件包
</code></pre></td></tr></table></div></div></blockquote><h5 id=yum包管理器>yum包管理器</h5><ul><li><p>arpm包的问题</p><ul><li>需要自己解决依赖关系</li><li>软件来源不可靠</li></ul></li><li><p>centos yum 源</p><ul><li><a href=http://mirror.centos.org/centos/7/>http://mirror.centos.org/centos/7/</a></li></ul></li><li><p>国内镜像</p><ul><li><a href=https://opsx.alibaba.com/mirror>https://opsx.alibaba.com/mirror</a></li></ul></li><li><p>yum配置文件</p><ul><li>/ etc/yum.repos.d/CentOS-Base.repo</li><li>wget =O /etc/yum.repos.d/CentOS-Base.repo</li></ul></li><li><p>yum命令常用选项</p><ul><li>install</li><li>remove</li><li>list| group list</li><li>update</li></ul></li><li><p>yum修改国内源</p><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>mv /etc/yum.repos.d/CentOS-Base.repo /etc/yum.repos.d/CentOS-Base.repo.baskup
备份yum配置
wget -O /etc/yum.repos.d/CentOS-Base.repo http://mirrors.aliyun.com/repo/Centos-7.repo
修改配置文件
yum makecache 更新缓存
rmp -e vim-enhanced
rmp -e vim-common
卸载vim
yum install vim-enhanced
安装vim-enhanced 会自动安装vim-common
yum remove vim
卸载vim
yum update 更新所有软件
yum update name 更新name软件
</code></pre></td></tr></table></div></div></li></ul><h3 id=源代码安装>源代码安装</h3><ul><li>早期linux收费软件用二进制安装(开源之前),还要授权各种协议，十分麻烦</li><li>开源(公开源代码)之后，诞生源代码编译安装<ul><li>wget <a href=https://openresty.org/download/openresty-1.15.8.1tar.gz>https://openresty.org/download/openresty-1.15.8.1tar.gz</a></li><li>tar -zxf openresty-VERSION.tar.gz 解压缩</li><li>cd openresty-VERSION/ 进入到源代码目录</li><li>./configure &ndash;prefix=/usr/local/openresty 步骤一：配置软件和系统匹配，prefix制定软件安装配置，一般要指定，不然删除的时候要到处找</li><li>make -j2 用两个逻辑上CPU进行编译，一定程度上加快编译速度</li><li>make install 编译好的软件安装到指定目录</li></ul></li></ul><blockquote><p>执行./congifure 有时会报错，在错误信息中找到缺失的依赖库/软件，需要安装对应软件来解决错误。解决错误后再执行一次，查看还缺少什么库，再重复上面步骤，直到成功执行不报错。如果提示gmake、 gmake install是方便跨平台安装的，gmake也可以制定 -j2加快速度，但是如果代码之间有依赖关系，也不会加快多少速度的，没有依赖关系才能明显加快</p></blockquote><ul><li>cd /usr/local/openresty 进入安装目录，可以查看软件目录</li></ul><blockquote><p>源码安装是最后的手段，不到万不得已，还是不要费时费力使用源码安装了
源代码安装是需要用到软件的最新特性，但软件仓库里不是最新版本时才使用的</p></blockquote><h2 id=升级内核>升级内核</h2><ul><li>rpm格式内核<ul><li>uname -r 查看内核版本</li><li>yum install kernel-3.10.0 升级内核版本</li><li>yum update 升级已安装的其他软件包和补丁</li></ul></li><li>源代码编译安装<ul><li>安装依赖包 yum install gcc gcc-c++ make ncurses-devel openssl-devel elfutils-libelf-devel</li><li>下载并解压缩内核</li><li><a href=https://www.kernel.org>https://www.kernel.org</a></li><li>tar xvf linux-5.1.10.tar.xz -C /usr/src/kernels</li><li>配置内核编译参数<ul><li>cd /usr/src/kernels/linux-5.1.10</li><li>make menuconfig | allyesconfig | allnoconfig</li></ul></li><li>使用当前系统内核配置<ul><li>cp /boot/config-kernelversion.platform /usr/src/kernels/linux-5.1.10/.config</li></ul></li><li>查看CPU<ul><li>lscpu</li></ul></li><li>编译<ul><li>make -j2 all</li></ul></li><li>安装内核<ul><li>make modules_install</li><li>make install</li></ul></li></ul></li></ul><blockquote><p>uname -r 查看内核版本
epel仓库可以扩展centos仓库
yum install epel-release -y 安装epel
升级内核 yum install kernel
yum install kernel-3.10.0 制定版本内核
yum update 更新整个系统
<strong>源代码安装内核</strong></p></blockquote><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">24
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">25
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">26
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">27
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">28
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">29
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">30
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">31
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">32
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">33
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">34
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">35
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">36
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">37
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">38
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">39
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">40
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">41
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">42
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">43
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">44
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">45
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>下载内核文件linux-5.1.14.tar.xz
安装依赖项
yum install gcc gcc-c++ make ncurse-devel openssl-devel elfutil-libelf-devel
解压
tar xvf linux-5.1.14.tar.xz -C /usr/src/kernels/
<span style=color:#8be9fd;font-style:italic>cd</span> /usr/src/kernels/
<span style=color:#8be9fd;font-style:italic>cd</span> linux-5.1.14/
ls -a 查看所有文件<span style=color:#ff79c6>(</span>隐藏文件<span style=color:#ff79c6>)</span>，有配置属性
make menuconfig 配置内核，进入类似图形界面的配置界面
File systems--&gt;DOS/FAT/NT Filesystems--&gt; NTFS file system support 查看提示可以选择各种安装选项
M --模块化加载 * --固化到内核
选择保存退出就支持NTFS文件了

将当前系统的配置应用到新的内核配置
<span style=color:#8be9fd;font-style:italic>cd</span> /boot
cp config-3.10.0-957.21.2.e17.x86_64 /usr/src/kernels/linux-5.1.14/.config
原有配置不支持NTFS，需要再配置
<span style=color:#8be9fd;font-style:italic>cd</span> -  返回上一个工作目录
make menuconfig 再次设置NTFS支持

安装之前 查看cpu个数
lscpu <span style=color:#ff79c6>(</span>Core per socket 表示内核个数<span style=color:#ff79c6>)</span>

make -j2 all  编译内核

df -h 查看使用了多少空间

安装编译好的内核模块
make modules_install
***
DEPMOD 5.1.14

安装内核
make install

reboot 重启

来到引导界面<span style=color:#ff79c6>(</span>GRUB界面<span style=color:#ff79c6>)</span>
原始是3.10版本内核
新安装是5.1.14

进入后开启终端

uname -r 查看系统内核版本

</code></pre></td></tr></table></div></div><h2 id=grub配置>GRUB配置</h2><ul><li><p>grub</p></li><li><p>grub配置文件</p><ul><li>/etc/default/grub<ul><li>简单(默认)配置文件<div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>vim /etc/default/grub
两个重要设置项

GRUB_DEFAULT=saved
saved指引导时默认引导到哪一个内核
grub2-editenv list  查看当前使用内核
grep ^menu /boot/grub2/grub.cfg   搜索所有内核
grub2-set-default 0 引导第一个内核
grub2-set-default 1 第二个。。。

GRUB_CMDLINE_LINUX = &#39;...&#39;  rhgb 图形界面 quiet静默模式，只打印必要消息，
如果系统异常，可以去掉这两个参数，重启时可以看到更详细的信息,修改网卡信息也是这里添加参数
</code></pre></td></tr></table></div></div></li></ul></li><li>/etc/grub.d/<ul><li>详细配置文件的目录</li></ul></li><li>/boot/grub2/grub.cfg
*</li><li>grub2-mkconfig -o /boot/grub2/grub.cfg</li></ul></li><li><p>使用单用户进入系统(忘记root密码)</p><ul><li>重启电脑<div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">8
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>reboot
选择要引导的内核，按e键
找到linux16... 这一行
<span style=color:#8be9fd;font-style:italic>找到root</span><span style=color:#ff79c6>=</span>...找到根目录的目录
在最后添加一个 single <span style=color:#ff79c6>(</span> centos7 是 rd.break<span style=color:#ff79c6>)</span>
按下Ctrl+x重启
再次启动不需要输入密码就可以进入

</code></pre></td></tr></table></div></div></li></ul></li></ul><blockquote><p>单用户进入系统进入的是系统虚拟出来的根目录，操作不会被保存
mount -o remount,rw /sysroot 重新挂载硬盘(逻辑上),以可读写方式挂载 /sysroot
chroot /sysroot 修改根目录为实际根目录
echo 123456|passwd &ndash;stdin root 通过echo显示的信息通过管道传递给passwd
至此，root密码已经被重置，但是
系统中的SELinux安全组件(强制访问控制)会校验/etc/passwd 和/etc/shadow，发现这两个文件非标准修改，会导致无法进入到系统
关闭SELinux
vim /etc/selinux/config
SELINUX=enforcing 改成disabled就关闭了SElinux组件
保存退出
exit 回到虚拟root
reboot</p></blockquote><h2 id=进程管理>进程管理</h2><ul><li>进程的概念</li><li>进程的控制命令</li><li>进程的通信方式&ndash;信号</li><li>守护进程和系统日志</li><li>服务管理工具systemctl</li><li>SELinux简介</li></ul><h3 id=进程的概念>进程的概念</h3><ul><li>进程&ndash;a运行中的程序，从程序开始运行到终止的整个生命周期是可管理的<ul><li>C程序的启动是从main函数开始的<ul><li>int main(int agrc, char *argv[])</li><li>终止的方式并不唯一，并分为正常种植和异常终止<ul><li>正常终止也分为从main返回、调用exit等方式</li><li>异常种植分为调用abort、接受信号等</li></ul></li></ul></li></ul></li><li>查看进程<ul><li>ps</li></ul><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>kamisama-Manjaroi3 :: ~ » ps
    PID TTY          TIME CMD
 <span style=color:#bd93f9>215660</span> pts/1    00:00:00 zsh
 <span style=color:#bd93f9>215674</span> pts/1    00:00:00 ps
ps -e | more 查看不同终端的所有进程 且通过管道分页输出
ps -ef | more 加上f显示UID<span style=color:#ff79c6>(</span>有效用户ID<span style=color:#ff79c6>)</span>,PPID<span style=color:#ff79c6>(</span>父进程<span style=color:#ff79c6>)</span>
ps -eLf | more 显示轻量级进程<span style=color:#ff79c6>(</span>线程<span style=color:#ff79c6>)</span>
</code></pre></td></tr></table></div></div><ul><li>pstree 查看进程树</li></ul><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>pstree | more
</code></pre></td></tr></table></div></div><ul><li>top 动态查看进程/系统 信息</li></ul><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>top
up开机时间
user 用户数
load average 平均负载 衡量系统负载程度 三个数字 分别是1min 5min 10min采样得到的系统繁忙程度
%CPU<span style=color:#ff79c6>(</span>s<span style=color:#ff79c6>)</span>: us 用户使用 sy 系统进程 ni:nice 优先级 id idle 空闲  wa iowait磁盘速度过慢就会等待io
按数字1可以查看每一个CPU的运行状态<span style=color:#ff79c6>(</span>再次按1取消<span style=color:#ff79c6>)</span>
按s可以设置状态更新时间间隔
</code></pre></td></tr></table></div></div></li></ul><blockquote><p>进程也是树形结构，进程和权限有着密不可分的关系</p></blockquote><h3 id=进程控制>进程控制</h3><h4 id=进程的优先级调整>进程的优先级调整</h4><ul><li>调整优先级<ul><li>nice 范围从-20到19</li><li>renice 重新设置优先级</li></ul></li><li>进程的作业控制<ul><li>jobs<ul><li>& 符号</li></ul></li></ul></li></ul><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>vim a.sh
chmod u+x a.sh  用户执行权限<span style=color:#ff79c6>(</span>脚本文件要再添加r权限<span style=color:#ff79c6>)</span>
ls -l a.sh
id 查看当前用户的有效ID<span style=color:#ff79c6>(</span>UID<span style=color:#ff79c6>)</span>
./a.sh
top -p pid  查看a.sh运行状况默认ni为0
nice -n <span style=color:#bd93f9>10</span> ./a.sh 数字大，优先级低
top -p pid  a.sh优先级ni变化

对已经运行的程序再次调低优先级
另打开终端
renice -n <span style=color:#bd93f9>15</span> pid


</code></pre></td></tr></table></div></div><p>a.sh内容</p><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>#!/binbash
 echo $$
 while :
 do
  :
 done
</code></pre></td></tr></table></div></div><p><strong>每次打开很多终端不方便，我们可以进行前台后台的切换，也就是进程的作业控制</strong></p><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>./a.sh &amp;  程序就在后台运行

<span style=color:#8be9fd;font-style:italic>jobs</span>  查看后台程序
<span style=color:#8be9fd;font-style:italic>fg</span> <span style=color:#bd93f9>1</span>  jobs的编号1程序调回前台

想把前台程序调回后台可以按CTRL+z程序会调回后台并停止

想让程序再运行到前台
<span style=color:#8be9fd;font-style:italic>fg</span> <span style=color:#bd93f9>1</span>
再在后台并恢复运行
<span style=color:#8be9fd;font-style:italic>bg</span> <span style=color:#bd93f9>1</span>

</code></pre></td></tr></table></div></div><blockquote><p>manjaro 不能直接使用jobs的编号，要直接使用程序名
fg ./a.sh 这个样子</p></blockquote><h3 id=进程间通信>进程间通信</h3><ul><li><p><strong>信号</strong>是进程间通信方式之一，典型用法：输入终端命令，通过信号机制停止某个程序</p></li><li><p>使用信号的常用快捷键和命令</p><ul><li>kill -l<ul><li>SIGINT 通知前台进程组终止进程 Ctrl+c</li><li>SIGKILL 立即结束程序，不能被阻塞和处理kill -9 pid</li></ul></li></ul></li></ul><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>./a.sh

<span style=color:#8be9fd;font-style:italic>kill</span> pid  结束进程
<span style=color:#8be9fd;font-style:italic>kill</span> -9 pid 无条件结束<span style=color:#ff79c6>(</span>无视堵塞<span style=color:#ff79c6>)</span>

</code></pre></td></tr></table></div></div><h3 id=守护进程和系统日志>守护进程和系统日志</h3><h4 id=守护进程daemon>守护进程(daemon)</h4><ul><li>使用nohup 与&符号配合运行一个命令<ul><li>nohup命令使进程忽略hangup(挂起)信号</li></ul><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>nohup tail -f /var/log/lastlog &amp;
</code></pre></td></tr></table></div></div></li><li>守护进程和一般进程的差别</li></ul><blockquote><p>程序运行时会占用当前目录的，所以 daemon会切换为在根目录下运行,避免U盘等无法卸载的问题</p></blockquote><blockquote><p>孤儿进程 需要被其他进程接管</p></blockquote><blockquote><p>用户登录之前启动服务，类似于父进程创建子进程，然后结束父进程，子进程由1号进程接管,由于这些程序运行时没有终端,所以需要打印日志文件</p></blockquote><blockquote><p>nohup 和& 只是模拟守护进程，终端关掉程序也还会运行
本该在终端输出的信息会在nohup.out文件里输出
但是关机之后用这种方法启动的进程不会再次自动启动</p></blockquote><p>proc目录</p><blockquote><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-fallback data-lang=fallback>/proc/ 目录在硬盘中默认不存在的，是操作系统读取内存信息，然后以文件方式呈现的目录
proc下有和进程号同名的目录
例如./a.sh运行的进程号是13906
ls /proc/13906
ls -l cwd   当前运行位置
ls -l fd  输入输出  0 输入 1,2,3,4 标准输出

</code></pre></td></tr></table></div></div></blockquote><ul><li>使用screen命令<ul><li>screen 进入screen环境</li><li>ctrl+a d 退出(detached)screen环境</li><li>screen -ls 查看screen会话</li><li>screen -r sessionid 恢复会话</li><li>exit 退出screen</li></ul></li></ul><h4 id=系统日志>系统日志</h4><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">8
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">9
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#8be9fd;font-style:italic>cd</span> /var/log/  进入系统日志文件目录

ls messages 系统常规日志<span style=color:#ff79c6>(</span>manjaro没有，对应文件没找到<span style=color:#ff79c6>)</span>

tail -f dmesg 内核运行相关信息<span style=color:#ff79c6>(</span>manjaro没有,对应文件没找到<span style=color:#ff79c6>)</span>

tail -f secure  系统的安全日志

tail -f cron  周期性任务<span style=color:#ff79c6>(</span>计划任务<span style=color:#ff79c6>)</span>的日志信息
</code></pre></td></tr></table></div></div><h3 id=服务管理工具systemctl>服务管理工具systemctl</h3><ul><li>服务(提供常见功能的守护进程)集中管理工具<ul><li><p>service(Centos6以前)</p><ul><li>执行简单，服务起停由自己编写脚本控制</li><li>服务控制脚本在/etc/init.d/</li><li>查看系统启动服务级别chkconfig &ndash;list</li><li>init 0-6<ul><li>0 关机</li><li>1 单用户</li><li>2 不带网络的多用户</li><li>3 多用户(字符模式)</li><li>4 图形模式</li><li>5 图形模式</li><li>6 重启</li></ul></li><li>起停服务<ul><li>service SericeName stop/start/restart</li></ul></li></ul></li><li><p>systemctl</p><ul><li>脚本复杂，服务起停简单</li><li>软件包安装的服务控制脚本在/usr/lib/systemd/system/</li><li>列出systemd服务 systemctl list-unit-files</li><li>起停服务<ul><li>systemctl start|stop|restart|reload ServiceName 部分服务支持不重启重新加载配置(reload)</li><li>systemctl |enable|disable ServiceName 设置开机自启动</li><li>systemctl status ServiceName 查看服务状态</li></ul></li><li>查看服务级别 cd /lib/systemd/system/<ul><li>ls *.target -l 查看所有不同级别</li><li>ls -l runlevel*.target 查看系统启动级别</li><li>systemctl get-default 查看当前系统运行的级别</li><li>systemctl set-default multi-user.target 设置为字符界面启动</li></ul></li><li>服务启动脚本 /lib/systemd/system/*.service<ul><li>服务启动脚本编写在shell脚本里详解</li></ul></li></ul></li></ul></li></ul><h3 id=selinux简介>SELinux简介</h3><blockquote><p>SELinux会降低性能</p></blockquote><p><strong>安全增强的linux版本</strong>
<strong>以前：自主访问控制&ndash;用户权限和文件权限控制安全</strong></p><ul><li>MAC(强制访问控制，进程用户和文件打上标签，标签一致就可以控制系统，不一致就允许访问)与DAC(自主访问控制)</li><li>查看SELinux的命令<ul><li>getenforce 查看SELinux状态命令 /etc/selinux/config是Selinux配置文件</li><li>/usr/sbin/sestatus</li><li>ps -Z and ls -Z and id -Z</li></ul></li><li>关闭SELinux<ul><li>setenforce 0</li><li>/etc/selinux/sysconfig</li></ul></li></ul><h2 id=内存与磁盘管理>内存与磁盘管理</h2><h3 id=内存和磁盘使用率查看>内存和磁盘使用率查看</h3><h4 id=内存使用率查看>内存使用率查看</h4><ul><li><p>常用命令介绍</p><ul><li>free 静态显示内存使用</li></ul><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>free -m 按MB显示
free -g 按GB显示
看avaliable 和 total
若没有swap 内存满时linux会随机杀掉内存占用最大的进程
</code></pre></td></tr></table></div></div><ul><li>top 动态查看内存使用</li></ul></li></ul><h4 id=磁盘使用率查看>磁盘使用率查看</h4><ul><li>查看命令<ul><li>fdisk</li></ul></li></ul><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>查看磁盘信息
fdisk -l
ls -l /dev/sd?
parted -l
</code></pre></td></tr></table></div></div><pre><code>* df  fdisk的补充
</code></pre><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>df -h 看到分区和挂载的目录
</code></pre></td></tr></table></div></div><pre><code>* du  实际占用空间
</code></pre><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>du /etc/passwd  不显示单位<span style=color:#ff79c6>(</span>默认是KB<span style=color:#ff79c6>)</span>
du -h /etc/passwd 智能显示单位
ls -lh /etc/passwd
</code></pre></td></tr></table></div></div><pre><code>* du和ls区别
  du查看的是物理机实际占用的空间，例如创建虚拟机，实际大小远远小于ls看到的
  文件有空洞，是有创建文件的开头和结尾，但是中间并没有那么多数据(空洞内容)，
</code></pre><blockquote><p>创建带空洞文件</p><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>dd <span style=color:#ff79c6>if</span><span style=color:#ff79c6>=</span>afile  <span style=color:#8be9fd;font-style:italic>bs</span><span style=color:#ff79c6>=</span>4M  <span style=color:#8be9fd;font-style:italic>count</span><span style=color:#ff79c6>=</span><span style=color:#bd93f9>10</span> <span style=color:#8be9fd;font-style:italic>of</span><span style=color:#ff79c6>=</span>bfile 从a文件里读取4M数据并且读取10次 b--&gt;40M
dd <span style=color:#ff79c6>if</span><span style=color:#ff79c6>=</span>/dev/zero <span style=color:#8be9fd;font-style:italic>bs</span><span style=color:#ff79c6>=</span>4M <span style=color:#8be9fd;font-style:italic>count</span><span style=color:#ff79c6>=</span><span style=color:#bd93f9>10</span> <span style=color:#8be9fd;font-style:italic>of</span><span style=color:#ff79c6>=</span>bfile 读取0 每次读取4M读取10次到b文件 b--&gt;80M
dd <span style=color:#ff79c6>if</span><span style=color:#ff79c6>=</span>/dev/zero <span style=color:#8be9fd;font-style:italic>bs</span><span style=color:#ff79c6>=</span>4M <span style=color:#8be9fd;font-style:italic>count</span><span style=color:#ff79c6>=</span><span style=color:#bd93f9>10</span> <span style=color:#8be9fd;font-style:italic>seek</span><span style=color:#ff79c6>=</span><span style=color:#bd93f9>20</span> <span style=color:#8be9fd;font-style:italic>of</span><span style=color:#ff79c6>=</span>bfile 读取0到bfile，创建bfile开头，并跳过20块，再开始写入4M的0 10次
这样用ls -lh bfile 是120M du -h bfile 是40M
</code></pre></td></tr></table></div></div></blockquote><h3 id=ext4文件系统>ext4文件系统</h3><blockquote><p>linux 支持多种文件系统，常见的有ext4、xfs、NTFS(需要额外安装软件ntfs-3g，ntfs文件系统有版权)</p></blockquote><ul><li><p>ext4文件系统基本结构比较复杂</p><ul><li>超级块(记录整个系统包含的文件数、占用空间)&ndash;df查看的是超级块信息</li><li>超级块副本 保证超级块丢失后可恢复</li><li>i节点(inode) 记录每一个文件的名称(类型?)、大小、编号和权限 ls查看的信息</li><li>数据块(datablock) 记录数据 du查看的信息(数据块为空)</li></ul></li><li><p>各种文件操作命令inode和datablock的操作</p></li></ul><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>touch afile 只有i节点没有数据
ls -li afile  查看i节点使用情况
du -h afile
<span style=color:#8be9fd;font-style:italic>echo</span> <span style=color:#bd93f9>123</span> &gt; afile 写入123到afile
ls -li afile  大小为4个字节
du -h afile 大小为4K<span style=color:#ff79c6>(</span>xfs ext4默认一个数据块的大小4K，所以有专门存小文件的文件系统<span style=color:#ff79c6>)</span>

</code></pre></td></tr></table></div></div><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>cp afile afile2
ls -li afile* i节点不同了，产生两个文件

</code></pre></td></tr></table></div></div><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>mv afile2 afile3  改名
ls -li afile* 文件名称变化，但是inode没有变化，即文件本身没有变化

mv afile2 /afile3 移动
如果移动到同一分区，速度很快，移动到不同分区，速度很慢
</code></pre></td></tr></table></div></div><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>vim afile4  写入1234
ls -li afile4 记住inode信息
vim afile4  写入5678
ls -li afile4 inode变化,即生成了新的文件
</code></pre></td></tr></table></div></div><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>rm  删除文件--断开文件名和i节点的链接--不管删除多大文件都是一瞬间
rm afile4 删除afile4

</code></pre></td></tr></table></div></div><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>ls -li afile
<span style=color:#bd93f9>134493</span> -rw-r--r-- <span style=color:#bd93f9>1</span> kamisama kamisama <span style=color:#bd93f9>0</span>  6月  <span style=color:#bd93f9>6</span> 22:42 afile
  1表示有一个文件名链接到这个inode
ln afile bfile 链接bfile到afile的inode
ls -li afile
ls -li bfile  两个的inode一样，所以ln不额外增加磁盘占用
ln是不能跨分区<span style=color:#ff79c6>(</span>系统的<span style=color:#ff79c6>)</span>，因为inode是存在文件系统上面的，
跨越分区要用下面的软链接<span style=color:#ff79c6>(</span>符号链接<span style=color:#ff79c6>)</span>

ls -li afile
ln -s afile aafile  创建软链接
ls -li afile aafile inode不一样,aafile记录的是目标文件的路径
对链接所做的权限都会传递到链接的文件，
符号链接<span style=color:#ff79c6>(</span>ln -s<span style=color:#ff79c6>)</span>可以跨系统<span style=color:#ff79c6>(</span>分区使用<span style=color:#ff79c6>)</span>，但是会创建新的文件，和链接<span style=color:#ff79c6>(</span>ln<span style=color:#ff79c6>)</span>是有区别的

</code></pre></td></tr></table></div></div><ul><li>文件访问控制列表facl</li></ul><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">8
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">9
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>查看文件访问控制列表
getfacl afile
赋予权限
setfacl -m u:user1:r afile  给user1用户只读权限
ls -l afile
-rw-r--r--+ <span style=color:#bd93f9>2</span> kamisama kamisama <span style=color:#bd93f9>0</span>  6月  <span style=color:#bd93f9>6</span> 22:42 afile 加号表示除了标准权限外还有facl权限
getfacl afile
setfacl -m g:group1:r afile 给组赋予权限
setfacl -x g:group1:r afile 收回赋予的权限
</code></pre></td></tr></table></div></div><h3 id=磁盘配额的使用>磁盘配额的使用</h3><ul><li>用户磁盘配额<ul><li>xfs文件系统的用户磁盘配额 quota</li><li>mkfs.xfs /dev/sdb1</li><li>mkdir /mnt/disk1</li><li>mount -o uquota,gquota /dev/sdb1 /mnt/disk1</li><li>chmod 1777 /mnt/disk1</li><li>xfs_quota -x -c &lsquo;report -ugibh&rsquo; /mnt/disk1</li><li>xfs_quota -x -c &lsquo;limit -u isoft=5 ihard=10 user1&rsquo; /mnt/disk1</li></ul></li></ul><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">24
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">25
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">26
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">27
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">28
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>fdisk /dev/sdb
  n
  <span style=color:#bd93f9>1</span>
  w
mkfs.xfs /dev/sdb1
mkdir -p /mnt/disk1 -p如果目录不存在就创建
mount -o uquota,gquota /dev/sdb1 /mnt/dski1 下次也生效要更改fstab配置文件

mount 查看

chmod <span style=color:#bd93f9>1777</span> /mnt/disk1

xfs_quota 查看磁盘配额<span style=color:#ff79c6>(</span>交互模式<span style=color:#ff79c6>)</span>
xfs_quota -x -c <span style=color:#f1fa8c>&#39;report -ugibh&#39;</span> /mnt/disk1

xfs_quota -x -c <span style=color:#f1fa8c>&#39;limit -u isoft=5 ihard=10 user1&#39;</span> /mnt/disk1

su - user1

id

<span style=color:#8be9fd;font-style:italic>cd</span> /mnt/disk1

touch <span style=color:#bd93f9>1</span> <span style=color:#bd93f9>2</span> <span style=color:#bd93f9>3</span> <span style=color:#bd93f9>4</span> <span style=color:#bd93f9>5</span>
touch <span style=color:#bd93f9>6</span>   查看磁盘配额会显示宽限时间
touch <span style=color:#bd93f9>7</span> <span style=color:#bd93f9>8</span> <span style=color:#bd93f9>9</span> <span style=color:#bd93f9>10</span>
touch <span style=color:#bd93f9>11</span>  显示超出磁盘配额

</code></pre></td></tr></table></div></div><h3 id=磁盘的分区和挂载>磁盘的分区和挂载</h3><ul><li>常用命令<ul><li>fdisk 给磁盘创建分区</li></ul><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">8
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>fdisk /dev/sdc
m--获取帮助
q--不保存更改并推出
w--保存更改退出
n--创建新分区
p--创建主分区
1--选择盘符1

</code></pre></td></tr></table></div></div><ul><li>mkfs 为分区创建文件系统(格式化)</li></ul><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>mkfs.btrfs mkfs.ext2 mkfs.ext4 mkfs.minix mkfs.vfat
mkfs.cramfs mkfs.ext3 mkfs.fat mkfs.msdos mkfs.xfs

mkfs.ext4 /dev/sdc1
</code></pre></td></tr></table></div></div><ul><li>parted 给大于2T的磁盘分区</li></ul><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>parted /dev/sdd
<span style=color:#8be9fd;font-style:italic>help</span> 获取帮助，类似fdisk
</code></pre></td></tr></table></div></div><ul><li>mount 挂载</li></ul><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>mkdir /mnt/sdc1
mount -t ext4 /dev/sdc1 /mnt/sdc1
mount -t auto /dev/sdc1 /mnt/sdc1
mount /dev/sdc1 /mnt/sdc1
上面三个命令效果一样的
</code></pre></td></tr></table></div></div></li><li>常用配置文件<ul><li>/etc/fstab<ul><li>上面的mount命令只是临时挂载设备，重启后失效</li><li>要自动挂载(固化)就要修改/etc/fstab配置文件</li></ul></li></ul></li></ul><p>修改配置文件</p><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>vim /etc/fstab
</code></pre></td></tr></table></div></div><p>添加要挂载的磁盘</p><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>/dev/sdc1 /mnt/sdc1 ext4 defaults <span style=color:#bd93f9>0</span> <span style=color:#bd93f9>0</span>
</code></pre></td></tr></table></div></div><h3 id=交换分区虚拟内存的查看与创建>交换分区(虚拟内存)的查看与创建</h3><ul><li>增加交换分区的大小<ul><li><p>mkswap 标记分区为swap分区(类似格式化)</p></li><li><p>swapon 启用swap分区</p></li></ul></li></ul><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>free -m
ls -l /dev/sdd
fdisk /dev/sdd

ls /dev/sdd1

mkswap /dev/sdd1

swapon /dev/sdd1
free -m

swapoff /dev/sdd1
free -m
</code></pre></td></tr></table></div></div><ul><li>使用文件制作交换分区<ul><li>dd if=/dev/zero bs=4M count=1024 of=/swapfile</li></ul></li></ul><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>dd <span style=color:#ff79c6>if</span><span style=color:#ff79c6>=</span>/dev/zero <span style=color:#8be9fd;font-style:italic>bs</span><span style=color:#ff79c6>=</span>4M <span style=color:#8be9fd;font-style:italic>count</span><span style=color:#ff79c6>=</span><span style=color:#bd93f9>1024</span> <span style=color:#8be9fd;font-style:italic>of</span><span style=color:#ff79c6>=</span>/swapfile

mkswap /swapfile

ls -l /swapfile

chmod <span style=color:#bd93f9>600</span> /swapfile

swapon /swapfile

free -m

vim /etc/fstab

写入

/swapfile swap swap defaults <span style=color:#bd93f9>0</span> <span style=color:#bd93f9>0</span>
第一个0选择要不要备份分区，第二个是开机时磁盘自检，检查顺序问题 默认都是0就可以了

</code></pre></td></tr></table></div></div><h3 id=软件raid的使用>软件RAID的使用</h3><p><em>RAID(磁盘阵列) 与RAID技术</em></p><ul><li>RAID的常见级别和含义<ul><li>RAID 0 striping 条带方式,提高单盘吞吐率</li><li>RAID 1 mirroring 镜像方式,提高可靠性</li><li>RAID 5 有奇偶校验 一个存数据一个存校验值</li><li>RAID 10 是RAID 1 和 RAID 0 的结合 &ndash;金融相关(两个RAID1 再去做RAID0)</li></ul></li><li>软件RAID 的使用</li></ul><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>mdadm命令<span style=color:#ff79c6>(</span>没有需要安装<span style=color:#ff79c6>)</span>

/dev/sd* 大小相等 --使用大小相等的磁盘

mdadm -C /dev/md0 -a yes -l1 -n2 /dev/sdb1 /dev/sdc1  RAID1 要两块硬盘

mdadm -C /dev/md0 -a yes -l1 -n2 /dev/sd<span style=color:#ff79c6>[</span>b,c<span style=color:#ff79c6>]</span><span style=color:#bd93f9>1</span>  RAID1 要两块硬盘

mdadm -D /dev/md0 查看RAID信息

破坏RAID
dd <span style=color:#ff79c6>if</span><span style=color:#ff79c6>=</span>/dev/zero <span style=color:#8be9fd;font-style:italic>of</span><span style=color:#ff79c6>=</span>/dev/sdc1 <span style=color:#8be9fd;font-style:italic>bs</span><span style=color:#ff79c6>=</span>4M <span style=color:#8be9fd;font-style:italic>count</span><span style=color:#ff79c6>=</span><span style=color:#bd93f9>1</span>

配置文件的设置
<span style=color:#8be9fd;font-style:italic>echo</span> DEVICE /dev/sd<span style=color:#ff79c6>[</span>b,c<span style=color:#ff79c6>]</span><span style=color:#bd93f9>1</span> &gt;&gt; /etc/mdadm.conf
mdadm -Evs &gt;&gt; /etc/mdadm.conf

格式化RAID设备
mkfs.xfs /dev/md0 格式化后可以挂载了

</code></pre></td></tr></table></div></div><h3 id=逻辑卷管理>逻辑卷管理</h3><ul><li>逻辑卷和文件系统的关系</li><li>为Linux创建逻辑卷</li><li>动态扩容逻辑卷</li></ul><p>新建逻辑卷&&在线扩容</p><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">11
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">12
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">13
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">14
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">15
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">16
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">17
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">18
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">19
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">20
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">21
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">22
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">23
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">24
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">25
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">26
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">27
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">28
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">29
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">30
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">31
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">32
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">33
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">34
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">35
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">36
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">37
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">38
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">39
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">40
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">41
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">42
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">43
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">44
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">45
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">46
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">47
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">48
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">49
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">50
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">51
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">52
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">53
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">54
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">55
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">56
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">57
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">58
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">59
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">60
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">61
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">62
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">63
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">64
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">65
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">66
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">67
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">68
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">69
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">70
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">71
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>新建逻辑卷
/dev/sdb1 /dev/sdc1 /dev/sdd1 三个硬盘

pvcreate /dev/sdb1 /dev/sdc1 /dev/sdd1
pvcreate /dev/sd<span style=color:#ff79c6>[</span>b,c,d<span style=color:#ff79c6>]</span><span style=color:#bd93f9>1</span>
报错因为之前sd<span style=color:#ff79c6>[</span>b,c<span style=color:#ff79c6>]</span>1创建了RAID卷

停掉RAID卷，之后再创建就可以成功了
mdadm --stop /dev/md0   停掉了还要摧毁RAID关系 应该只要下面两条命令就可以了

dd <span style=color:#ff79c6>if</span><span style=color:#ff79c6>=</span>/dev/zero <span style=color:#8be9fd;font-style:italic>of</span><span style=color:#ff79c6>=</span>/dev/sdb1 <span style=color:#8be9fd;font-style:italic>bs</span><span style=color:#ff79c6>=</span>1M <span style=color:#8be9fd;font-style:italic>count</span><span style=color:#ff79c6>=</span><span style=color:#bd93f9>1</span>  破掉超级块
dd <span style=color:#ff79c6>if</span><span style=color:#ff79c6>=</span>/dev/zero <span style=color:#8be9fd;font-style:italic>of</span><span style=color:#ff79c6>=</span>/dev/sdc1 <span style=color:#8be9fd;font-style:italic>bs</span><span style=color:#ff79c6>=</span>1M <span style=color:#8be9fd;font-style:italic>count</span><span style=color:#ff79c6>=</span><span style=color:#bd93f9>1</span>  破掉超级块


pvcreate /dev/sd<span style=color:#ff79c6>[</span>b,c,d<span style=color:#ff79c6>]</span><span style=color:#bd93f9>1</span>

pvs 查看

创建卷组<span style=color:#ff79c6>(</span>VG<span style=color:#ff79c6>)</span>

vgcreate vg1 /dev/sdb1 /dev/sdc1
一个PV不能同时加入两个卷组的
pvs

vgs 查看卷组


创建逻辑卷<span style=color:#ff79c6>(</span><span style=color:#6272a4>#LV)</span>
lvcreate -L 100M -n lv1 vg1

lvs 查看逻辑卷

格式化并挂载

mkdir /mnt/test

mkfs.xfs /dev/vg1/lv1

mount /dev/vg1/lv1 /mnt/test


整个过程

fdisk /dev/sd?? **pv vg1 lv1**可动态扩展 xfs文件方式操作 mount内存管理应用


扩充容量

扩充卷组
vgextend centos /dev/sdd1
pvs
vgs
lvs
扩充逻辑卷

lvextend -L +50G /dev/centos/root

lvs

df -h 发现分区并没有扩大，因为文件系统没有认识到自己的分区扩大了

文件系统
xfs_growfs /dev/centos/root

文件系统扩大了

df -h

缩容也可以在lv上实现，但是实现会有风险，导致出错


</code></pre></td></tr></table></div></div><h3 id=系统综合状态查看>系统综合状态查看</h3><ul><li>使用sar 命令查看系统综合状态</li><li>使用第三方命令查看网络流量<ul><li>yum install epel-release</li><li>yum install iftop</li><li>iftop -p</li></ul></li></ul><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">8
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">9
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>sar -u <span style=color:#bd93f9>1</span> <span style=color:#bd93f9>10</span>   查看CPU 1s刷新，查看十次
sar -r <span style=color:#bd93f9>1</span> <span style=color:#bd93f9>10</span>   查看内存
sar -b <span style=color:#bd93f9>1</span> <span style=color:#bd93f9>10</span> 查看I/O
sar -d <span style=color:#bd93f9>1</span> <span style=color:#bd93f9>10</span>   查看磁盘读写
sar -q <span style=color:#bd93f9>1</span> <span style=color:#bd93f9>10</span>   查看进程使用


iftop -p  查看网络命令 默认监听eth0

</code></pre></td></tr></table></div></div><h3 id=shell脚本>shell脚本</h3><h4 id=认识shell>认识shell</h4><ul><li>什么是shell<ul><li>shell是命令解释器，用于解释用户对操作系统的操作</li><li>shell 有很多<ul><li>cat /etc/shells</li></ul></li><li>CentOS 7默认使用的shell是bash<ul><li>基于bshell 重写了一遍</li></ul></li></ul></li><li>linux的启动过程(系统启动的shell脚本)<ul><li>BIOS-MBR-BootLoader(grub)-Kernel-system-系统初始化-shell</li></ul></li></ul><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>
BIOS
开机时按F2<span style=color:#ff79c6>(</span>各个电脑不一样<span style=color:#ff79c6>)</span>
</code></pre></td></tr></table></div></div><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>MBR

dd <span style=color:#ff79c6>if</span><span style=color:#ff79c6>=</span>/dev/sda <span style=color:#8be9fd;font-style:italic>of</span><span style=color:#ff79c6>=</span>mbr.bin <span style=color:#8be9fd;font-style:italic>bs</span><span style=color:#ff79c6>=</span><span style=color:#bd93f9>446</span> <span style=color:#8be9fd;font-style:italic>count</span><span style=color:#ff79c6>=</span><span style=color:#bd93f9>1</span>

hexdump -c mbr.bin<span style=color:#ff79c6>(</span>没有文件系统，不能用cat，可以用16进制查看 -C表示将可以显示为字符的显示为字符<span style=color:#ff79c6>)</span>

dd <span style=color:#ff79c6>if</span><span style=color:#ff79c6>=</span>/dev/sda <span style=color:#8be9fd;font-style:italic>of</span><span style=color:#ff79c6>=</span>mbr2.bin <span style=color:#8be9fd;font-style:italic>bs</span><span style=color:#ff79c6>=</span><span style=color:#bd93f9>512</span> <span style=color:#8be9fd;font-style:italic>count</span><span style=color:#ff79c6>=</span><span style=color:#bd93f9>1</span>

hexdump -c mbr2.bin | more
<span style=color:#bd93f9>55</span> aa 标记表示可引导
</code></pre></td></tr></table></div></div><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>GRUB
<span style=color:#8be9fd;font-style:italic>cd</span> /boot/grub2
ls
grub2-editenv list
uname -r 查看使用内核
</code></pre></td></tr></table></div></div><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">8
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">9
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>which init <span style=color:#ff79c6>(</span>CentOS7 Systemd<span style=color:#ff79c6>)</span>
/usr/sbin/init
top -p <span style=color:#bd93f9>1</span>

<span style=color:#8be9fd;font-style:italic>cd</span> /etc/systmed/system/ 默认启动级别
<span style=color:#8be9fd;font-style:italic>cd</span> /usr/lib/systemd/system/ 读取各种service

ls /etc/rc.d/ <span style=color:#ff79c6>(</span>CentOs6系统脚本，激活RAID等初始化操作<span style=color:#ff79c6>)</span>

</code></pre></td></tr></table></div></div><p>除了启动过程用到大量的shell脚本之外，linux命令也有很多在用shell脚本</p><p>例如grub-mkconfig命令</p><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>file /sbin/grub-mkconfig

vim /sbin/grub-mkconfig

</code></pre></td></tr></table></div></div><ul><li>怎样编写一个shell<ul><li>UNIX哲学：一条命令只做一件事</li><li>为了组合命令和多次执行，使用脚本文件来保存需要执行的命令</li><li>赋予该文件执行权限(chmod u+rx filename)</li></ul></li></ul><blockquote><p>二进制文件只需要赋予可执行文件，shell脚本文件还需要可读文件</p></blockquote><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">8
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>进入到某个目录并查看有哪些文件
<span style=color:#8be9fd;font-style:italic>cd</span> /var ; ls
显示当前目录路径
<span style=color:#8be9fd;font-style:italic>cd</span> /var ; ls ; <span style=color:#8be9fd;font-style:italic>pwd</span>
查看占用磁盘空间大小
<span style=color:#8be9fd;font-style:italic>cd</span> /var ; ls ; <span style=color:#8be9fd;font-style:italic>pwd</span> ; du -sh

<span style=color:#8be9fd;font-style:italic>cd</span> /var ; ls ; <span style=color:#8be9fd;font-style:italic>pwd</span> ; du -sh ; du -sh *
</code></pre></td></tr></table></div></div><p>改成shell脚本</p><p>vim 1.sh</p><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-shell data-lang=shell><span style=color:#8be9fd;font-style:italic>cd</span> /var/
ls
<span style=color:#8be9fd;font-style:italic>pwd</span>
du -sh
du -sh *

</code></pre></td></tr></table></div></div><p>赋予可执行权限</p><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>chmod u+x 1.sh
</code></pre></td></tr></table></div></div><p>执行脚本</p><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>./1.sh    使用默认命令解释器执行
bash 1.sh 用bash解释器执行
zsh 1.sh  用zsh解释器执行
</code></pre></td></tr></table></div></div><p>脚本在其他环境下运行，如果默认命令解释器不是bash，可能会失败，所以需要一些声明</p><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#ff79c6>#!/bin/bash
</span><span style=color:#ff79c6></span><span style=color:#6272a4>#井号开头会被认为是注释，但当不指定命令解释器时(./1.sh)</span>
<span style=color:#6272a4>#上面的命令就变成了告诉系统使用什么命令解释器的非注释</span>
<span style=color:#6272a4>#demo--脚本做演示用</span>
<span style=color:#8be9fd;font-style:italic>cd</span> /var/
ls
<span style=color:#8be9fd;font-style:italic>pwd</span>
du -sh
du -sh *

</code></pre></td></tr></table></div></div><ul><li>sehll脚本的执行方式<ol><li>bash ./filename.sh 在当前终端下产生bash子进程，在bash子进程下运行</li><li>./filename.sh 也是产生子进程再运行</li><li>source ./filename.sh source命令是在当前进程下运行的</li><li>.filename.sh .就是source命令的另一种写法</li></ol></li></ul><p>1,2 不对当前运行环境产生影响
3,4 对当前运行环境产生影响</p><p>vim 2.sh</p><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#ff79c6>#!/bin/bash
</span><span style=color:#ff79c6></span><span style=color:#6272a4>#!/usr/bin/python--用python</span>

<span style=color:#6272a4># demo 2</span>

<span style=color:#8be9fd;font-style:italic>cd</span> /tmp
<span style=color:#8be9fd;font-style:italic>pwd</span>
</code></pre></td></tr></table></div></div><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>bash 2.sh
未赋予可执行权限也能运行
在脚本运行过程中进入tmp目录，脚本退出后回到原目录
</code></pre></td></tr></table></div></div><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>./2.sh  提示权限不够
chmod u+x 2.sh
./2.sh
</code></pre></td></tr></table></div></div><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#8be9fd;font-style:italic>source</span> ./2.sh
直接进入tmp

. ./2.sh
直接进入tmp
</code></pre></td></tr></table></div></div><ul><li>内建命令和外部命令的区别</li></ul><h4 id=管道与重定向>管道与重定向</h4><h5 id=管道与管道符>管道与管道符</h5><ul><li>管道和信号一样，也是进程通信的方式之一</li><li>匿名管道(管道符)是shell编程经常用到的通信工具</li><li>管道符是"|",将前一个命令的执行结果传递给后面的命令<ul><li>ps | cat<ul><li>echo 123 | ps</li></ul></li></ul></li></ul><p>管道符使用</p><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>ls -l |more
ls -l 命令的执行结果传递给后面的命令
再将后面命令<span style=color:#ff79c6>(</span>more<span style=color:#ff79c6>)</span>的执行结果当作最终执行结果
</code></pre></td></tr></table></div></div><blockquote><p>;和|
; 隔开两条命令，| 将第一条命令的输出作为第二条命令的输入
管道符是通过子进程运行的，所以要尽量别使用cd pwd等内建命令</p></blockquote><h5 id=子进程与子shell>子进程与子shell</h5><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">8
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>cat | ps -f
可以看到zsh<span style=color:#ff79c6>(</span>bash<span style=color:#ff79c6>)</span>的pid下有两个pid相邻的子进程cat 和ps

若创建的子进程是shell脚本<span style=color:#ff79c6>(</span>1.sh<span style=color:#ff79c6>)</span>，通常称这种子进程叫子shell

由于管道符是通过子进程方式运行的，所以如果使用了cd pwd等内部命令
执行完成后，当前父进程是不会发生变化的

</code></pre></td></tr></table></div></div><div class=highlight><div style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><table style=border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block><tr><td style=vertical-align:top;padding:0;margin:0;border:0><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">1
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">2
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">3
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">4
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">5
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">6
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">7
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">8
</span></code></pre></td><td style=vertical-align:top;padding:0;margin:0;border:0;width:100%><pre style=color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>cat | ps -l
新开终端
<span style=color:#8be9fd;font-style:italic>cd</span> /proc/14486  <span style=color:#ff79c6>(</span>假设cat的PID为14486<span style=color:#ff79c6>)</span>
<span style=color:#8be9fd;font-style:italic>cd</span> fd
ls -l
标准输入<span style=color:#ff79c6>(</span>0<span style=color:#ff79c6>)</span>/标准输出<span style=color:#ff79c6>(</span>1<span style=color:#ff79c6>)</span>/错误输出<span style=color:#ff79c6>(</span>2<span style=color:#ff79c6>)</span> 3个文件描述符
可以看到 1是<span style=color:#f1fa8c>\&#39;</span>pipe<span style=color:#ff79c6>[</span>1234<span style=color:#ff79c6>]</span><span style=color:#f1fa8c>\&#39;</span> 显示为管道符号

</code></pre></td></tr></table></div></div><h5 id=重定向符号>重定向符号</h5><ul><li><p>一个进程默认会打开标准输入、标准输出、错误输出三个文件描述符</p></li><li><p>输入重定向符号 &ldquo;&lt;&rdquo;</p><ul><li>read var &lt; /path/to/a/file</li></ul></li><li><p>输出重定向符号 &ldquo;>&rdquo; &ldquo;&#187;&rdquo; &ldquo;2>&rdquo; &ldquo;&>&rdquo;</p><ul><li>echo 123 > /path/to/a/file</li></ul></li><li><p>输入和输出重定向组合使用</p><ul><li>cat > /path/to/a/file &#171; EOF</li><li>I am $USER</li><li>EOF</li></ul></li></ul></article></section></div></div><footer class="ui basic center aligned segment" style=background-color:transparent><p>© 2021 kamisama's Blog</p><p>Powered by <a href=https://gohugo.io/ target=_blank>Hugo</a> with theme <a href=https://github.com/g1eny0ung/hugo-theme-dream target=_blank>Dream</a>.</p></footer></div></section><section class=back><div class=dream-max-width><header class="ui basic very padded segment dream-header"><div class="ui small circular image"><img src=/me/gl.png alt=avatar></div><div class=content><h1 class="ui medium header">guole's Blog<span class="sub header">保持理智，保持思考，相信明天。</span></h1><article class="ui horizontal list"><a class=item href=/posts><i class="archive icon" title=归档></i></a>
<a class=item href=/categories><i class="th list icon" title=所有分类></i></a>
<a class=item href=/tags><i class="tags icon" title=所有标签></i></a></article><div class=dream-tags><a class="ui label" href=/tags/vim/ title=VIM>VIM</a></div></div></header><div class="ui relaxed grid dream-grid dream-back"><div class="sixteen wide mobile eight wide tablet four wide computer column dream-column"><article class="ui segment"><div class="ui medium header">社交链接</div><nav class="ui secondary menu dream-menu dream-socials"><div class=item><a href=/index.xml><i class="large rss square icon" title=RSS></i></a></div></nav></article></div><div class="sixteen wide mobile eight wide tablet four wide computer column dream-column"><article class="ui segment"><a rel=license href=http://creativecommons.org/licenses/by-nc-sa/4.0/><img alt=知识共享许可协议 style=border-width:0 src=https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png></a><br>本作品采用<a rel=license href=http://creativecommons.org/licenses/by-nc-sa/4.0/>知识共享署名-非商业性使用-相同方式共享 4.0 国际许可协议</a>进行许可。<br><br>背景使用了 <a href=https://www.pexels.com/zh-cn/ target=_blank>Pexels</a> 上 <a href=https://www.pexels.com/zh-cn/@minan1398 target=_blank>Min An</a> 拍摄的<a href=https://www.pexels.com/zh-cn/photo/1454794/ target=_blank>图片</a>。</article></div></div></div></section></div></div><script src=https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js></script><script src=https://cdn.jsdelivr.net/npm/semantic-ui@2.4.2/dist/semantic.min.js></script><div class="ui segment" id=dream-search><div class="ui search"><div class="ui transparent input"><input class=prompt type=text placeholder=搜索></div><div class=results></div></div></div><script>$(document).ready(function(){$.getJSON('https://queenofbugs.github.io//index.json',function(a){$('.ui.search').search({source:a,searchFields:['title'],showNoResults:!1})})})</script><script src=/js/search.js></script><script>window.background="#fff",window.defaultDark=null,window.backgroundDark=null,window.backgroundImageDark="/me/background.jpg",window.darkNav=!0,window.maxTags=null,window.hasTwitterEmbed=null,window.fixedNav=null,window.hasTwitterEmbed&&(window.twttr=function(c,d,e){var b,f=c.getElementsByTagName(d)[0],a=window.twttr||{};return c.getElementById(e)?a:(b=c.createElement(d),b.id=e,b.src='https://platform.twitter.com/widgets.js',f.parentNode.insertBefore(b,f),a._e=[],a.ready=function(b){a._e.push(b)},a)}(document,'script','twitter-wjs'))</script><script src=https://cdn.jsdelivr.net/npm/overlayscrollbars@1.13.1/js/jquery.overlayScrollbars.min.js></script><script src=/js/header.js></script><script src=/js/main.js></script><script src=/js/theme.js></script><script src=https://cdn.jsdelivr.net/npm/luxon@1.26.0/build/global/luxon.min.js></script><script>format();function format(){$('span[data-format="luxon"]').each(function(){var a=$(this).text();$(this).text(luxon.DateTime.fromISO(a,{locale:"zh"}).toFormat("yyyy年MM月dd日"))})}</script><script src=/js/scrollToTop.js></script><script src=https://cdn.jsdelivr.net/npm/html2canvas@1.0.0-rc.1/dist/html2canvas.min.js></script><script src=/js/post.js defer></script></body></html>