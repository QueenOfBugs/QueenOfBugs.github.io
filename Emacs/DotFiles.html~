<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en">
<head>
<!-- 2022-01-03 Mon 20:35 -->
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>用org-mode配置所有dotfile</title>
<meta name="generator" content="Org mode" />
<meta name="author" content="kamisama" />
<style type="text/css">
 <!--/*--><![CDATA[/*><!--*/
  .title  { text-align: center;
             margin-bottom: .2em; }
  .subtitle { text-align: center;
              font-size: medium;
              font-weight: bold;
              margin-top:0; }
  .todo   { font-family: monospace; color: red; }
  .done   { font-family: monospace; color: green; }
  .priority { font-family: monospace; color: orange; }
  .tag    { background-color: #eee; font-family: monospace;
            padding: 2px; font-size: 80%; font-weight: normal; }
  .timestamp { color: #bebebe; }
  .timestamp-kwd { color: #5f9ea0; }
  .org-right  { margin-left: auto; margin-right: 0px;  text-align: right; }
  .org-left   { margin-left: 0px;  margin-right: auto; text-align: left; }
  .org-center { margin-left: auto; margin-right: auto; text-align: center; }
  .underline { text-decoration: underline; }
  #postamble p, #preamble p { font-size: 90%; margin: .2em; }
  p.verse { margin-left: 3%; }
  pre {
    border: 1px solid #ccc;
    box-shadow: 3px 3px 3px #eee;
    padding: 8pt;
    font-family: monospace;
    overflow: auto;
    margin: 1.2em;
  }
  pre.src {
    position: relative;
    overflow: auto;
    padding-top: 1.2em;
  }
  pre.src:before {
    display: none;
    position: absolute;
    background-color: white;
    top: -10px;
    right: 10px;
    padding: 3px;
    border: 1px solid black;
  }
  pre.src:hover:before { display: inline; margin-top: 14px;}
  /* Languages per Org manual */
  pre.src-asymptote:before { content: 'Asymptote'; }
  pre.src-awk:before { content: 'Awk'; }
  pre.src-C:before { content: 'C'; }
  /* pre.src-C++ doesn't work in CSS */
  pre.src-clojure:before { content: 'Clojure'; }
  pre.src-css:before { content: 'CSS'; }
  pre.src-D:before { content: 'D'; }
  pre.src-ditaa:before { content: 'ditaa'; }
  pre.src-dot:before { content: 'Graphviz'; }
  pre.src-calc:before { content: 'Emacs Calc'; }
  pre.src-emacs-lisp:before { content: 'Emacs Lisp'; }
  pre.src-fortran:before { content: 'Fortran'; }
  pre.src-gnuplot:before { content: 'gnuplot'; }
  pre.src-haskell:before { content: 'Haskell'; }
  pre.src-hledger:before { content: 'hledger'; }
  pre.src-java:before { content: 'Java'; }
  pre.src-js:before { content: 'Javascript'; }
  pre.src-latex:before { content: 'LaTeX'; }
  pre.src-ledger:before { content: 'Ledger'; }
  pre.src-lisp:before { content: 'Lisp'; }
  pre.src-lilypond:before { content: 'Lilypond'; }
  pre.src-lua:before { content: 'Lua'; }
  pre.src-matlab:before { content: 'MATLAB'; }
  pre.src-mscgen:before { content: 'Mscgen'; }
  pre.src-ocaml:before { content: 'Objective Caml'; }
  pre.src-octave:before { content: 'Octave'; }
  pre.src-org:before { content: 'Org mode'; }
  pre.src-oz:before { content: 'OZ'; }
  pre.src-plantuml:before { content: 'Plantuml'; }
  pre.src-processing:before { content: 'Processing.js'; }
  pre.src-python:before { content: 'Python'; }
  pre.src-R:before { content: 'R'; }
  pre.src-ruby:before { content: 'Ruby'; }
  pre.src-sass:before { content: 'Sass'; }
  pre.src-scheme:before { content: 'Scheme'; }
  pre.src-screen:before { content: 'Gnu Screen'; }
  pre.src-sed:before { content: 'Sed'; }
  pre.src-sh:before { content: 'shell'; }
  pre.src-sql:before { content: 'SQL'; }
  pre.src-sqlite:before { content: 'SQLite'; }
  /* additional languages in org.el's org-babel-load-languages alist */
  pre.src-forth:before { content: 'Forth'; }
  pre.src-io:before { content: 'IO'; }
  pre.src-J:before { content: 'J'; }
  pre.src-makefile:before { content: 'Makefile'; }
  pre.src-maxima:before { content: 'Maxima'; }
  pre.src-perl:before { content: 'Perl'; }
  pre.src-picolisp:before { content: 'Pico Lisp'; }
  pre.src-scala:before { content: 'Scala'; }
  pre.src-shell:before { content: 'Shell Script'; }
  pre.src-ebnf2ps:before { content: 'ebfn2ps'; }
  /* additional language identifiers per "defun org-babel-execute"
       in ob-*.el */
  pre.src-cpp:before  { content: 'C++'; }
  pre.src-abc:before  { content: 'ABC'; }
  pre.src-coq:before  { content: 'Coq'; }
  pre.src-groovy:before  { content: 'Groovy'; }
  /* additional language identifiers from org-babel-shell-names in
     ob-shell.el: ob-shell is the only babel language using a lambda to put
     the execution function name together. */
  pre.src-bash:before  { content: 'bash'; }
  pre.src-csh:before  { content: 'csh'; }
  pre.src-ash:before  { content: 'ash'; }
  pre.src-dash:before  { content: 'dash'; }
  pre.src-ksh:before  { content: 'ksh'; }
  pre.src-mksh:before  { content: 'mksh'; }
  pre.src-posh:before  { content: 'posh'; }
  /* Additional Emacs modes also supported by the LaTeX listings package */
  pre.src-ada:before { content: 'Ada'; }
  pre.src-asm:before { content: 'Assembler'; }
  pre.src-caml:before { content: 'Caml'; }
  pre.src-delphi:before { content: 'Delphi'; }
  pre.src-html:before { content: 'HTML'; }
  pre.src-idl:before { content: 'IDL'; }
  pre.src-mercury:before { content: 'Mercury'; }
  pre.src-metapost:before { content: 'MetaPost'; }
  pre.src-modula-2:before { content: 'Modula-2'; }
  pre.src-pascal:before { content: 'Pascal'; }
  pre.src-ps:before { content: 'PostScript'; }
  pre.src-prolog:before { content: 'Prolog'; }
  pre.src-simula:before { content: 'Simula'; }
  pre.src-tcl:before { content: 'tcl'; }
  pre.src-tex:before { content: 'TeX'; }
  pre.src-plain-tex:before { content: 'Plain TeX'; }
  pre.src-verilog:before { content: 'Verilog'; }
  pre.src-vhdl:before { content: 'VHDL'; }
  pre.src-xml:before { content: 'XML'; }
  pre.src-nxml:before { content: 'XML'; }
  /* add a generic configuration mode; LaTeX export needs an additional
     (add-to-list 'org-latex-listings-langs '(conf " ")) in .emacs */
  pre.src-conf:before { content: 'Configuration File'; }

  table { border-collapse:collapse; }
  caption.t-above { caption-side: top; }
  caption.t-bottom { caption-side: bottom; }
  td, th { vertical-align:top;  }
  th.org-right  { text-align: center;  }
  th.org-left   { text-align: center;   }
  th.org-center { text-align: center; }
  td.org-right  { text-align: right;  }
  td.org-left   { text-align: left;   }
  td.org-center { text-align: center; }
  dt { font-weight: bold; }
  .footpara { display: inline; }
  .footdef  { margin-bottom: 1em; }
  .figure { padding: 1em; }
  .figure p { text-align: center; }
  .equation-container {
    display: table;
    text-align: center;
    width: 100%;
  }
  .equation {
    vertical-align: middle;
  }
  .equation-label {
    display: table-cell;
    text-align: right;
    vertical-align: middle;
  }
  .inlinetask {
    padding: 10px;
    border: 2px solid gray;
    margin: 10px;
    background: #ffffcc;
  }
  #org-div-home-and-up
   { text-align: right; font-size: 70%; white-space: nowrap; }
  textarea { overflow-x: auto; }
  .linenr { font-size: smaller }
  .code-highlighted { background-color: #ffff00; }
  .org-info-js_info-navigation { border-style: none; }
  #org-info-js_console-label
    { font-size: 10px; font-weight: bold; white-space: nowrap; }
  .org-info-js_search-highlight
    { background-color: #ffff00; color: #000000; font-weight: bold; }
  .org-svg { width: 90%; }
  /*]]>*/-->
</style>
<script type="text/javascript">
// @license magnet:?xt=urn:btih:e95b018ef3580986a04669f1b5879592219e2a7a&dn=public-domain.txt Public Domain
<!--/*--><![CDATA[/*><!--*/
     function CodeHighlightOn(elem, id)
     {
       var target = document.getElementById(id);
       if(null != target) {
         elem.classList.add("code-highlighted");
         target.classList.add("code-highlighted");
       }
     }
     function CodeHighlightOff(elem, id)
     {
       var target = document.getElementById(id);
       if(null != target) {
         elem.classList.remove("code-highlighted");
         target.classList.remove("code-highlighted");
       }
     }
    /*]]>*///-->
// @license-end
</script>
</head>
<body>
<div id="content">
<h1 class="title">用org-mode配置所有dotfile</h1>
<div id="table-of-contents">
<h2>Table of Contents</h2>
<div id="text-table-of-contents">
<ul>
<li><a href="#org140ffc5">1. 用org-babel配置所有的dotfile</a>
<ul>
<li><a href="#org1196555">1.1. Org-babel</a></li>
<li><a href="#org868f528">1.2. 将一个代码块的执行结果或返回值传递给另一个代码块</a></li>
<li><a href="#org8d137cb">1.3. 每次保存这个文件自动执行 <code>org-bable-tangle</code></a></li>
</ul>
</li>
<li><a href="#orgd637cac">2. Emacs</a>
<ul>
<li><a href="#orga91c943">2.1. 显示emacs启动时间</a></li>
<li><a href="#org8eb7884">2.2. Native Compilation</a></li>
<li><a href="#org07b2116">2.3. 包管理工具</a></li>
<li><a href="#org443ac42">2.4. 默认编码格式</a></li>
<li><a href="#org7569f3e">2.5. Server Mode</a></li>
<li><a href="#orgc22f5b8">2.6. 查看启动过程耗时</a></li>
<li><a href="#orgebc73a4">2.7. 基本的设置</a>
<ul>
<li><a href="#orgcc6e8d3">2.7.1. 取消初始界面的菜单,工具栏,滚动条等</a></li>
<li><a href="#org92806bd">2.7.2. 优化滚动的表现</a></li>
<li><a href="#orgacf3d2b">2.7.3. 窗口透明度和最大化</a></li>
<li><a href="#orgec122ea">2.7.4. 字体设置</a></li>
<li><a href="#org9b45fa3">2.7.5. 状态栏设置</a></li>
<li><a href="#org19a5ebd">2.7.6. 更好的括号展示</a></li>
<li><a href="#org59bba82">2.7.7. doom主题</a></li>
<li><a href="#orgf0dba75">2.7.8. 行号设置</a></li>
<li><a href="#orgdf2868e">2.7.9. Workspace</a></li>
<li><a href="#orgad9419e">2.7.10. NOtifications</a></li>
<li><a href="#org3d2ef7e">2.7.11. Auto-Saving changed files</a></li>
<li><a href="#orgd75b3e9">2.7.12. Auto-Reverting Changed Files</a></li>
<li><a href="#org9b7db11">2.7.13. UI Toggles</a></li>
</ul>
</li>
<li><a href="#orgefb895c">2.8. 按键设置</a>
<ul>
<li><a href="#orgc328ae2">2.8.1. 查看使用了哪些命令</a></li>
<li><a href="#orgb022270">2.8.2. 取消ESC作为 <code>M-x</code> 的前缀按键,将其设置为和Vim类似的退出命令 <code>C-g</code></a></li>
<li><a href="#org747f721">2.8.3. 取消 <code>C-u</code> 作为 <code>[count]</code> 的作用,因为要使用Vim的 <code>C-u</code> 做翻页</a></li>
<li><a href="#org0f608a4">2.8.4. Evil</a></li>
</ul>
</li>
<li><a href="#org61daf15">2.9. 编辑设置</a>
<ul>
<li><a href="#org431a0d6">2.9.1. Tab Width</a></li>
<li><a href="#orgfa88493">2.9.2. Use spaces instead of tabs for indnetation</a></li>
<li><a href="#org173aa6b">2.9.3. Commenting Lines</a></li>
<li><a href="#orgf0237f4">2.9.4. Automatically Clean whitespace</a></li>
</ul>
</li>
<li><a href="#org65e7843">2.10. 按键面板</a></li>
<li><a href="#orga07e93e">2.11. 按键绑定</a>
<ul>
<li><a href="#org890c4f7">2.11.1. general.el 用来管理快捷键绑定</a></li>
<li><a href="#org2e20408">2.11.2. hydra 来绑定快捷键</a></li>
<li><a href="#org5c958f7">2.11.3. Evil 快捷键绑定</a></li>
</ul>
</li>
<li><a href="#org9532c2d">2.12. 文件浏览器</a></li>
<li><a href="#org4d82cb2">2.13. Minibuffer补全(Emacs 命令补全)</a></li>
<li><a href="#orge5efaf9">2.14. Development</a>
<ul>
<li><a href="#org3c4880d">2.14.1. Lsp-mode</a></li>
<li><a href="#org4b399bb">2.14.2. Python<sub>settings</sub></a></li>
<li><a href="#orgb94df98">2.14.3. Format python code</a></li>
<li><a href="#org5c45b7d">2.14.4. Format All</a></li>
<li><a href="#org7816769">2.14.5. Elpy &#x2013; IDE for py</a></li>
</ul>
</li>
<li><a href="#org5f7bd4e">2.15. Orgmode</a>
<ul>
<li><a href="#org91ccda9">2.15.1. CodeBlock模版</a></li>
<li><a href="#orgfb961fb">2.15.2. outline</a></li>
<li><a href="#orga6d5de1">2.15.3. Org-roam</a></li>
<li><a href="#org447230f">2.15.4. Org-mode</a></li>
<li><a href="#org9008cb8">2.15.5. Pomodoro</a></li>
<li><a href="#org69c2d14">2.15.6. tracking habits</a></li>
<li><a href="#org71d2fcf">2.15.7. Auto insert newline</a></li>
<li><a href="#org78d8a60">2.15.8. org-capture-template</a></li>
<li><a href="#org635c549">2.15.9. Encrypt</a></li>
</ul>
</li>
<li><a href="#orgbb284d9">2.16. Productivity</a>
<ul>
<li><a href="#org3c02f08">2.16.1. 括号补全</a></li>
<li><a href="#orgcc3e6af">2.16.2. Snippet</a></li>
</ul>
</li>
<li><a href="#org6560467">2.17. Ebook</a></li>
<li><a href="#org95f47cf">2.18. Magit</a></li>
<li><a href="#org1b71a63">2.19. Save Emacs Sessions</a></li>
</ul>
</li>
</ul>
</div>
</div>

<div id="outline-container-org140ffc5" class="outline-2">
<h2 id="org140ffc5"><span class="section-number-2">1</span> 用org-babel配置所有的dotfile</h2>
<div class="outline-text-2" id="text-1">
</div>
<div id="outline-container-org1196555" class="outline-3">
<h3 id="org1196555"><span class="section-number-3">1.1</span> Org-babel</h3>
<div class="outline-text-3" id="text-1-1">
<p>
org-mode 可以执行代码块用的是org-babel的功能
<code>org-babel-tangle(C-c C-v t)</code> 是一个macs内置的方法,用来将org文件中的代码块写入到指定的文件中,理论上可以利用这个方法配置一切基于文本文件配置的软件
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(message <span style="font-style: italic;">"some text "</span>)
</pre>
</div>

<blockquote>
<p>
要让这个org文件能起到配置作用:
</p>
<ul class="org-ul">
<li>头信息中配置好代码块tangle的目标文件</li>
<li>想对其他语言的代码块也生效需要配置 <code>org-babel-do-load-languages</code></li>
</ul>
</blockquote>

<p>
上面的例子里在代码块的 <code>:tangle</code> 属性中设置了目标文件的位置，如果代码块很多，总不能每一个都手动去指定吧，这里就可以用到org文件的头信息，
<code>#+PROPERTY: header-args:emacs-lisp :tangle ~/.emacs.d/init.el</code>,就像这个文件的头信息一样，将 emacs-lisp代码块的 <code>tangle</code> 属性设置为一个默认值，这个属性被所有 emacs-lisp 代码块继承.
和OB思想一样，如果代码块另外指定了目标文件的位置，那就会使用指定的，而不是头信息的默认属性.
</p>
</div>
</div>

<div id="outline-container-org868f528" class="outline-3">
<h3 id="org868f528"><span class="section-number-3">1.2</span> 将一个代码块的执行结果或返回值传递给另一个代码块</h3>
<div class="outline-text-3" id="text-1-2">
<p>
eamcs默认执行的只有emacs-lisp语言的代码块,开启其他语言的代码块执行功能需要添加配置:
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(org-babel-do-load-languages
 'org-babel-load-languages
 '((emacs-lisp . t)
   (python . t)
   (dot . t)
   (shell . t)
   <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(browser . t)</span>
   (js . t)
   ))
(<span style="font-weight: bold;">push</span> '(<span style="font-style: italic;">"conf-unix"</span> . conf-unix) org-src-lang-modes)
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&#27599;&#27425;&#25191;&#34892;&#19981;&#20250;&#35810;&#38382;&#26159;&#21542;&#25191;&#34892;</span>
(<span style="font-weight: bold;">setq</span> org-confirm-babel-evaluate nil)
<span style="font-weight: bold; font-style: italic;">;;</span><span style="font-weight: bold; font-style: italic;">(message "hello")</span>
</pre>
</div>

<div class="org-src-container">
<pre class="src src-python" id="org55ac8e4"><span style="font-weight: bold;">import</span> random
<span style="font-weight: bold;">return</span> random.randint(0,100)
</pre>
</div>
<p>
上面的代码块有名字 <code>block_name</code>,下面载配置文件的过程就是执行一系列emacs-lisp的过程,所以有时候顺序很重要
</p>
</div>
</div>

<div id="outline-container-org8d137cb" class="outline-3">
<h3 id="org8d137cb"><span class="section-number-3">1.3</span> 每次保存这个文件自动执行 <code>org-bable-tangle</code></h3>
<div class="outline-text-3" id="text-1-3">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">efs/org-babel-tangle-config</span>()
  (<span style="font-weight: bold;">when</span> (string-equal (buffer-file-name)
                      (expand-file-name <span style="font-style: italic;">"~/MyLife/Emacs/DotFiles.org"</span>))
    (<span style="font-weight: bold;">let</span> ((org-confirm-babel-evaluate nil))
      (org-babel-tangle))))
(add-hook 'org-mode-hook (<span style="font-weight: bold;">lambda</span> () (add-hook 'after-save-hook #'efs/org-babel-tangle-config)))
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-orgd637cac" class="outline-2">
<h2 id="orgd637cac"><span class="section-number-2">2</span> Emacs</h2>
<div class="outline-text-2" id="text-2">
</div>
<div id="outline-container-orga91c943" class="outline-3">
<h3 id="orga91c943"><span class="section-number-3">2.1</span> 显示emacs启动时间</h3>
<div class="outline-text-3" id="text-2-1">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">The default is 800 kilobytes.  Measured in bytes.</span>
(<span style="font-weight: bold;">setq</span> gc-cons-threshold (* 50 1000 1000))

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Profile emacs startup</span>
(add-hook 'emacs-startup-hook
          (<span style="font-weight: bold;">lambda</span> ()
            (message <span style="font-style: italic;">"*** Emacs loaded in %s with %d garbage collections."</span>
                     (format <span style="font-style: italic;">"%.2f seconds"</span>
                             (float-time
                              (time-subtract after-init-time before-init-time)))
                     gcs-done)))
</pre>
</div>
</div>
</div>

<div id="outline-container-org8eb7884" class="outline-3">
<h3 id="org8eb7884"><span class="section-number-3">2.2</span> Native Compilation</h3>
<div class="outline-text-3" id="text-2-2">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Silence compiler warnings as they can be pretty disruptive</span>
(<span style="font-weight: bold;">setq</span> comp-async-report-warnings-errors nil)
</pre>
</div>
</div>
</div>

<div id="outline-container-org07b2116" class="outline-3">
<h3 id="org07b2116"><span class="section-number-3">2.3</span> 包管理工具</h3>
<div class="outline-text-3" id="text-2-3">
<blockquote>
<p>
这是写给我自己记录用的,免得过些时候忘了写这个配置文件时候的这些想法,看到这里记得把这写碎碎念移到介绍emacs包管理工具或其他合适的地方.
Emacs原生状态又丑由low,完全是上世纪的文本编辑器风格.那为啥会有那么多人用?还被成为是"神之编辑器"?我的使用感受是因为它有强大的社区支持和高度可定制.
Vim也是可定制,但vimscript给我个人的感觉是真的难用,又像是语言又像是配置文件,但emacs不同,它的配置语言emacs-lisp是lisp方言,配置emacs感觉就像是
在自己编写适合自己的编辑器的程序一样,怪不得之前看到一篇写lisp为什么现在不是热门语言的文章说lisp是一门创造其他编程语言的编程语言.基于这种强大的可定制能力,
Emacs的社区成员为我们提供了许多强大的配置,这些配置被整合成一个个包放在Melpa,Elpa等仓库里,类似插件形式可供用户下载使用,Emacs自带的包管理工具我只用过图形界面的,也就是点点点来安装包,
但用点点点的形式不能每次更换环境都靠点点点吧,看了下emacswiki,里面也有emacs自带的包管理工具的配置,好不好用不知道,反正我看的一些教程里都没用.网上emacs大神用的全是可再现的配置文件,跟着大神走总没错吧,在追求性价比这方面,搞编程(懒)的人总是有特殊的想法,
大神的配置总是要达到一次配置,多次使用的目标.
<a href="https://github.com/jwiegley/use-package">use-package</a>就是一位大神因为使用的包太多创建出来的一个包管理工具,尽管大神说这个是用来更好的配置他那80多个包的而不是一个包管理工具,但也是能当包管理工具使的.
我这个配置文件是跟着<a href="https://github.com/daviwil">David Wilson</a>的系列直播视频和他的配置文件学的,尽管他的包管理工具已经换成 <a href="https://github.com/raxod502/straight.el#features">straight.el</a> 了, 但暂时我还是先用着 <code>use-package</code> 再说,而且看介绍, <code>straight.el</code> 是有 <code>use-package</code> 集成的,将来再换应该不难,看David的配置文件也只加了一点额外配置,其他基本没怎么变.
上面是不正经的碎碎念,下面就是正经的配置文件
</p>
</blockquote>

<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&#36825;&#20010;package &#23601;&#26159;emacs&#40664;&#35748;&#30340;&#21253;&#31649;&#29702;&#24037;&#20855;&#20102;(&#21543;)</span>
(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">package</span>)   <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&#36825;&#37324;&#30340;require &#23601;&#20687;&#26159;python&#37324;&#30340;import&#21543;,package&#23601;&#20687;&#26159;module</span>

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&#35774;&#32622;&#21253;&#20179;&#24211;</span>
(<span style="font-weight: bold;">setq</span> package-archives '((<span style="font-style: italic;">"malpa"</span> . <span style="font-style: italic;">"https://melpa.org/packages/"</span>)
                         (<span style="font-style: italic;">"org"</span> . <span style="font-style: italic;">"https://orgmode.org/elpa/"</span>)
                         (<span style="font-style: italic;">"elpa"</span> . <span style="font-style: italic;">"https://elpa.gnu.org/packages/"</span>)))

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&#35774;&#32622;&#23436;&#20179;&#24211;&#21518;&#35201;&#21021;&#22987;&#21270;&#19968;&#19979;&#20179;&#24211;,&#20877;&#21435;&#25191;&#34892;&#19979;&#36733;&#21253;&#25110;&#32773;&#20854;&#20182;&#21160;&#20316;,&#20351;&#29992;&#36807;linux&#21253;&#31649;&#29702;&#24037;&#20855;&#30340;&#24212;&#35813;&#19981;&#38476;&#29983;</span>
(package-initialize)
(<span style="font-weight: bold;">unless</span> package-archive-contents   <span style="font-weight: bold; font-style: italic;">;;</span><span style="font-weight: bold; font-style: italic;">&#22914;&#26524;&#28304;&#22836;&#20179;&#24211;&#30340;&#20449;&#24687;&#27809;&#26377;&#32531;&#23384;&#21040;&#26412;&#22320;&#23601;&#25191;&#34892;package-refresh-contents&#32531;&#23384;&#19968;&#19979;,&#30456;&#24403;&#19982;apt update&#21543;</span>
  (package-refresh-contents))
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Initialize use-package on non-Linux platforms,&#36825;&#26159;&#22312;&#38750;linux&#24179;&#21488;&#19978;,&#21487;&#33021;use-package&#19981;&#26159;emacs&#20869;&#32622;&#30340;&#21253;,&#37027;&#23601;&#38656;&#35201;&#20808;&#19979;&#36733;&#25165;&#33021;&#20351;&#29992;</span>
(<span style="font-weight: bold;">unless</span> (package-installed-p 'use-package) <span style="font-weight: bold; font-style: italic;">;;</span><span style="font-weight: bold; font-style: italic;">&#26816;&#27979;&#19968;&#19979;use-package&#26159;&#21542;&#23433;&#35013;&#20102;,&#27809;&#35013;&#23601;&#35013;&#19968;&#19979;&#21591;</span>
  (package-install 'use-package))

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&#21040;&#36825;&#37324;&#23601;&#21487;&#20197;&#24320;&#22987;&#20351;&#29992; use-package &#20102;</span>
(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">use-package</span>)
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&#40664;&#35748;&#21152;&#36733;&#27599;&#19968;&#20010;use-package&#31649;&#29702;&#30340;&#21253;,&#31561;&#20110;&#26159;&#27599;&#19968;&#20010;use-package&#37324;&#21152;&#19978;:ensure</span>
(<span style="font-weight: bold;">setq</span> use-package-always-ensure t)
</pre>
</div>
</div>
</div>

<div id="outline-container-org443ac42" class="outline-3">
<h3 id="org443ac42"><span class="section-number-3">2.4</span> 默认编码格式</h3>
<div class="outline-text-3" id="text-2-4">
<p>
避免windows上可能会出现的编码错误
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(set-default-coding-systems 'utf-8)
</pre>
</div>
</div>
</div>
<div id="outline-container-org7569f3e" class="outline-3">
<h3 id="org7569f3e"><span class="section-number-3">2.5</span> Server Mode</h3>
<div class="outline-text-3" id="text-2-5">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(server-start)
</pre>
</div>
</div>
</div>
<div id="outline-container-orgc22f5b8" class="outline-3">
<h3 id="orgc22f5b8"><span class="section-number-3">2.6</span> 查看启动过程耗时</h3>
<div class="outline-text-3" id="text-2-6">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package benchmark-init
  <span style="font-weight: bold;">:ensure</span> t
  <span style="font-weight: bold;">:config</span>
  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">To disable collection of benchmark data after init is done.</span>
  (add-hook 'after-init-hook 'benchmark-init/deactivate))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgebc73a4" class="outline-3">
<h3 id="orgebc73a4"><span class="section-number-3">2.7</span> 基本的设置</h3>
<div class="outline-text-3" id="text-2-7">
</div>
<div id="outline-container-orgcc6e8d3" class="outline-4">
<h4 id="orgcc6e8d3"><span class="section-number-4">2.7.1</span> 取消初始界面的菜单,工具栏,滚动条等</h4>
<div class="outline-text-4" id="text-2-7-1">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> inhibit-startup-message t)
(scroll-bar-mode 0)              <span style="font-weight: bold; font-style: italic;">;</span><span style="font-weight: bold; font-style: italic;">Disable visible scrollbar</span>
(tool-bar-mode 0)                <span style="font-weight: bold; font-style: italic;">;</span><span style="font-weight: bold; font-style: italic;">Disable the toolbar</span>
(tooltip-mode 0)                 <span style="font-weight: bold; font-style: italic;">;</span><span style="font-weight: bold; font-style: italic;">Disable tooltips</span>
(set-fringe-mode 10)             <span style="font-weight: bold; font-style: italic;">;</span><span style="font-weight: bold; font-style: italic;">Give some breathing room</span>
(menu-bar-mode 0)                <span style="font-weight: bold; font-style: italic;">;</span><span style="font-weight: bold; font-style: italic;">Disale the menu bar</span>
<span style="font-weight: bold; font-style: italic;">;;</span><span style="font-weight: bold; font-style: italic;">set up the visible bell</span>
(<span style="font-weight: bold;">setq</span> visible-bell t)
</pre>
</div>
</div>
</div>

<div id="outline-container-org92806bd" class="outline-4">
<h4 id="org92806bd"><span class="section-number-4">2.7.2</span> 优化滚动的表现</h4>
<div class="outline-text-4" id="text-2-7-2">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> mouse-wheel-scroll-amount '(1 ((shift) . 1))) <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">one line at a time</span>
(<span style="font-weight: bold;">setq</span> mouse-wheel-progressive-speed nil) <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">don't accelerate scrolling</span>
(<span style="font-weight: bold;">setq</span> mouse-wheel-follow-mouse 't) <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">scroll window under mouse</span>
(<span style="font-weight: bold;">setq</span> scroll-step 1) <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">keyboard scroll one line at a time</span>
(<span style="font-weight: bold;">setq</span> use-dialog-box nil) <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Disable dialog boxes since they weren't working in Mac OSX</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-orgacf3d2b" class="outline-4">
<h4 id="orgacf3d2b"><span class="section-number-4">2.7.3</span> 窗口透明度和最大化</h4>
<div class="outline-text-4" id="text-2-7-3">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(set-frame-parameter (selected-frame) 'alpha '(90 . 90))
(add-to-list 'default-frame-alist '(alpha . (90 . 90)))
(set-frame-parameter (selected-frame) 'fullscreen 'maximized)
(add-to-list 'default-frame-alist '(fullscreen . maximized))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgec122ea" class="outline-4">
<h4 id="orgec122ea"><span class="section-number-4">2.7.4</span> 字体设置</h4>
<div class="outline-text-4" id="text-2-7-4">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">'han &#30340;&#33050;&#26412;&#31867;&#22411;&#23545;&#24212;CJK&#19977;&#31181;&#35821;&#35328;&#30340;&#23383;&#31526; 'latin &#23545;&#24212;&#33521;&#25991;&#23383;&#31526;</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(set-fontset-font "fontset-default" 'han "Xiaolai Mono SC")</span>

(set-fontset-font <span style="font-style: italic;">"fontset-default"</span> 'han <span style="font-style: italic;">"AR PL UKai CN"</span>)
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Ubuntu Mono &#23383;&#20307;&#33021;&#24456;&#22909;&#30340;&#21644;&#20013;&#25991;1:2&#31561;&#23485;,:font &#23646;&#24615;&#30340;&#20351;&#29992;&#21644;.Xresource &#37324;&#23383;&#20307;&#30340;&#20351;&#29992;&#26041;&#24335;&#19968;&#26679;,&#21482;&#19981;&#36807;&#19981;&#33021;&#25351;&#23450;&#22810;&#20010;&#23383;&#20307;</span>
(set-face-attribute 'default nil <span style="font-weight: bold;">:font</span> <span style="font-style: italic;">"Ubuntu Mono:pixelsize=20"</span>)
</pre>
</div>
</div>
</div>

<div id="outline-container-org9b45fa3" class="outline-4">
<h4 id="org9b45fa3"><span class="section-number-4">2.7.5</span> 状态栏设置</h4>
<div class="outline-text-4" id="text-2-7-5">
</div>
<ol class="org-ol">
<li><a id="orge9e9f7c"></a>Basic Customization<br />
<div class="outline-text-5" id="text-2-7-5-1">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> display-time-format <span style="font-style: italic;">"%H:%M %p %Y-%m-%d %j"</span>
      dispaly-time-default-load-average nil)
<span style="font-weight: bold; font-style: italic;">;;</span><span style="font-weight: bold; font-style: italic;">(setq display-time-format "%l:%M %p %b %y"</span>
<span style="font-weight: bold; font-style: italic;">;;       </span><span style="font-weight: bold; font-style: italic;">dispaly-time-default-load-average nil)</span>
</pre>
</div>
</div>
</li>

<li><a id="org16d6cfd"></a>Enable mode Diminishing<br />
<div class="outline-text-5" id="text-2-7-5-2">
<p>
The diminish package hides pesky minor modes from the modelines.
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package diminish)
</pre>
</div>
</div>
</li>

<li><a id="orge839a07"></a>Smart mode line<br />
<div class="outline-text-5" id="text-2-7-5-3">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package smart-mode-line
  <span style="font-weight: bold;">:disabled</span>
  <span style="font-weight: bold;">:if</span> dw/is-termux
  <span style="font-weight: bold;">:config</span>
  (<span style="font-weight: bold;">setq</span> sml/no-confirm-load-theme t)
  (sml/setup)
  (sml/apply-theme 'respectful)  <span style="font-weight: bold; font-style: italic;">; </span><span style="font-weight: bold; font-style: italic;">Respect the theme colors</span>
  (<span style="font-weight: bold;">setq</span> sml/mode-width 'right
        sml/name-width 60)

  (<span style="font-weight: bold;">setq-default</span> mode-line-format
                `(<span style="font-style: italic;">"%e"</span>
                  ,(<span style="font-weight: bold;">when</span> dw/exwm-enabled
                     '(<span style="font-weight: bold;">:eval</span> (format <span style="font-style: italic;">"[%d] "</span> exwm-workspace-current-index)))
                  mode-line-front-space
                  evil-mode-line-tag
                  mode-line-mule-info
                  mode-line-client
                  mode-line-modified
                  mode-line-remote
                  mode-line-frame-identification
                  mode-line-buffer-identification
                  sml/pos-id-separator
                  (vc-mode vc-mode)
                  <span style="font-style: italic;">" "</span>
                                        <span style="font-weight: bold; font-style: italic;">;</span><span style="font-weight: bold; font-style: italic;">mode-line-position</span>
                  sml/pre-modes-separator
                  mode-line-modes
                  <span style="font-style: italic;">" "</span>
                  mode-line-misc-info))
  (<span style="font-weight: bold;">setq</span> rm-excluded-modes
        (mapconcat
         'identity
                                        <span style="font-weight: bold; font-style: italic;">; </span><span style="font-weight: bold; font-style: italic;">These names must start with a space!</span>
         '(<span style="font-style: italic;">" GitGutter"</span> <span style="font-style: italic;">" MRev"</span> <span style="font-style: italic;">" company"</span>
           <span style="font-style: italic;">" Helm"</span> <span style="font-style: italic;">" Undo-Tree"</span> <span style="font-style: italic;">" Projectile.*"</span> <span style="font-style: italic;">" Z"</span> <span style="font-style: italic;">" Ind"</span>
           <span style="font-style: italic;">" Org-Agenda.*"</span> <span style="font-style: italic;">" ElDoc"</span> <span style="font-style: italic;">" SP/s"</span> <span style="font-style: italic;">" cider.*"</span>)
         <span style="font-style: italic;">"</span><span style="font-weight: bold; font-style: italic;">\\</span><span style="font-weight: bold; font-style: italic;">|</span><span style="font-style: italic;">"</span>)))
</pre>
</div>
</div>
</li>
<li><a id="orgeb31baa"></a>Doom modeline<br />
<div class="outline-text-5" id="text-2-7-5-4">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package minions           <span style="font-weight: bold; font-style: italic;">; </span><span style="font-weight: bold; font-style: italic;">&#38544;&#34255;&#24403;&#21069;&#21551;&#29992;&#20102;&#21738;&#20123;minor mode</span>
  <span style="font-weight: bold;">:hook</span> (doom-modeline-mode . minions-mode))

(use-package all-the-icons)    <span style="font-weight: bold; font-style: italic;">; </span><span style="font-weight: bold; font-style: italic;">modeline &#27491;&#24120;&#23637;&#31034;&#38656;&#35201;&#35768;&#22810;&#22270;&#26631;&#23383;&#20307;&#25903;&#25345;,&#23383;&#20307;&#38656;&#35201;&#20174;github&#19979;&#36733;&#23433;&#35013;</span>

(use-package doom-modeline

  <span style="font-weight: bold;">:init</span>
  (doom-modeline-mode 1)
  <span style="font-weight: bold; font-style: italic;">;;</span><span style="font-weight: bold; font-style: italic;">:after eshell                ; &#30830;&#20445;&#21551;&#21160;eshell&#21518;&#21551;&#21160;doom-modeline,&#23613;&#31649;manjaro-i3&#19978;&#27491;&#20351;&#29992;&#30340;emacs&#19981;&#23384;&#22312;&#36825;&#20010;&#38382;&#39064;</span>
  <span style="font-weight: bold;">:custom-face</span>
  (mode-line ((t (<span style="font-weight: bold;">:height</span> 0.85))))
  (mode-line-inactive ((t (<span style="font-weight: bold;">:height</span> 0.85))))
  <span style="font-weight: bold;">:custom</span>
  (doom-modeline-height 15)
  (doom-modeline-bar-width 6)
  (doom-modeline-lsp t)
  (doom-modeline-github nil)
  (doom-modeline-mu4e nil)
  (doom-modeline-irc nil)
  (doom-modeline-minor-modes t)
  (doom-modeline-persp-name nil)
  (doom-modeline-buffer-file-name-style 'truncate-except-project)
  (doom-modeline-major-mode-icon nil)
  )
</pre>
</div>
</div>
</li>
</ol>
</div>

<div id="outline-container-org19a5ebd" class="outline-4">
<h4 id="org19a5ebd"><span class="section-number-4">2.7.6</span> 更好的括号展示</h4>
<div class="outline-text-4" id="text-2-7-6">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&#25353;&#19981;&#21516;&#39068;&#33394;&#26174;&#31034;&#25104;&#23545;&#25324;&#21495;</span>
(use-package rainbow-delimiters
  <span style="font-weight: bold;">:hook</span> (prog-mode . rainbow-delimiters-mode))
<span style="font-weight: bold; font-style: italic;">;;</span><span style="font-weight: bold; font-style: italic;">&#39640;&#20142;&#24403;&#21069;&#20809;&#26631;&#19979;&#30340;&#25324;&#21495;&#23545;&#24212;&#30340;&#25324;&#21495;</span>
(use-package paren
  <span style="font-weight: bold;">:config</span>
  (set-face-attribute 'show-paren-match-expression nil <span style="font-weight: bold;">:background</span> <span style="font-style: italic;">"#FFFFFF"</span>)
  (show-paren-mode 1))

</pre>
</div>
</div>
</div>

<div id="outline-container-org59bba82" class="outline-4">
<h4 id="org59bba82"><span class="section-number-4">2.7.7</span> doom主题</h4>
<div class="outline-text-4" id="text-2-7-7">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package doom-themes
  <span style="font-weight: bold;">:init</span>
  (load-theme 'doom-palenight t)
  <span style="font-weight: bold;">:config</span>
  (doom-themes-visual-bell-config))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgf0dba75" class="outline-4">
<h4 id="orgf0dba75"><span class="section-number-4">2.7.8</span> 行号设置</h4>
<div class="outline-text-4" id="text-2-7-8">
<div class="org-src-container">
<pre class="src src-emacs-lisp">
(column-number-mode)
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Disable line numbers for some modes</span>
(<span style="font-weight: bold;">dolist</span> (mode '(term-mode-hook
                shell-mode-hook
                eshell-mode-hook
                markdown-mode-hook
                org-mode-hook))
  (add-hook mode (<span style="font-weight: bold;">lambda</span> () (display-line-numbers-mode 0))))

(<span style="font-weight: bold;">dolist</span> (mode '(text-mode-hook
                prog-mode-hook
                conf-mode-hook))
  (add-hook mode (<span style="font-weight: bold;">lambda</span> () (display-line-numbers-mode 1))))

</pre>
</div>
</div>
</div>

<div id="outline-container-orgdf2868e" class="outline-4">
<h4 id="orgdf2868e"><span class="section-number-4">2.7.9</span> Workspace</h4>
<div class="outline-text-4" id="text-2-7-9">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package perspective
  <span style="font-weight: bold;">:demand</span> t
  <span style="font-weight: bold;">:bind</span> ((<span style="font-style: italic;">"C-M-k"</span> . persp-switch)
         (<span style="font-style: italic;">"C-M-n"</span> . persp-next)
         (<span style="font-style: italic;">"C-x k"</span> . persp-kill-buffer*))
  <span style="font-weight: bold;">:custom</span>
  (persp-initial-frame-name <span style="font-style: italic;">"Main"</span>)
  <span style="font-weight: bold;">:config</span>
  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Running `</span><span style="font-weight: bold; font-style: italic; text-decoration: underline;">persp-mode</span><span style="font-weight: bold; font-style: italic;">' multiple times resets the perspective list...</span>
  (<span style="font-weight: bold;">unless</span> (equal persp-mode t)
    (persp-mode)))
</pre>
</div>
</div>
</div>
<div id="outline-container-orgad9419e" class="outline-4">
<h4 id="orgad9419e"><span class="section-number-4">2.7.10</span> NOtifications</h4>
<div class="outline-text-4" id="text-2-7-10">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package alert
  <span style="font-weight: bold;">:commands</span> alert
  <span style="font-weight: bold;">:config</span>
  (<span style="font-weight: bold;">setq</span> alert-default-style 'notifications))
</pre>
</div>
</div>
</div>
<div id="outline-container-org3d2ef7e" class="outline-4">
<h4 id="org3d2ef7e"><span class="section-number-4">2.7.11</span> Auto-Saving changed files</h4>
<div class="outline-text-4" id="text-2-7-11">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package super-save
  <span style="font-weight: bold;">:defer</span> 1
  <span style="font-weight: bold;">:diminish</span> super-save-mode
  <span style="font-weight: bold;">:config</span>
  (super-save-mode +1)
  (<span style="font-weight: bold;">setq</span> super-save-auto-save-when-idle t) )
</pre>
</div>
</div>
</div>
<div id="outline-container-orgd75b3e9" class="outline-4">
<h4 id="orgd75b3e9"><span class="section-number-4">2.7.12</span> Auto-Reverting Changed Files</h4>
<div class="outline-text-4" id="text-2-7-12">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> global-auto-revert-non-file-buffers t)
(global-auto-revert-mode 1)
</pre>
</div>
</div>
</div>
<div id="outline-container-org9b7db11" class="outline-4">
<h4 id="org9b7db11"><span class="section-number-4">2.7.13</span> UI Toggles</h4>
<div class="outline-text-4" id="text-2-7-13">
<div class="org-src-container">
<pre class="src src-emacs-lisp">
</pre>
</div>
</div>
</div>
</div>
<div id="outline-container-orgefb895c" class="outline-3">
<h3 id="orgefb895c"><span class="section-number-3">2.8</span> 按键设置</h3>
<div class="outline-text-3" id="text-2-8">
</div>
<div id="outline-container-orgc328ae2" class="outline-4">
<h4 id="orgc328ae2"><span class="section-number-4">2.8.1</span> 查看使用了哪些命令</h4>
<div class="outline-text-4" id="text-2-8-1">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package command-log-mode)
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb022270" class="outline-4">
<h4 id="orgb022270"><span class="section-number-4">2.8.2</span> 取消ESC作为 <code>M-x</code> 的前缀按键,将其设置为和Vim类似的退出命令 <code>C-g</code></h4>
<div class="outline-text-4" id="text-2-8-2">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Make ESC quit prompts</span>
(global-set-key (kbd <span style="font-style: italic;">"&lt;escape&gt;"</span>) 'keyboard-escape-quit)

</pre>
</div>
</div>
</div>

<div id="outline-container-org747f721" class="outline-4">
<h4 id="org747f721"><span class="section-number-4">2.8.3</span> 取消 <code>C-u</code> 作为 <code>[count]</code> 的作用,因为要使用Vim的 <code>C-u</code> 做翻页</h4>
<div class="outline-text-4" id="text-2-8-3">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(global-set-key (kbd <span style="font-style: italic;">"C-M-u"</span>) 'universal-argument)
</pre>
</div>
</div>
</div>


<div id="outline-container-org0f608a4" class="outline-4">
<h4 id="org0f608a4"><span class="section-number-4">2.8.4</span> Evil</h4>
<div class="outline-text-4" id="text-2-8-4">
</div>
<ol class="org-ol">
<li><a id="orgc1ffce7"></a>基本的Vim按键设置<br />
<div class="outline-text-5" id="text-2-8-4-1">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package undo-tree
  <span style="font-weight: bold;">:init</span>
  (global-undo-tree-mode 1))

(use-package evil
  <span style="font-weight: bold;">:init</span>
  (<span style="font-weight: bold;">setq</span> evil-want-integration t)
  (<span style="font-weight: bold;">setq</span> evil-want-keybinding nil)
  (<span style="font-weight: bold;">setq</span> evil-want-C-u-scroll t)
  (<span style="font-weight: bold;">setq</span> evil-want-C-i-jump nil)
  (<span style="font-weight: bold;">setq</span> evil-undo-system 'undo-tree)

  <span style="font-weight: bold;">:config</span>
  (evil-mode 1)
  (define-key evil-insert-state-map (kbd <span style="font-style: italic;">"C-g"</span>) 'evil-normal-state)
  (define-key evil-insert-state-map (kbd <span style="font-style: italic;">"C-h"</span>) 'evil-delete-backward-char-and-join)

  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Use visual line motions even outside of visual-line-mode buffers</span>
  <span style="font-weight: bold; font-style: italic;">;;</span><span style="font-weight: bold; font-style: italic;">(evil-global-set-key 'motion "j" 'evil-next-visual-line)</span>
  <span style="font-weight: bold; font-style: italic;">;;</span><span style="font-weight: bold; font-style: italic;">(evil-global-set-key 'motion "k" 'evil-previous-visual-line)</span>

  (evil-set-initial-state 'messages-buffer-mode 'normal)
  (evil-set-initial-state 'dashboard-mode 'normal)
  <span style="font-weight: bold; font-style: italic;">;;</span><span style="font-weight: bold; font-style: italic;">(evil-set-initial-state 'treemacs-mode 'evil-normal-state)</span>
  )

(use-package evil-collection
  <span style="font-weight: bold;">:after</span> evil
  <span style="font-weight: bold;">:config</span>
  (evil-collection-init))

</pre>
</div>
</div>
</li>


<li><a id="org770bac1"></a>绑定"jk"退出插入模式<br />
<div class="outline-text-5" id="text-2-8-4-2">
<div class="org-src-container">
<pre class="src src-emacs-lisp">
(use-package evil-escape
  <span style="font-weight: bold;">:config</span>
  (evil-escape-mode 1)
  (<span style="font-weight: bold;">setq-default</span> evil-escape-key-sequence <span style="font-style: italic;">"jk"</span>)
  (<span style="font-weight: bold;">setq-default</span> evil-escape-delay 0.5))

</pre>
</div>
</div>
</li>


<li><a id="orgd14ec13"></a>绑定&lt;leader&gt;s重新加载配置文件<br />
<div class="outline-text-5" id="text-2-8-4-3">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(evil-set-leader 'normal (kbd "SPC"))</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">This buffer is for text that is not saved, and for Lisp evaluation.</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">To create a file, visit it with &lt;open&gt; and enter text in its buffer.</span>

(<span style="font-weight: bold;">defun</span> <span style="font-weight: bold;">reload-init-file</span> ()
  (<span style="font-weight: bold;">interactive</span>)
  (load-file <span style="font-style: italic;">"~/.emacs.d/init.el"</span>)
  )
(evil-define-key 'normal 'global (kbd <span style="font-style: italic;">"&lt;leader&gt;s"</span>) 'reload-init-file)

</pre>
</div>
</div>
</li>
</ol>
</div>
</div>
<div id="outline-container-org61daf15" class="outline-3">
<h3 id="org61daf15"><span class="section-number-3">2.9</span> 编辑设置</h3>
<div class="outline-text-3" id="text-2-9">
</div>
<div id="outline-container-org431a0d6" class="outline-4">
<h4 id="org431a0d6"><span class="section-number-4">2.9.1</span> Tab Width</h4>
<div class="outline-text-4" id="text-2-9-1">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq-default</span> tab-width 2)
(<span style="font-weight: bold;">setq-default</span> evil-shift-width tab-width)
</pre>
</div>
</div>
</div>
<div id="outline-container-orgfa88493" class="outline-4">
<h4 id="orgfa88493"><span class="section-number-4">2.9.2</span> Use spaces instead of tabs for indnetation</h4>
<div class="outline-text-4" id="text-2-9-2">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq-default</span> indent-tabs-mode nil)
</pre>
</div>
</div>
</div>
<div id="outline-container-org173aa6b" class="outline-4">
<h4 id="org173aa6b"><span class="section-number-4">2.9.3</span> Commenting Lines</h4>
<div class="outline-text-4" id="text-2-9-3">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package evil-nerd-commenter
  <span style="font-weight: bold;">:bind</span> (<span style="font-style: italic;">"M-c"</span> . evilnc-comment-or-uncomment-lines))
</pre>
</div>
</div>
</div>
<div id="outline-container-orgf0237f4" class="outline-4">
<h4 id="orgf0237f4"><span class="section-number-4">2.9.4</span> Automatically Clean whitespace</h4>
<div class="outline-text-4" id="text-2-9-4">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package ws-butler
  <span style="font-weight: bold;">:hook</span> ((text-mode . ws-butler-mode)
         (prog-mode . ws-butler-mode)))

</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org65e7843" class="outline-3">
<h3 id="org65e7843"><span class="section-number-3">2.10</span> 按键面板</h3>
<div class="outline-text-3" id="text-2-10">
<p>
<a href="https://github.com/justbur/emacs-which-key">which-key</a> 根据当前按下的按键展示可用(能)的快捷键组合和对应命令
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">
(use-package which-key
  <span style="font-weight: bold;">:init</span> (which-key-mode)
  <span style="font-weight: bold;">:diminish</span> which-key-mode
  <span style="font-weight: bold;">:config</span>
  (<span style="font-weight: bold;">setq</span> which-key-idle-delay 0.3)) <span style="font-weight: bold; font-style: italic;">;</span><span style="font-weight: bold; font-style: italic;">&#35774;&#32622;&#22810;&#23569;&#24310;&#36831;&#21518;&#35843;&#29992;which-key</span>

</pre>
</div>
</div>
</div>

<div id="outline-container-orga07e93e" class="outline-3">
<h3 id="orga07e93e"><span class="section-number-3">2.11</span> 按键绑定</h3>
<div class="outline-text-3" id="text-2-11">
</div>
<div id="outline-container-org890c4f7" class="outline-4">
<h4 id="org890c4f7"><span class="section-number-4">2.11.1</span> <a href="https://github.com/noctuid/general.el">general.el</a> 用来管理快捷键绑定</h4>
<div class="outline-text-4" id="text-2-11-1">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package general
  <span style="font-weight: bold;">:config</span>
  (general-evil-setup t)
  (general-create-definer rune/leader-keys
                          <span style="font-weight: bold;">:keymaps</span> '(normal insert visual emacs)
                          <span style="font-weight: bold;">:prefix</span> <span style="font-style: italic;">"SPC"</span>
                          <span style="font-weight: bold;">:global-prefix</span> <span style="font-style: italic;">"C-SPC"</span>)

  (rune/leader-keys
   <span style="font-style: italic;">"t"</span>  '(<span style="font-weight: bold;">:ignore</span> t <span style="font-weight: bold;">:which-key</span> <span style="font-style: italic;">"toggles"</span>)
   <span style="font-style: italic;">"tt"</span> '(counsel-load-theme <span style="font-weight: bold;">:which-key</span> <span style="font-style: italic;">"choose theme"</span>)
   <span style="font-style: italic;">"f"</span>  '(<span style="font-weight: bold;">:ignore</span> t <span style="font-weight: bold;">:which-key</span> <span style="font-style: italic;">"file"</span>)
   <span style="font-style: italic;">"ft"</span> '(treemacs <span style="font-weight: bold;">:which-key</span> <span style="font-style: italic;">"file tree"</span>)))

</pre>
</div>
</div>
</div>

<div id="outline-container-org2e20408" class="outline-4">
<h4 id="org2e20408"><span class="section-number-4">2.11.2</span> hydra 来绑定快捷键</h4>
<div class="outline-text-4" id="text-2-11-2">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package general
  <span style="font-weight: bold;">:config</span>
  (general-create-definer rune/leader-keys
                          <span style="font-weight: bold;">:keymaps</span> '(normal insert visual emacs)
                          <span style="font-weight: bold;">:prefix</span> <span style="font-style: italic;">"SPC"</span>
                          <span style="font-weight: bold;">:global-prefix</span> <span style="font-style: italic;">"C-SPC"</span>))


(defhydra hydra-files ()
  <span style="font-weight: bold; font-style: italic;">;;</span><span style="font-weight: bold; font-style: italic;">(interactive)</span>
  <span style="font-weight: bold; font-style: italic;">;;</span><span style="font-weight: bold; font-style: italic;">("f" treemacs "file tree")</span>

  (<span style="font-style: italic;">"t"</span> treemacs <span style="font-weight: bold;">:which-key</span> <span style="font-style: italic;">"file tre"</span>)
  (<span style="font-style: italic;">"l"</span> text-scale-increase <span style="font-style: italic;">"out"</span>))
(defhydra hydra-leader ()
  (<span style="font-style: italic;">"f"</span> hydra-files/body <span style="font-style: italic;">"files"</span> <span style="font-weight: bold;">:exit</span> t))

(rune/leader-keys
 <span style="font-style: italic;">"f"</span> '(hydra-files/body <span style="font-weight: bold;">:which-key</span> <span style="font-style: italic;">"files"</span>)
 )

<span style="font-weight: bold; font-style: italic;">;;</span><span style="font-weight: bold; font-style: italic;">(global-set-key (kbd "SPC") 'hydra-leader/body)</span>
<span style="font-weight: bold; font-style: italic;">;;     </span><span style="font-weight: bold; font-style: italic;">(define-key evil-normal-state-map (kbd "SPC") 'hydra-leader/body)</span>
(defhydra hydra-zoom ()
  <span style="font-style: italic;">"zoom"</span>
  (<span style="font-style: italic;">"g"</span> text-scale-increase <span style="font-style: italic;">"in"</span>)
  (<span style="font-style: italic;">"l"</span> text-scale-decrease <span style="font-style: italic;">"out"</span>))

(global-set-key (kbd <span style="font-style: italic;">"C-c"</span>) 'hydra-zoom/body)

</pre>
</div>
</div>
</div>

<div id="outline-container-org5c958f7" class="outline-4">
<h4 id="org5c958f7"><span class="section-number-4">2.11.3</span> Evil 快捷键绑定</h4>
<div class="outline-text-4" id="text-2-11-3">
<div class="org-src-container">
<pre class="src src-emacs-lisp">

<span style="font-weight: bold; font-style: italic;">;;</span><span style="font-weight: bold; font-style: italic;">(add-hook 'special-mode-hook 'evil-normal-state)</span>
(define-key evil-normal-state-map (kbd <span style="font-style: italic;">"&lt;SPC&gt;ft"</span>) '(<span style="font-style: italic;">"File tree"</span> . treemacs))
(which-key-add-key-based-replacements
  <span style="font-style: italic;">"&lt;SPC&gt;f"</span> <span style="font-style: italic;">"Files"</span>)
<span style="font-weight: bold; font-style: italic;">;;</span><span style="font-weight: bold; font-style: italic;">(define-key evil-normal-state-map (kbd "&lt;SPC&gt;ft")'("File tree" . treemacs))</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org9532c2d" class="outline-3">
<h3 id="org9532c2d"><span class="section-number-3">2.12</span> 文件浏览器</h3>
<div class="outline-text-3" id="text-2-12">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package treemacs
  <span style="font-weight: bold;">:ensure</span> t
  <span style="font-weight: bold;">:defer</span> t)
(use-package treemacs-evil
  <span style="font-weight: bold;">:after</span> (treemacs evil)
  <span style="font-weight: bold;">:ensure</span> t)
</pre>
</div>
</div>
</div>

<div id="outline-container-org4d82cb2" class="outline-3">
<h3 id="org4d82cb2"><span class="section-number-3">2.13</span> Minibuffer补全(Emacs 命令补全)</h3>
<div class="outline-text-3" id="text-2-13">
<p>
Emacs有两种类型的补全，一种是写代码或文本时的补全(text completion),另一种就是使用emacs 命令时的补全(Minibuffer completion).
<a href="https://github.com/kenmcmil/ivy">Ivy</a> 是一个使用minibuffer的补全机制,提供针对emacs命令的各种补全功能,<a href="https://github.com/abo-abo/swiper">swpier</a> 是基于Ivy的更好用的 <code>Isearch</code> 工具, <a href="https://github.com/abo-abo/swiper#counsel">counsel</a> 是基于Ivy的 <code>execute-extended-command</code> (M-x) 增强版本,用正则更方便的选择emacs命令
</p>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package ivy
  <span style="font-weight: bold;">:diminish</span>
  <span style="font-weight: bold;">:bind</span> ((<span style="font-style: italic;">"C-s"</span> . swiper)
         <span style="font-weight: bold;">:map</span> ivy-minibuffer-map
         (<span style="font-style: italic;">"TAB"</span> . ivy-alt-done)
         (<span style="font-style: italic;">"C-l"</span> . ivy-alt-done)
         (<span style="font-style: italic;">"C-j"</span> . ivy-next-line)
         (<span style="font-style: italic;">"C-k"</span> . ivy-previous-line)
         <span style="font-weight: bold;">:map</span> ivy-switch-buffer-map
         (<span style="font-style: italic;">"C-k"</span> . ivy-previous-line)
         (<span style="font-style: italic;">"C-l"</span> . ivy-done)
         (<span style="font-style: italic;">"C-d"</span> . ivy-switch-buffer-kill)
         <span style="font-weight: bold;">:map</span> ivy-reverse-i-search-map
         (<span style="font-style: italic;">"C-k"</span> . ivy-previous-line)
         (<span style="font-style: italic;">"C-d"</span> . ivy-reverse-i-search-kill))
  <span style="font-weight: bold;">:config</span>
  (ivy-mode 1))

(use-package ivy-rich
  <span style="font-weight: bold;">:init</span>
  (ivy-rich-mode 1))

(use-package counsel
  <span style="font-weight: bold;">:bind</span> ((<span style="font-style: italic;">"M-x"</span> . counsel-M-x)
         (<span style="font-style: italic;">"C-x b"</span> . counsel-ibuffer)
         (<span style="font-style: italic;">"C-x C-f"</span> . counsel-find-file)
         <span style="font-weight: bold;">:map</span> minibuffer-local-map
         (<span style="font-style: italic;">"C-r"</span> . 'counsel-minibuffer-history)))
</pre>
</div>
</div>
</div>

<div id="outline-container-orge5efaf9" class="outline-3">
<h3 id="orge5efaf9"><span class="section-number-3">2.14</span> Development</h3>
<div class="outline-text-3" id="text-2-14">
</div>
<div id="outline-container-org3c4880d" class="outline-4">
<h4 id="org3c4880d"><span class="section-number-4">2.14.1</span> Lsp-mode</h4>
<div class="outline-text-4" id="text-2-14-1">
</div>
<ol class="org-ol">
<li><a id="org8f2ea1b"></a>Lsp<br />
<div class="outline-text-5" id="text-2-14-1-1">
<div class="org-src-container">
<pre class="src src-emacs-lisp">

(use-package lsp-mode
  <span style="font-weight: bold;">:init</span>
  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">set prefix for lsp-command-keymap (few alternatives - "C-l", "C-c l")</span>
  (<span style="font-weight: bold;">setq</span> lsp-keymap-prefix <span style="font-style: italic;">"C-c l"</span>)
  <span style="font-weight: bold;">:hook</span> (<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">replace XXX-mode with concrete major-mode(e. g. python-mode)</span>
         (python-mode . lsp)
         (json-mode .lsp)
         (html-mode .lsp)
         <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">if you want which-key integration</span>
         (lsp-mode . lsp-enable-which-key-integration))
  <span style="font-weight: bold;">:commands</span> lsp lsp-deferred)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">optionally</span>

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">company provide completion function</span>
(use-package company)

(use-package flycheck
  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">:init (global-flycheck-mode)</span>
  )

(use-package lsp-ui <span style="font-weight: bold;">:commands</span> lsp-ui-mode)
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">if you are helm user</span>
<span style="font-weight: bold; font-style: italic;">;;</span><span style="font-weight: bold; font-style: italic;">(use-package helm-lsp :commands helm-lsp-workspace-symbol)</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">if you are ivy user</span>
(use-package lsp-ivy <span style="font-weight: bold;">:commands</span> lsp-ivy-workspace-symbol)
(use-package lsp-treemacs <span style="font-weight: bold;">:commands</span> lsp-treemacs-errors-list)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">optionally if you want to use debugger</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(use-package dap-mode</span>
  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">:defer)</span>

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(use-package dap-LANGUAGE) to load the dap adapter for your language</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(require 'dap-python)</span>

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">optional if you want which-key integration</span>
<span style="font-weight: bold; font-style: italic;">;;</span><span style="font-weight: bold; font-style: italic;">(use-package which-key</span>
<span style="font-weight: bold; font-style: italic;">;;</span><span style="font-weight: bold; font-style: italic;">:config</span>
<span style="font-weight: bold; font-style: italic;">;;</span><span style="font-weight: bold; font-style: italic;">(which-key-mode))</span>

</pre>
</div>

<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package lsp-mode
  <span style="font-weight: bold;">:init</span>
  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">set prefix for lsp-command-keymap (few alternatives - "C-l", "C-c l")</span>
  (<span style="font-weight: bold;">setq</span> lsp-keymap-prefix <span style="font-style: italic;">"C-c l"</span>)
  <span style="font-weight: bold;">:hook</span> (<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">replace XXX-mode with concrete major-mode(e. g. python-mode)</span>
         (python-mode . lsp-defer)
         <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">if you want which-key integration</span>
         (lsp-mode . lsp-enable-which-key-integration))
  <span style="font-weight: bold;">:commands</span> lsp)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">optionally</span>
(use-package lsp-ui <span style="font-weight: bold;">:commands</span> lsp-ui-mode)
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">if you are helm user</span>
<span style="font-weight: bold; font-style: italic;">;;</span><span style="font-weight: bold; font-style: italic;">(use-package helm-lsp :commands helm-lsp-workspace-symbol)</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">if you are ivy user</span>
(use-package lsp-ivy <span style="font-weight: bold;">:commands</span> lsp-ivy-workspace-symbol)
(use-package lsp-treemacs <span style="font-weight: bold;">:commands</span> lsp-treemacs-errors-list)

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">optionally if you want to use debugger</span>
(use-package dap-mode)
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(use-package dap-LANGUAGE) to load the dap adapter for your language</span>

<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">optional if you want which-key integration</span>
<span style="font-weight: bold; font-style: italic;">;;</span><span style="font-weight: bold; font-style: italic;">(use-package which-key</span>
<span style="font-weight: bold; font-style: italic;">;;</span><span style="font-weight: bold; font-style: italic;">:config</span>
<span style="font-weight: bold; font-style: italic;">;;</span><span style="font-weight: bold; font-style: italic;">(which-key-mode))</span>
</pre>
</div>
</div>
</li>

<li><a id="org12a145a"></a>Lsp for python<br />
<ol class="org-ol">
<li><a id="orgfe24a03"></a>Pylsp<br />
<div class="outline-text-6" id="text-2-14-1-2-1">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> lsp-pylsp-plugins-yapf-enabled t)
(<span style="font-weight: bold;">setq</span> lsp-pylsp-plugins-jedi-use-pyenv-environment t)
</pre>
</div>
</div>
</li>
<li><a id="org3c6523d"></a>Pyright<br />
<div class="outline-text-6" id="text-2-14-1-2-2">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package lsp-pyright
  <span style="font-weight: bold;">:ensure</span> t
  <span style="font-weight: bold;">:hook</span> (python-mode . (<span style="font-weight: bold;">lambda</span> ()
                         (<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">lsp-pyright</span>)
                         (lsp))))  <span style="font-weight: bold; font-style: italic;">; </span><span style="font-weight: bold; font-style: italic;">or lsp-deferred</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(use-package company)</span>
</pre>
</div>
</div>
</li>
<li><a id="orgce21f42"></a>Mspyls<br />
<div class="outline-text-6" id="text-2-14-1-2-3">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package lsp-python-ms
  <span style="font-weight: bold;">:ensure</span> t
  <span style="font-weight: bold;">:init</span> (<span style="font-weight: bold;">setq</span> lsp-python-ms-auto-install-server t)
  <span style="font-weight: bold;">:hook</span> (python-mode . (<span style="font-weight: bold;">lambda</span> ()
                         (<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">lsp-python-ms</span>)
                         (lsp))))  <span style="font-weight: bold; font-style: italic;">;</span><span style="font-weight: bold; font-style: italic;">lsp or lsp-deferred</span>

</pre>
</div>
</div>
</li>
<li><a id="orgd18e238"></a>jedi<br />
<div class="outline-text-6" id="text-2-14-1-2-4">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package lsp-jedi
  <span style="font-weight: bold;">:ensure</span> t
  <span style="font-weight: bold;">:config</span>
  (<span style="font-weight: bold;">with-eval-after-load</span> <span style="font-style: italic;">"lsp-mode"</span>
    (add-to-list 'lsp-disabled-clients 'pyls)
    (add-to-list 'lsp-disabled-clients 'mspyls)
    (add-to-list 'lsp-disabled-clients 'pylsp)
    <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(add-to-list 'lsp-enabled-clients 'jedi)</span>
    ))
</pre>
</div>
</div>
</li>
</ol>
</li>

<li><a id="orge485663"></a>LSP for Html<br />
<div class="outline-text-5" id="text-2-14-1-3">
<div class="org-src-container">
<pre class="src src-emacs-lisp">
</pre>
</div>
</div>
</li>
</ol>
</div>

<div id="outline-container-org4b399bb" class="outline-4">
<h4 id="org4b399bb"><span class="section-number-4">2.14.2</span> Python<sub>settings</sub></h4>
<div class="outline-text-4" id="text-2-14-2">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">&#35774;&#32622;&#32553;&#36827;&#20026;4</span>
(<span style="font-weight: bold;">setq</span>
 python-indent-offset 4
 python-indent-guess-indent-offset nil)
(add-hook 'python-mode-hook (electric-pair-mode 1))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgb94df98" class="outline-4">
<h4 id="orgb94df98"><span class="section-number-4">2.14.3</span> Format python code</h4>
<div class="outline-text-4" id="text-2-14-3">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package yapfify
  <span style="font-weight: bold;">:config</span>
  (add-hook 'python-mode-hook 'yapf-mode))
</pre>
</div>
</div>
</div>

<div id="outline-container-org5c45b7d" class="outline-4">
<h4 id="org5c45b7d"><span class="section-number-4">2.14.4</span> Format All</h4>
<div class="outline-text-4" id="text-2-14-4">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package format-all)
</pre>
</div>
</div>
</div>
<div id="outline-container-org7816769" class="outline-4">
<h4 id="org7816769"><span class="section-number-4">2.14.5</span> Elpy &#x2013; IDE for py</h4>
<div class="outline-text-4" id="text-2-14-5">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package elpy
  <span style="font-weight: bold;">:ensure</span> t
  <span style="font-weight: bold;">:init</span>
  (elpy-enable))
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org5f7bd4e" class="outline-3">
<h3 id="org5f7bd4e"><span class="section-number-3">2.15</span> Orgmode</h3>
<div class="outline-text-3" id="text-2-15">
</div>
<div id="outline-container-org91ccda9" class="outline-4">
<h4 id="org91ccda9"><span class="section-number-4">2.15.1</span> CodeBlock模版</h4>
<div class="outline-text-4" id="text-2-15-1">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">org-tempo</span>)
(add-to-list 'org-structure-template-alist '(<span style="font-style: italic;">"py"</span> . <span style="font-style: italic;">"src python :results output"</span>))
(add-to-list 'org-structure-template-alist '(<span style="font-style: italic;">"el"</span> . <span style="font-style: italic;">"src emacs-lisp"</span>))
(add-to-list 'org-structure-template-alist '(<span style="font-style: italic;">"ipy"</span> . <span style="font-style: italic;">"src ipython :session"</span>))
(add-to-list 'org-structure-template-alist '(<span style="font-style: italic;">"bash"</span> . <span style="font-style: italic;">"src bash"</span>))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgfb961fb" class="outline-4">
<h4 id="orgfb961fb"><span class="section-number-4">2.15.2</span> outline</h4>
<div class="outline-text-4" id="text-2-15-2">
<p>
配置headline的项目符号(bullet point)
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package org-superstar
  <span style="font-weight: bold;">:after</span> org
  <span style="font-weight: bold;">:hook</span> (org-mode . org-superstar-mode)
  <span style="font-weight: bold;">:config</span>
  (<span style="font-weight: bold;">setq</span> org-superstar-leading-bullet  ?\s)

  <span style="font-weight: bold;">:custom</span>
  <span style="font-weight: bold; font-style: italic;">;;</span><span style="font-weight: bold; font-style: italic;">(org-superstar-remove-leading-stars t)</span>

  (org-superstar-headline-bullets-list '(<span style="font-style: italic;">"&#9673;"</span> <span style="font-style: italic;">"&#9675;"</span> <span style="font-style: italic;">"&#9679;"</span> <span style="font-style: italic;">"&#9675;"</span> <span style="font-style: italic;">"&#9679;"</span> <span style="font-style: italic;">"&#9675;"</span> <span style="font-style: italic;">"&#9679;"</span>))
  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(org-superstar-headline-bullets-list '("&#9775;" "&#9776;" "&#9777;" "&#9778;" "&#9779;" "&#9780;" "&#9781;" "&#9782;" "&#9783;"))</span>
  )


</pre>
</div>

<p>
配置折叠后的省略号
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> org-ellipsis <span style="font-style: italic;">" &#9660; "</span>)
</pre>
</div>
</div>
</div>

<div id="outline-container-orga6d5de1" class="outline-4">
<h4 id="orga6d5de1"><span class="section-number-4">2.15.3</span> Org-roam</h4>
<div class="outline-text-4" id="text-2-15-3">
<div class="org-src-container">
<pre class="src src-emacs-lisp">      <span style="font-weight: bold; font-style: italic;">;;</span><span style="font-weight: bold; font-style: italic;">(use-package org-roam</span>
        <span style="font-weight: bold; font-style: italic;">;;</span><span style="font-weight: bold; font-style: italic;">:ensure t</span>
        <span style="font-weight: bold; font-style: italic;">;;</span><span style="font-weight: bold; font-style: italic;">:init</span>
        <span style="font-weight: bold; font-style: italic;">;;</span><span style="font-weight: bold; font-style: italic;">(setq org-roam-v2-ack t)</span>
        <span style="font-weight: bold; font-style: italic;">;;</span><span style="font-weight: bold; font-style: italic;">:custom</span>
        <span style="font-weight: bold; font-style: italic;">;;</span><span style="font-weight: bold; font-style: italic;">(org-roam-directory "~/MyLife/org-roam")</span>
        <span style="font-weight: bold; font-style: italic;">;;</span><span style="font-weight: bold; font-style: italic;">:bind (("C-c n l" . org-roam-buffer-toggle)</span>
               <span style="font-weight: bold; font-style: italic;">;;</span><span style="font-weight: bold; font-style: italic;">("C-c n f" . org-roam-node-find)</span>
               <span style="font-weight: bold; font-style: italic;">;;</span><span style="font-weight: bold; font-style: italic;">("C-c n i" . org-roam-node-insert))</span>
        <span style="font-weight: bold; font-style: italic;">;;</span><span style="font-weight: bold; font-style: italic;">:config</span>
        <span style="font-weight: bold; font-style: italic;">;;</span><span style="font-weight: bold; font-style: italic;">(org-roam-setup))</span>
(use-package org-roam
  <span style="font-weight: bold;">:ensure</span> t
  <span style="font-weight: bold;">:init</span>
  (<span style="font-weight: bold;">setq</span> org-roam-v2-ack t)
  <span style="font-weight: bold;">:custom</span>
  (org-roam-directory <span style="font-style: italic;">"~/MyLife/org-roam"</span>)
  (org-roam-completion-everywhere t)
  (org-roam-dailies-capture-templates
    '((<span style="font-style: italic;">"d"</span> <span style="font-style: italic;">"default"</span> entry <span style="font-style: italic;">"* %&lt;%I:%M %p&gt;: %?"</span>
       <span style="font-weight: bold;">:if-new</span> (file+head <span style="font-style: italic;">"%&lt;%Y-%m-%d&gt;.org"</span> <span style="font-style: italic;">"#+title: %&lt;%Y-%m-%d&gt;\n"</span>))))
  <span style="font-weight: bold;">:bind</span> ((<span style="font-style: italic;">"C-c n l"</span> . org-roam-buffer-toggle)
         (<span style="font-style: italic;">"C-c n f"</span> . org-roam-node-find)
         (<span style="font-style: italic;">"C-c n i"</span> . org-roam-node-insert)
         <span style="font-weight: bold;">:map</span> org-mode-map
         (<span style="font-style: italic;">"C-M-i"</span> . completion-at-point)
         <span style="font-weight: bold;">:map</span> org-roam-dailies-map
         (<span style="font-style: italic;">"Y"</span> . org-roam-dailies-capture-yesterday)
         (<span style="font-style: italic;">"T"</span> . org-roam-dailies-capture-tomorrow))
  <span style="font-weight: bold;">:bind-keymap</span>
  (<span style="font-style: italic;">"C-c n d"</span> . org-roam-dailies-map)
  <span style="font-weight: bold;">:config</span>
  (<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">org-roam-dailies</span>) <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Ensure the keymap is available</span>
  (org-roam-db-autosync-mode))

</pre>
</div>
</div>
</div>
<div id="outline-container-org447230f" class="outline-4">
<h4 id="org447230f"><span class="section-number-4">2.15.4</span> Org-mode</h4>
<div class="outline-text-4" id="text-2-15-4">
</div>
<ol class="org-ol">
<li><a id="orgcf87faf"></a>Init set up<br />
<div class="outline-text-5" id="text-2-15-4-1">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> org-directory <span style="font-style: italic;">"~/MyLife/org"</span>)
(global-set-key (kbd <span style="font-style: italic;">"C-c l"</span>) 'org-store-link)
(global-set-key (kbd <span style="font-style: italic;">"C-c a"</span>) 'org-agenda)
(global-set-key (kbd <span style="font-style: italic;">"C-c c"</span>) 'org-capture)
</pre>
</div>
</div>
</li>

<li><a id="orgab4e7dc"></a>Hide emphasis markers<br />
<div class="outline-text-5" id="text-2-15-4-2">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> org-hide-emphasis-markers t)
</pre>
</div>
</div>
</li>

<li><a id="orgab858ae"></a>org-drill<br />
<div class="outline-text-5" id="text-2-15-4-3">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package org-drill)
</pre>
</div>
</div>
</li>
</ol>
</div>

<div id="outline-container-org9008cb8" class="outline-4">
<h4 id="org9008cb8"><span class="section-number-4">2.15.5</span> Pomodoro</h4>
<div class="outline-text-4" id="text-2-15-5">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package org-pomodoro
  <span style="font-weight: bold;">:config</span>
  (<span style="font-weight: bold;">setq</span> org-pomodoro-start-sound (expand-file-name <span style="font-style: italic;">"~/MyLife/Emacs/sounds/meditation_bell.wav"</span>))
  (<span style="font-weight: bold;">setq</span> org-pomodoro-short-break-sound (expand-file-name <span style="font-style: italic;">"~/MyLife/Emacs/sounds/meditation_bell.wav"</span>))
  (<span style="font-weight: bold;">setq</span> org-pomodoro-long-break-sound (expand-file-name <span style="font-style: italic;">"~/MyLife/Emacs/sounds/meditation_bell.wav"</span>))
  (<span style="font-weight: bold;">setq</span> org-pomodoro-finished-sound (expand-file-name <span style="font-style: italic;">"~/MyLife/Emacs/sounds/meditation_bell.wav"</span>)))
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">org-pomodoro use sound-wav pavkage to play the sound</span>
(use-package sound-wav)

</pre>
</div>
</div>
</div>

<div id="outline-container-org69c2d14" class="outline-4">
<h4 id="org69c2d14"><span class="section-number-4">2.15.6</span> tracking habits</h4>
<div class="outline-text-4" id="text-2-15-6">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-to-list 'org-modules 'org-habit)
</pre>
</div>
</div>
</div>

<div id="outline-container-org71d2fcf" class="outline-4">
<h4 id="org71d2fcf"><span class="section-number-4">2.15.7</span> Auto insert newline</h4>
<div class="outline-text-4" id="text-2-15-7">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(add-hook 'org-mode-hook '(lambda () (<span style="font-weight: bold;">setq</span> fill-column 80)))
(add-hook 'org-mode-hook 'auto-fill-mode)
</pre>
</div>
</div>
</div>

<div id="outline-container-org78d8a60" class="outline-4">
<h4 id="org78d8a60"><span class="section-number-4">2.15.8</span> org-capture-template</h4>
<div class="outline-text-4" id="text-2-15-8">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">setq</span> org-capture-templates
'(
  (<span style="font-style: italic;">"t"</span> <span style="font-style: italic;">"Tasks"</span>)
  (<span style="font-style: italic;">"tt"</span> <span style="font-style: italic;">"TODO"</span> entry (file+headline <span style="font-style: italic;">"GTD.org"</span> <span style="font-style: italic;">"Tasks"</span>) <span style="font-style: italic;">"* TODO %?\n %i\n %a"</span>)
  (<span style="font-style: italic;">"T"</span> <span style="font-style: italic;">"Thoughts"</span>)
  (<span style="font-style: italic;">"TT"</span> <span style="font-style: italic;">"Thought  To be done"</span> entry (file+headline <span style="font-style: italic;">"GTD.org"</span> <span style="font-style: italic;">"&#26410;&#23454;&#29616;&#30340;&#24819;&#27861;"</span>) <span style="font-style: italic;">"* %?\n"</span> <span style="font-weight: bold;">:jump-to-captured</span> t)
  (<span style="font-style: italic;">"d"</span> <span style="font-style: italic;">"Drills"</span>)
  (<span style="font-style: italic;">"dE"</span> <span style="font-style: italic;">"Drills for English"</span> entry (file+headline <span style="font-style: italic;">"GTD.org"</span> <span style="font-style: italic;">"English"</span>)  <span style="font-style: italic;">"* %? :drill:"</span>)
  (<span style="font-style: italic;">"dP"</span> <span style="font-style: italic;">"Drills for Python"</span> entry (file+headline <span style="font-style: italic;">"~/MyLife/Python/Learning_Python/README.org"</span> <span style="font-style: italic;">"&#32451;&#20064;&#39064;"</span>) <span style="font-style: italic;">"* %? :drill:\n** Answer\n** Note\n"</span> <span style="font-weight: bold;">:jump-to-captured</span> t)
  )
)
</pre>
</div>
</div>
</div>

<div id="outline-container-org635c549" class="outline-4">
<h4 id="org635c549"><span class="section-number-4">2.15.9</span> Encrypt</h4>
<div class="outline-text-4" id="text-2-15-9">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(<span style="font-weight: bold;">require</span> '<span style="font-weight: bold; text-decoration: underline;">org-crypt</span>)
(org-crypt-use-before-save-magic)
(<span style="font-weight: bold;">setq</span> org-tags-exclude-from-inheritance (<span style="font-weight: bold;">quote</span> (<span style="font-style: italic;">"crypt"</span>)))
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">GPG key to use for encryption</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">Either the Key ID or set to nil to use symmetric encryption.</span>
(<span style="font-weight: bold;">setq</span> org-crypt-key <span style="font-style: italic;">"kamisama"</span>)
</pre>
</div>
</div>
</div>
</div>



<div id="outline-container-orgbb284d9" class="outline-3">
<h3 id="orgbb284d9"><span class="section-number-3">2.16</span> Productivity</h3>
<div class="outline-text-3" id="text-2-16">
<p>
一些能提高编辑效率的配置
</p>
</div>

<div id="outline-container-org3c02f08" class="outline-4">
<h4 id="org3c02f08"><span class="section-number-4">2.16.1</span> 括号补全</h4>
<div class="outline-text-4" id="text-2-16-1">
<p>
自动补全各种括号和引号
</p>
<div class="org-src-container">
<pre class="src src-emacs-lisp">
<span style="font-weight: bold; font-style: italic;">;;</span><span style="font-weight: bold; font-style: italic;">(electric-pair-mode 1)</span>

(use-package smartparens
  <span style="font-weight: bold;">:hook</span>
  (prog-mode . smartparens-mode)
  (org-mode . smartparens-mode ))
</pre>
</div>
</div>
</div>

<div id="outline-container-orgcc3e6af" class="outline-4">
<h4 id="orgcc3e6af"><span class="section-number-4">2.16.2</span> Snippet</h4>
<div class="outline-text-4" id="text-2-16-2">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">snippet engine</span>
(use-package yasnippet
  <span style="font-weight: bold;">:defer</span>
  <span style="font-weight: bold;">:hook</span> (prog-mode . yas-minor-mode)
  <span style="font-weight: bold;">:config</span>
  (yas-reload-all))
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">snippets</span>
<span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(use-package yasnippet-snippets</span>
  <span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">:hook (prog-mode .))</span>
</pre>
</div>
</div>
</div>
</div>

<div id="outline-container-org6560467" class="outline-3">
<h3 id="org6560467"><span class="section-number-3">2.17</span> Ebook</h3>
<div class="outline-text-3" id="text-2-17">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(use-package nov
  <span style="font-weight: bold;">:config</span>
  (add-to-list 'auto-mode-alist '(<span style="font-style: italic;">"\\.epub\\'"</span> . nov-mode)))

</pre>
</div>
</div>
</div>

<div id="outline-container-org95f47cf" class="outline-3">
<h3 id="org95f47cf"><span class="section-number-3">2.18</span> Magit</h3>
<div class="outline-text-3" id="text-2-18">
<div class="org-src-container">
<pre class="src src-emacs-lisp"><span style="font-weight: bold; font-style: italic;">;; </span><span style="font-weight: bold; font-style: italic;">(use-package magit)</span>
</pre>
</div>
</div>
</div>

<div id="outline-container-org1b71a63" class="outline-3">
<h3 id="org1b71a63"><span class="section-number-3">2.19</span> Save Emacs Sessions</h3>
<div class="outline-text-3" id="text-2-19">
<div class="org-src-container">
<pre class="src src-emacs-lisp">(desktop-save-mode 1)
</pre>
</div>
</div>
</div>
</div>
</div>
<div id="postamble" class="status">
<p class="date">Date: 2022-01-03 Mon 00:00</p>
<p class="author">Author: kamisama</p>
<p class="date">Created: 2022-01-03 Mon 20:35</p>
</div>
</body>
</html>
