<!doctype html><html lang=en>
<head>
<title>test :: Hugo Theme MemE</title>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=description content="VimHacking Vim配置python开发环境 :EXPORT_FILE_NAME: Vim配置python开发环境
功能:代码提示,代码补全,语法检查,snippet补全
系统和软件版本:
1 2 3 4 5 6 7 8  $ vim --version VIM - Vi IMproved 8.2 (2019 Dec 12, compiled Mar 26 2021 00:21:09) Included patches: 1-2653 Compiled by Arch Linux $ uname -a Linux kamisama-20e0a013cd 5.">
<meta name=keywords content>
<meta name=robots content="noodp">
<link rel=canonical href=https://example.com/post/blog/>
<link rel=stylesheet href=https://example.com/assets/style.css>
<link rel=stylesheet href=https://example.com/assets/>
<link rel=apple-touch-icon href=https://example.com/img/apple-touch-icon-192x192.png>
<link rel="shortcut icon" href=https://example.com/img/favicon/>
<meta name=twitter:card content="summary">
<meta property="og:locale" content="en">
<meta property="og:type" content="article">
<meta property="og:title" content="test">
<meta property="og:description" content="VimHacking Vim配置python开发环境 :EXPORT_FILE_NAME: Vim配置python开发环境
功能:代码提示,代码补全,语法检查,snippet补全
系统和软件版本:
1 2 3 4 5 6 7 8  $ vim --version VIM - Vi IMproved 8.2 (2019 Dec 12, compiled Mar 26 2021 00:21:09) Included patches: 1-2653 Compiled by Arch Linux $ uname -a Linux kamisama-20e0a013cd 5.">
<meta property="og:url" content="https://example.com/post/blog/">
<meta property="og:site_name" content="Hugo Theme MemE">
<meta property="og:image" content="https://example.com/img/favicon/">
<meta property="og:image:width" content="2048">
<meta property="og:image:height" content="1024">
<meta property="article:published_time" content="2021-06-06 19:57:40 +0800 +0800">
</head>
<body class=#fff>
<div class="container headings--one-size">
<header class=header>
<div class=header__inner>
<div class=header__logo>
<a href=https://example.com/>
<div class=logo>
Terminal
</div>
</a>
</div>
<div class=menu-trigger>menu</div>
</div>
<nav class=menu>
<ul class="menu__inner menu__inner--desktop">
<li><a href=/posts/>Posts</a></li>
<li><a href=/categories/>Categories</a></li>
<li><a href=/tags/>Tags</a></li>
<li><a href=/about/>About</a></li>
<li><a href></a></li>
<li><a href></a></li>
<li><a href></a></li>
</ul>
<ul class="menu__inner menu__inner--mobile">
<li><a href=/posts/>Posts</a></li>
<li><a href=/categories/>Categories</a></li>
<li><a href=/tags/>Tags</a></li>
<li><a href=/about/>About</a></li>
<li><a href></a></li>
<li><a href></a></li>
<li><a href></a></li>
</ul>
</nav>
</header>
<div class=content>
<div class=post>
<h1 class=post-title>
<a href=https://example.com/post/blog/>test</a></h1>
<div class=post-meta>
<span class=post-date>
2021-06-06
</span>
<span class=post-author>:: [kamisama]</span>
</div>
<div class=post-content><div>
<h2 id=vimhacking>VimHacking<a href=#vimhacking class=hanchor arialabel=Anchor>&#8983;</a> </h2>
<h3 id=vim配置python开发环境>Vim配置python开发环境<a href=#vim配置python开发环境 class=hanchor arialabel=Anchor>&#8983;</a> </h3>
<p>:EXPORT_FILE_NAME: Vim配置python开发环境</p>
<p>功能:代码提示,代码补全,语法检查,snippet补全</p>
<p>系统和软件版本:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-bash data-lang=bash>$ vim --version
VIM - Vi IMproved 8.2 <span class=o>(</span><span class=m>2019</span> Dec 12, compiled Mar <span class=m>26</span> <span class=m>2021</span> 00:21:09<span class=o>)</span>
Included patches: 1-2653
Compiled by Arch Linux

$ uname -a
Linux kamisama-20e0a013cd 5.10.30-1-MANJARO <span class=c1>#1 SMP Wed Apr 14 08:07:27 UTC 2021 x86_64 GNU/Linux</span>

</code></pre></td></tr></table>
</div>
</div><h4 id=插件管理器vim-plug>插件管理器Vim-Plug<a href=#插件管理器vim-plug class=hanchor arialabel=Anchor>&#8983;</a> </h4>
<ul>
<li>通过命令行直接安装</li>
</ul>
<p>Unix:</p>
<blockquote>
<p>这种方式可能需要代理才能使用，下载的网址貌似被墙,至少在我写这条记录的时候下载不了,墙对于gayhub的策略真是搞不懂</p>
</blockquote>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-bash data-lang=bash>$ curl -fLo ~/.vim/autoload/plug.vim --create-dirs <span class=se>\
</span><span class=se></span>    https://raw.githubusercontent.com/junegunn/vim-plug/master/plug.vim
</code></pre></td></tr></table>
</div>
</div><blockquote>
<p>由于这种方式下载不了，所以官网推荐的自动安装的方法不适用</p>
</blockquote>
<ul>
<li>手动下载安装:</li>
</ul>
<p>将命令行里的网址复制到浏览器，访问并复制网页内容，保存为plug.vim文件，放置到`.vim/autoload/`目录</p>
<h4 id=插件安装--加载>插件安装(加载)<a href=#插件安装--加载 class=hanchor arialabel=Anchor>&#8983;</a> </h4>
<p>~/.vimrc:</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt>1
</span><span class=lnt>2
</span><span class=lnt>3
</span><span class=lnt>4
</span><span class=lnt>5
</span><span class=lnt>6
</span><span class=lnt>7
</span><span class=lnt>8
</span><span class=lnt>9
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-vim data-lang=vim><span class=nx>call</span> <span class=nx>plug</span>#<span class=nx>begin</span><span class=p>(</span><span class=s1>&#39;~/.vim/plugged&#39;</span><span class=p>)</span><span class=err>
</span><span class=err></span><span class=nx>Plug</span> <span class=s1>&#39;prabirshrestha/vim-lsp&#39;</span><span class=err>
</span><span class=err></span><span class=nx>Plug</span> <span class=s1>&#39;mattn/vim-lsp-settings&#39;</span><span class=err>
</span><span class=err></span><span class=nx>Plug</span> <span class=s1>&#39;prabirshrestha/asyncomplete.vim&#39;</span><span class=err>
</span><span class=err></span><span class=nx>Plug</span> <span class=s1>&#39;prabirshrestha/asyncomplete-lsp.vim&#39;</span><span class=err>
</span><span class=err></span><span class=nx>Plug</span> <span class=s1>&#39;prabirshrestha/asyncomplete-ultisnips.vim&#39;</span><span class=err>
</span><span class=err></span><span class=nx>Plug</span> <span class=s1>&#39;honza/vim-snippets&#39;</span><span class=err>
</span><span class=err></span><span class=nx>Plug</span> <span class=s1>&#39;SirVer/ultisnips&#39;</span><span class=err>
</span><span class=err></span><span class=nx>call</span> <span class=nx>plug</span>#<span class=nx>end</span><span class=p>()</span><span class=err>
</span></code></pre></td></tr></table>
</div>
</div><p>编辑完后保存`:w`,执行`:source %`重新加载vimrc文件,执行`:PlugInstall`下载插件</p>
<h4 id=插件配置>插件配置<a href=#插件配置 class=hanchor arialabel=Anchor>&#8983;</a> </h4>
<p>~/.vimrc:(配置放在插件加载之后)</p>
<div class=highlight><div class=chroma>
<table class=lntable><tr><td class=lntd>
<pre tabindex=0 class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span><span class=lnt>12
</span><span class=lnt>13
</span><span class=lnt>14
</span><span class=lnt>15
</span><span class=lnt>16
</span><span class=lnt>17
</span><span class=lnt>18
</span><span class=lnt>19
</span><span class=lnt>20
</span><span class=lnt>21
</span><span class=lnt>22
</span><span class=lnt>23
</span><span class=lnt>24
</span><span class=lnt>25
</span><span class=lnt>26
</span><span class=lnt>27
</span><span class=lnt>28
</span><span class=lnt>29
</span><span class=lnt>30
</span><span class=lnt>31
</span></code></pre></td>
<td class=lntd>
<pre tabindex=0 class=chroma><code class=language-vim data-lang=vim><span class=k>if</span> &amp;<span class=nx>runtimepath</span> <span class=p>=~</span> <span class=s1>&#39;asyncomplete&#39;</span><span class=err>
</span><span class=err></span><span class=c>&#34; inoremap &lt;expr&gt; &lt;Tab&gt;   pumvisible() ? &#34;\&lt;C-n&gt;&#34; : &#34;\&lt;Tab&gt;&#34;</span><span class=err>
</span><span class=err></span><span class=c>&#34; inoremap &lt;expr&gt; &lt;S-Tab&gt; pumvisible() ? &#34;\&lt;C-p&gt;&#34; : &#34;\&lt;S-Tab&gt;&#34;</span><span class=err>
</span><span class=err></span><span class=c>&#34; inoremap &lt;expr&gt; &lt;cr&gt;    pumvisible() ? asyncomplete#close_popup() : &#34;\&lt;cr&gt;&#34;</span><span class=err>
</span><span class=err></span><span class=nx>inoremap</span> <span class=p>&lt;</span><span class=nx>expr</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nx>Tab</span><span class=p>&gt;</span> <span class=nx>pumvisible</span><span class=p>()</span> ? <span class=s2>&#34;\&lt;C-n&gt;&#34;</span> : <span class=s2>&#34;\&lt;Tab&gt;&#34;</span><span class=err>
</span><span class=err></span><span class=nx>inoremap</span> <span class=p>&lt;</span><span class=nx>expr</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nx>S</span><span class=p>-</span><span class=nx>Tab</span><span class=p>&gt;</span> <span class=nx>pumvisible</span><span class=p>()</span> ? <span class=s2>&#34;\&lt;C-p&gt;&#34;</span> : <span class=s2>&#34;\&lt;S-Tab&gt;&#34;</span><span class=err>
</span><span class=err></span><span class=nx>inoremap</span> <span class=p>&lt;</span><span class=nx>expr</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nx>cr</span><span class=p>&gt;</span>    <span class=nx>pumvisible</span><span class=p>()</span> ? <span class=s2>&#34;\&lt;C-y&gt;&#34;</span> : <span class=s2>&#34;\&lt;cr&gt;&#34;</span><span class=err>
</span><span class=err></span><span class=nx>imap</span> <span class=p>&lt;</span><span class=nx>c</span><span class=p>-</span><span class=nx>space</span><span class=p>&gt;</span> <span class=p>&lt;</span><span class=nx>Plug</span><span class=p>&gt;(</span><span class=nx>asyncomplete_force_refresh</span><span class=p>)</span><span class=err>
</span><span class=err></span><span class=k>endif</span><span class=err>
</span><span class=err>
</span><span class=err></span><span class=k>if</span> &amp;<span class=nx>runtimepath</span> <span class=p>=~</span> <span class=s1>&#39;asyncomplete-ultisnips&#39;</span><span class=err>
</span><span class=err></span>    <span class=k>if</span> <span class=nx>has</span><span class=p>(</span><span class=s1>&#39;python3&#39;</span><span class=p>)</span><span class=err>
</span><span class=err></span><span class=c>    &#34; let g:UltiSnipsExpandTrigger=&#34;&lt;cr&gt;&#34;</span><span class=err>
</span><span class=err></span><span class=c>    &#34; ctrl + e 触发snippet</span><span class=err>
</span><span class=err></span>    <span class=k>let</span> <span class=nx>g</span>:<span class=nx>UltiSnipsExpandTrigger</span><span class=p>=</span><span class=s2>&#34;&lt;c-e&gt;&#34;</span><span class=err>
</span><span class=err></span>    <span class=k>let</span> <span class=nx>g</span>:<span class=nx>UltiSnipsJumpForwardTrigger</span><span class=p>=</span><span class=s2>&#34;&lt;c-b&gt;&#34;</span><span class=err>
</span><span class=err></span>    <span class=k>let</span> <span class=nx>g</span>:<span class=nx>UltiSnipsJumpBackwardTrigger</span><span class=p>=</span><span class=s2>&#34;&lt;c-z&gt;&#34;</span><span class=err>
</span><span class=err></span>    <span class=k>let</span> <span class=nx>g</span>:<span class=nx>UltiSnipsEditSplit</span><span class=p>=</span><span class=s2>&#34;vertical&#34;</span><span class=err>
</span><span class=err></span>    <span class=nx>call</span> <span class=nx>asyncomplete</span>#<span class=nx>register_source</span><span class=p>(</span><span class=nx>asyncomplete</span>#<span class=nx>sources</span>#<span class=nx>ultisnips</span>#<span class=nx>get_source_options</span><span class=p>(</span>{<span class=err>
</span><span class=err></span>        \ <span class=s1>&#39;name&#39;</span>: <span class=s1>&#39;ultisnips&#39;</span><span class=p>,</span><span class=err>
</span><span class=err></span>        \ <span class=s1>&#39;allowlist&#39;</span>: [<span class=s1>&#39;*&#39;</span>]<span class=p>,</span><span class=err>
</span><span class=err></span>        \ <span class=s1>&#39;completor&#39;</span>: <span class=k>function</span><span class=p>(</span><span class=s1>&#39;asyncomplete#sources#ultisnips#completor&#39;</span><span class=p>),</span><span class=err>
</span><span class=err></span>        \ }<span class=p>))</span><span class=err>
</span><span class=err></span>    <span class=k>endif</span><span class=err>
</span><span class=err></span><span class=k>endif</span><span class=err>
</span><span class=err></span><span class=k>if</span> &amp;<span class=nx>runtimepath</span> <span class=p>=~</span> <span class=s1>&#39;vim-lsp&#39;</span><span class=err>
</span><span class=err></span><span class=nx>nmap</span> <span class=nx>gd</span> :<span class=nx>LspDefinition</span><span class=p>&lt;</span><span class=nx>cr</span><span class=p>&gt;</span><span class=err>
</span><span class=err></span><span class=nx>nmap</span> <span class=p>&lt;</span><span class=nx>leader</span><span class=p>&gt;</span><span class=nx>f</span> :<span class=nx>LspDocumentFormat</span><span class=p>&lt;</span><span class=nx>cr</span><span class=p>&gt;</span><span class=err>
</span><span class=err></span><span class=k>let</span> <span class=nx>g</span>:<span class=nx>lsp_diagnostics_float_cursor</span><span class=p>=</span><span class=m>1</span><span class=err>
</span><span class=err></span><span class=k>let</span> <span class=nx>g</span>:<span class=nx>lsp_diagnostics_virtual_text_enabled</span><span class=p>=</span><span class=m>1</span><span class=err>
</span><span class=err></span><span class=k>endif</span><span class=err>
</span></code></pre></td></tr></table>
</div>
</div><p>上面的配置就能实现类似pycharm的代码补全功能了</p>
<h4 id=插件详解>插件详解:<a href=#插件详解 class=hanchor arialabel=Anchor>&#8983;</a> </h4>
<ul>
<li>vim-lsp:vim的language server protocol插件</li>
<li>vim-lsp-setting:方便配置vim-lsp的插件</li>
</ul>
<p>上面两个插件安装完后打开一个py文件，就会提示安装语言服务器,选择yes；或者执行`:LspInstallServer pyls-all`,pyls-all可以换成其他，在`LspInstallServer`后按`<tab>`就会切换可用的语言服务器</p>
<ul>
<li>asyncomplete:自动补全插件.</li>
</ul>
<p>安装lsp后可以直接用lsp的补全功能，但是用的不是很方便，需要阅读文档后自己定制，没时间和耐心的就不合适了，所以使用自动补全插件</p>
<ul>
<li>
<p>asyncomplete-lsp:让asyncomplete使用lsp的补全</p>
</li>
<li>
<p>vim-snippets:大量的snippet代码，不提供补全，所以需要补全引擎，例如:ultisnips</p>
</li>
<li>
<p>ultisnips:snippet的补全引擎</p>
</li>
<li>
<p>asyncomplete-ultisnips:将ultisnips的补全集成到asyncomplete</p>
</li>
</ul>
<h4 id=效果图>效果图<a href=#效果图 class=hanchor arialabel=Anchor>&#8983;</a> </h4>
<figure class=left>
<img src=/ox-hugo/snippets.gif>
</figure>
<p>:smile:</p>
<p>🙈</p>
</div></div>
</div>
</div>
<footer class=footer>
<div class=footer__inner>
<div class="copyright copyright--user">
<span>[CC BY-NC-SA 4.0](https://creativecommons.org/licenses/by-nc-sa/4.0/deed.en)</span>
<span>:: Theme made by <a href=https://twitter.com/panr>panr</a></span>
</div>
</div>
</footer>
<script src=https://example.com/assets/main.js></script>
<script src=https://example.com/assets/prism.js></script>
</div>
</body>
</html>